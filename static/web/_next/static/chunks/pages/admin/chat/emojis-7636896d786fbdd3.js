(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559,1382],{97183:function(e,t,n){"use strict";var r=n(2897),o=n(7293),i=r.ZP;i.Header=r.h4,i.Footer=r.$_,i.Content=r.VY,i.Sider=o.Z,t.Z=i},11382:function(e,t,n){"use strict";var r=n(87462),o=n(4942),i=n(97685),a=n(94184),c=n.n(a),u=n(23279),l=n.n(u),s=n(98423),f=n(67294),p=n(53124),d=n(96159),m=n(93355),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};(0,m.b)("small","default","large");var y=null,g=function(e){var t=e.spinPrefixCls,n=e.spinning,a=void 0===n||n,u=e.delay,m=e.className,g=e.size,h=void 0===g?"default":g,j=e.tip,x=e.wrapperClassName,b=e.style,E=e.children,w=v(e,["spinPrefixCls","spinning","delay","className","size","tip","wrapperClassName","style","children"]),T=f.useState(function(){return a&&(!a||!u||!!isNaN(Number(u)))}),Z=(0,i.Z)(T,2),O=Z[0],N=Z[1];return f.useEffect(function(){var e=l()(function(){N(a)},u);return e(),function(){var t;null===(t=null==e?void 0:e.cancel)||void 0===t||t.call(e)}},[u,a]),f.createElement(p.C,null,function(n){var i,a,u,l=n.direction,p=c()(t,(u={},(0,o.Z)(u,"".concat(t,"-sm"),"small"===h),(0,o.Z)(u,"".concat(t,"-lg"),"large"===h),(0,o.Z)(u,"".concat(t,"-spinning"),O),(0,o.Z)(u,"".concat(t,"-show-text"),!!j),(0,o.Z)(u,"".concat(t,"-rtl"),"rtl"===l),u),m),v=(0,s.Z)(w,["indicator","prefixCls"]),g=f.createElement("div",(0,r.Z)({},v,{style:b,className:p,"aria-live":"polite","aria-busy":O}),(i=e.indicator,a="".concat(t,"-dot"),null===i?null:(0,d.l$)(i)?(0,d.Tm)(i,{className:c()(i.props.className,a)}):(0,d.l$)(y)?(0,d.Tm)(y,{className:c()(y.props.className,a)}):f.createElement("span",{className:c()(a,"".concat(t,"-dot-spin"))},f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}))),j?f.createElement("div",{className:"".concat(t,"-text")},j):null);if(void 0!==E){var T=c()("".concat(t,"-container"),(0,o.Z)({},"".concat(t,"-blur"),O));return f.createElement("div",(0,r.Z)({},v,{className:c()("".concat(t,"-nested-loading"),x)}),O&&f.createElement("div",{key:"loading"},g),f.createElement("div",{className:T,key:"container"},E))}return g})},h=function(e){var t=e.prefixCls,n=(0,f.useContext(p.E_).getPrefixCls)("spin",t),o=(0,r.Z)((0,r.Z)({},e),{spinPrefixCls:n});return f.createElement(g,(0,r.Z)({},o))};h.setDefaultIndicator=function(e){y=e},t.Z=h},93645:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var r={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function o(e){return e?r[e]:r.trunc}},59910:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(19013),o=n(13882);function i(e,t){return(0,o.Z)(2,arguments),(0,r.Z)(e).getTime()-(0,r.Z)(t).getTime()}},11699:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(59910),o=n(13882),i=n(93645);function a(e,t,n){(0,o.Z)(2,arguments);var a=(0,r.Z)(e,t)/1e3;return(0,i.u)(null==n?void 0:n.roundingMethod)(a)}},62705:function(e,t,n){var r=n(55639).Symbol;e.exports=r},44239:function(e,t,n){var r=n(62705),o=n(89607),i=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},27561:function(e,t,n){var r=n(67990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},31957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},89607:function(e,t,n){var r=n(62705),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[c]=n:delete e[c]),o}},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:function(e,t,n){var r=n(31957),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var r=n(13218),o=n(7771),i=n(14841),a=Math.max,c=Math.min;e.exports=function(e,t,n){var u,l,s,f,p,d,m=0,v=!1,y=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function h(t){var n=u,r=l;return u=l=void 0,m=t,f=e.apply(r,n)}function j(e){var n=e-d,r=e-m;return void 0===d||n>=t||n<0||y&&r>=s}function x(){var e,n,r,i=o();if(j(i))return b(i);p=setTimeout(x,(e=i-d,n=i-m,r=t-e,y?c(r,s-n):r))}function b(e){return(p=void 0,g&&u)?h(e):(u=l=void 0,f)}function E(){var e,n=o(),r=j(n);if(u=arguments,l=this,d=n,r){if(void 0===p)return m=e=d,p=setTimeout(x,t),v?h(e):f;if(y)return clearTimeout(p),p=setTimeout(x,t),h(d)}return void 0===p&&(p=setTimeout(x,t)),f}return t=i(t)||0,r(n)&&(v=!!n.leading,s=(y="maxWait"in n)?a(i(n.maxWait)||0,t):s,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==p&&clearTimeout(p),m=0,u=d=l=p=void 0},E.flush=function(){return void 0===p?f:b(o())},E}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,n){var r=n(44239),o=n(37005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},7771:function(e,t,n){var r=n(55639);e.exports=function(){return r.Date.now()}},14841:function(e,t,n){var r=n(27561),o=n(13218),i=n(33448),a=0/0,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=u.test(e);return n||l.test(e)?s(e.slice(2),n?2:8):c.test(e)?a:+e}},10887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return n(14518)}])},14518:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(85893),o=n(85818),i=n(26713),a=n(71577),c=n(54398),u=n(77916),l=n(67294),s=n(5152),f=n.n(s),p=n(73615),d=n(64777),m=n(60956),v=n(41983),y=n(90745),g=n(6960);let h=f()(()=>Promise.all([n.e(2074),n.e(7949)]).then(n.t.bind(n,77949,23)),{loadableGenerated:{webpack:()=>[77949]},ssr:!1}),{Title:j,Paragraph:x}=o.Z,b=()=>{let[e,t]=(0,l.useState)([]),[n,o]=(0,l.useState)(!1),[s,f]=(0,l.useState)(null),[g,b]=(0,l.useState)(null),E=null,w=()=>{f(null),clearTimeout(E),E=null};async function T(){o(!0);try{let e=await (0,d.rQ)("/api/emoji");t(e)}catch(e){console.error("error fetching emojis",e)}o(!1)}async function Z(e){let t="/".concat(e.split("/").slice(3).join("/"));console.log(t),o(!0),f((0,v.kg)(v.Jk,"Deleting emoji..."));try{let e=await (0,d.rQ)(d.Ff,{method:"POST",data:{name:t}});if(e instanceof Error)throw e;f((0,v.kg)(v.zv,"Emoji deleted")),E=setTimeout(w,y.sI)}catch(e){f((0,v.kg)(v.Un,"".concat(e))),o(!1),E=setTimeout(w,y.sI)}T()}async function O(){o(!0);try{f((0,v.kg)(v.Jk,"Converting emoji..."));let e=await new Promise((e,t)=>{if(!m.dr.includes(g.type)){let e="File type is not supported: ".concat(g.type);return t(e)}(0,m.y3)(g,t=>e({name:g.name,url:t}))});f((0,v.kg)(v.Jk,"Uploading emoji..."));let t=await (0,d.rQ)(d.Qc,{method:"POST",data:{name:e.name,data:e.url}});if(t instanceof Error)throw t;f((0,v.kg)(v.zv,"Emoji uploaded successfully!")),T()}catch(e){f((0,v.kg)(v.Un,"".concat(e)))}E=setTimeout(w,y.sI),o(!1)}return(0,l.useEffect)(()=>{T()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{children:"Emojis"}),(0,r.jsx)(x,{children:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename will be used as emoji name."}),(0,r.jsx)(c.Z,{rowKey:e=>e.url,dataSource:e,columns:[{title:"",key:"delete",render:(e,t)=>(0,r.jsx)(i.Z,{size:"middle",children:(0,r.jsx)(a.Z,{onClick:()=>Z(t.url),icon:(0,r.jsx)(h,{})})})},{title:"Name",key:"name",dataIndex:"name"},{title:"Emoji",key:"url",render:(e,t)=>(0,r.jsx)("img",{src:t.url,alt:t.name,style:{maxWidth:"2vw"}})}],pagination:!1}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:m.dr.join(","),beforeUpload:b,customRequest:O,disabled:n,children:(0,r.jsx)(a.Z,{type:"primary",disabled:n,children:"Upload new emoji"})}),(0,r.jsx)(p.Z,{status:s})]})};b.getLayout=function(e){return(0,r.jsx)(g.l,{page:e})};var E=b},60956:function(e,t,n){"use strict";n.d(t,{Z7:function(){return r},dr:function(){return o},kR:function(){return a},y3:function(){return i}});let r=2097152,o=["image/png","image/jpeg","image/gif"];function i(e,t){let n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}function a(e){let t=Math.floor(Math.log(e)/Math.log(1024)),n=1*Number((e/Math.pow(1024,t)).toFixed(2));return"".concat(n," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}},9008:function(e,t,n){e.exports=n(83121)},11163:function(e,t,n){e.exports=n(80880)},92703:function(e,t,n){"use strict";var r=n(50414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[173,164,2138,31,4931,5402,2231,492,5818,7524,9915,6386,3698,3013,4398,7910,7916,710,6960,9774,2888,179],function(){return e(e.s=10887)}),_N_E=e.O()}]);
//# sourceMappingURL=emojis-7636896d786fbdd3.js.map