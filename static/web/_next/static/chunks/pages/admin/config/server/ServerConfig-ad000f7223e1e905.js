(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5388],{63606:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(1413),o=n(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},i=n(42135),l=function(e,t){return o.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};l.displayName="CheckOutlined";var c=o.forwardRef(l)},87740:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(1413),o=n(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},i=n(42135),l=function(e,t){return o.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};l.displayName="RedoOutlined";var c=o.forwardRef(l)},81643:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=function(e){return e?"function"==typeof e?e():e:null}},54907:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(87462),o=n(4942),a=n(18073),i=n(94184),l=n.n(i),c=n(74902),s=n(15671),d=n(43144),u=n(60136),p=n(33643),f=n(71002),m=n(50344),v=n(67294),y=n(96774),h=n.n(y),C=n(45987),x=n(62874),g=n(97685),Z=v.forwardRef(function(e,t){var n,r=e.prefixCls,a=e.forceRender,i=e.className,c=e.style,s=e.children,d=e.isActive,u=e.role,p=v.useState(d||a),f=(0,g.Z)(p,2),m=f[0],y=f[1];return(v.useEffect(function(){(a||d)&&y(!0)},[a,d]),m)?v.createElement("div",{ref:t,className:l()("".concat(r,"-content"),(n={},(0,o.Z)(n,"".concat(r,"-content-active"),d),(0,o.Z)(n,"".concat(r,"-content-inactive"),!d),n),i),style:c,role:u},v.createElement("div",{className:"".concat(r,"-content-box")},s)):null});Z.displayName="PanelContent";var b=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],N=function(e){(0,u.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).onItemClick=function(){var t=e.props,n=t.onItemClick,r=t.panelKey;"function"==typeof n&&n(r)},e.handleKeyPress=function(t){("Enter"===t.key||13===t.keyCode||13===t.which)&&e.onItemClick()},e.renderIcon=function(){var t=e.props,n=t.showArrow,r=t.expandIcon,o=t.prefixCls,a=t.collapsible;if(!n)return null;var i="function"==typeof r?r(e.props):v.createElement("i",{className:"arrow"});return i&&v.createElement("div",{className:"".concat(o,"-expand-icon"),onClick:"header"===a||"icon"===a?e.onItemClick:null},i)},e.renderTitle=function(){var t=e.props,n=t.header,r=t.prefixCls,o=t.collapsible;return v.createElement("span",{className:"".concat(r,"-header-text"),onClick:"header"===o?e.onItemClick:null},n)},e}return(0,d.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return!h()(this.props,e)}},{key:"render",value:function(){var e,t,n=this.props,a=n.className,i=n.id,c=n.style,s=n.prefixCls,d=n.headerClass,u=n.children,p=n.isActive,f=n.destroyInactivePanel,m=n.accordion,y=n.forceRender,h=n.openMotion,g=n.extra,N=n.collapsible,k=(0,C.Z)(n,b),w="disabled"===N,E="header"===N,P="icon"===N,j=l()((e={},(0,o.Z)(e,"".concat(s,"-item"),!0),(0,o.Z)(e,"".concat(s,"-item-active"),p),(0,o.Z)(e,"".concat(s,"-item-disabled"),w),e),a),O={className:l()("".concat(s,"-header"),(t={},(0,o.Z)(t,d,d),(0,o.Z)(t,"".concat(s,"-header-collapsible-only"),E),(0,o.Z)(t,"".concat(s,"-icon-collapsible-only"),P),t)),"aria-expanded":p,"aria-disabled":w,onKeyPress:this.handleKeyPress};return E||P||(O.onClick=this.onItemClick,O.role=m?"tab":"button",O.tabIndex=w?-1:0),delete k.header,delete k.panelKey,delete k.onItemClick,delete k.showArrow,delete k.expandIcon,v.createElement("div",(0,r.Z)({},k,{className:j,style:c,id:i}),v.createElement("div",O,this.renderIcon(),this.renderTitle(),null!=g&&"boolean"!=typeof g&&v.createElement("div",{className:"".concat(s,"-extra")},g)),v.createElement(x.Z,(0,r.Z)({visible:p,leavedClassName:"".concat(s,"-content-hidden")},h,{forceRender:y,removeOnLeave:f}),function(e,t){var n=e.className,r=e.style;return v.createElement(Z,{ref:t,prefixCls:s,className:n,style:r,isActive:p,forceRender:y,role:m?"tabpanel":null},u)}))}}]),n}(v.Component);function k(e){var t=e;if(!Array.isArray(t)){var n=(0,f.Z)(t);t="number"===n||"string"===n?[t]:[]}return t.map(function(e){return String(e)})}N.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var w=function(e){(0,u.Z)(n,e);var t=(0,p.Z)(n);function n(e){(0,s.Z)(this,n),(r=t.call(this,e)).onClickItem=function(e){var t=r.state.activeKey;if(r.props.accordion)t=t[0]===e?[]:[e];else{var n=(t=(0,c.Z)(t)).indexOf(e);n>-1?t.splice(n,1):t.push(e)}r.setActiveKey(t)},r.getNewChild=function(e,t){if(!e)return null;var n=r.state.activeKey,o=r.props,a=o.prefixCls,i=o.openMotion,l=o.accordion,c=o.destroyInactivePanel,s=o.expandIcon,d=o.collapsible,u=e.key||String(t),p=e.props,f=p.header,m=p.headerClass,y=p.destroyInactivePanel,h=p.collapsible,C=!1;C=l?n[0]===u:n.indexOf(u)>-1;var x=null!=h?h:d,g={key:u,panelKey:u,header:f,headerClass:m,isActive:C,prefixCls:a,destroyInactivePanel:null!=y?y:c,openMotion:i,accordion:l,children:e.props.children,onItemClick:"disabled"===x?null:r.onClickItem,expandIcon:s,collapsible:x};return"string"==typeof e.type?e:(Object.keys(g).forEach(function(e){void 0===g[e]&&delete g[e]}),v.cloneElement(e,g))},r.getItems=function(){var e=r.props.children;return(0,m.Z)(e).map(r.getNewChild)},r.setActiveKey=function(e){"activeKey"in r.props||r.setState({activeKey:e}),r.props.onChange(r.props.accordion?e[0]:e)};var r,o=e.activeKey,a=e.defaultActiveKey;return"activeKey"in e&&(a=o),r.state={activeKey:k(a)},r}return(0,d.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!h()(this.props,e)||!h()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.className,a=t.style,i=t.accordion,c=l()((e={},(0,o.Z)(e,n,!0),(0,o.Z)(e,r,!!r),e));return v.createElement("div",{className:c,style:a,role:i?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=k(e.activeKey)),t}}]),n}(v.Component);w.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},w.Panel=N,w.Panel;var E=n(98423),P=n(53124),j=n(33603),O=n(96159),I=function(e){var t,n,i=v.useContext(P.E_),c=i.getPrefixCls,s=i.direction,d=e.prefixCls,u=e.className,p=e.bordered,f=e.ghost,y=e.expandIconPosition,h=void 0===y?"start":y,C=c("collapse",d),x=v.useMemo(function(){return"left"===h?"start":"right"===h?"end":h},[h]),g=l()("".concat(C,"-icon-position-").concat(x),(n={},(0,o.Z)(n,"".concat(C,"-borderless"),!(void 0===p||p)),(0,o.Z)(n,"".concat(C,"-rtl"),"rtl"===s),(0,o.Z)(n,"".concat(C,"-ghost"),!!f),n),void 0===u?"":u),Z=(0,r.Z)((0,r.Z)({},j.ZP),{motionAppear:!1,leavedClassName:"".concat(C,"-content-hidden")});return v.createElement(w,(0,r.Z)({openMotion:Z},e,{expandIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.expandIcon,r=n?n(t):v.createElement(a.Z,{rotate:t.isActive?90:void 0});return(0,O.Tm)(r,function(){return{className:l()(r.props.className,"".concat(C,"-arrow"))}})},prefixCls:C,className:g}),(t=e.children,(0,m.Z)(t).map(function(e,t){var n;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var o=e.key||String(t),a=e.props,i=a.disabled,l=a.collapsible,c=(0,r.Z)((0,r.Z)({},(0,E.Z)(e.props,["disabled"])),{key:o,collapsible:null!=l?l:i?"disabled":void 0});return(0,O.Tm)(e,c)}return e})))};I.Panel=function(e){var t=v.useContext(P.E_).getPrefixCls,n=e.prefixCls,a=e.className,i=e.showArrow,c=t("collapse",n),s=l()((0,o.Z)({},"".concat(c,"-no-arrow"),!(void 0===i||i)),void 0===a?"":a);return v.createElement(w.Panel,(0,r.Z)({},e,{prefixCls:c,className:s}))};var S=I},65360:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var r=n(87462),o=n(97685),a=n(21640),i=n(94184),l=n.n(i),c=n(21770),s=n(15105),d=n(67294),u=n(53124),p=n(55241),f=n(96159),m=n(71577),v=n(6134),y=n(86743),h=n(23715),C=n(6213),x=n(81643),g=function(e){var t=e.prefixCls,n=e.okButtonProps,o=e.cancelButtonProps,a=e.title,i=e.cancelText,l=e.okText,c=e.okType,s=e.icon,p=e.showCancel,f=void 0===p||p,g=e.close,Z=e.onConfirm,b=e.onCancel,N=d.useContext(u.E_).getPrefixCls;return d.createElement(h.Z,{componentName:"Popconfirm",defaultLocale:C.Z.Popconfirm},function(e){return d.createElement("div",{className:"".concat(t,"-inner-content")},d.createElement("div",{className:"".concat(t,"-message")},s&&d.createElement("span",{className:"".concat(t,"-message-icon")},s),d.createElement("div",{className:"".concat(t,"-message-title")},(0,x.Z)(a))),d.createElement("div",{className:"".concat(t,"-buttons")},f&&d.createElement(m.Z,(0,r.Z)({onClick:b,size:"small"},o),null!=i?i:e.cancelText),d.createElement(y.Z,{buttonProps:(0,r.Z)((0,r.Z)({size:"small"},(0,v.n)(c)),n),actionFn:Z,close:g,prefixCls:N("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!=l?l:e.okText)))})},Z=void 0,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},N=d.forwardRef(function(e,t){var n=d.useContext(u.E_).getPrefixCls,i=(0,c.Z)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),m=(0,o.Z)(i,2),v=m[0],y=m[1],h=function(t,n){var r,o;y(t,!0),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t,n),null===(o=e.onOpenChange)||void 0===o||o.call(e,t,n)},C=function(e){e.keyCode===s.Z.ESC&&v&&h(!1,e)},x=e.prefixCls,N=e.placement,k=e.trigger,w=e.okType,E=e.icon,P=void 0===E?d.createElement(a.Z,null):E,j=e.children,O=e.overlayClassName,I=b(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),S=n("popover",x),T=n("popconfirm",x),K=l()(T,O);return d.createElement(p.Z,(0,r.Z)({},I,{trigger:void 0===k?"click":k,prefixCls:S,placement:void 0===N?"top":N,onOpenChange:function(t){var n=e.disabled;void 0!==n&&n||h(t)},open:v,ref:t,overlayClassName:K,_overlay:d.createElement(g,(0,r.Z)({okType:void 0===w?"primary":w,icon:P},e,{prefixCls:S,close:function(e){h(!1,e)},onConfirm:function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(Z,t)},onCancel:function(t){var n;h(!1,t),null===(n=e.onCancel)||void 0===n||n.call(Z,t)}}))}),(0,f.Tm)(j,{onKeyDown:function(e){var t,n;d.isValidElement(j)&&(null===(n=null==j?void 0:(t=j.props).onKeyDown)||void 0===n||n.call(t,e)),C(e)}}))})},55241:function(e,t,n){"use strict";var r=n(87462),o=n(67294),a=n(53124),i=n(94199),l=n(81643),c=n(33603),s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},d=function(e){var t=e.title,n=e.content,r=e.prefixCls;return t||n?o.createElement(o.Fragment,null,t&&o.createElement("div",{className:"".concat(r,"-title")},(0,l.Z)(t)),o.createElement("div",{className:"".concat(r,"-inner-content")},(0,l.Z)(n))):null},u=o.forwardRef(function(e,t){var n=e.prefixCls,l=e.title,u=e.content,p=e._overlay,f=e.placement,m=e.trigger,v=e.mouseEnterDelay,y=e.mouseLeaveDelay,h=e.overlayStyle,C=s(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),x=o.useContext(a.E_).getPrefixCls,g=x("popover",n),Z=x();return o.createElement(i.Z,(0,r.Z)({placement:void 0===f?"top":f,trigger:void 0===m?"hover":m,mouseEnterDelay:void 0===v?.1:v,mouseLeaveDelay:void 0===y?.1:y,overlayStyle:void 0===h?{}:h},C,{prefixCls:g,ref:t,overlay:p||o.createElement(d,{prefixCls:g,title:l,content:u}),transitionName:(0,c.mL)(Z,"zoom-big",C.transitionName)}))});t.Z=u},29284:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config/server/ServerConfig",function(){return n(87807)}])},87807:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(85893),o=n(67294),a=n(54907),i=n(94199),l=n(71577),c=n(84485),s=n(87740),d=n(57132),u=n(40117),p=n(10135),f=n(99519),m=n(82661),v=n(90745),y=n(65360),h=n(64777),C=n(41983),x=n(39664);let g=()=>{let{setMessage:e}=(0,o.useContext)(m.k),[t,n]=(0,o.useState)(null),a=()=>{n(null),clearTimeout(null)},i=async()=>{n((0,C.kg)(C.Jk));try{await (0,h.rQ)(h.UJ),e(""),n((0,C.kg)(C.zv)),setTimeout(a,v.sI)}catch(t){n((0,C.kg)(C.Un,"There was an error: ".concat(t))),setTimeout(a,v.sI)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z.Title,{level:3,className:"section-title",children:"Reset Directory"}),(0,r.jsx)("p",{className:"description",children:'If you are experiencing issues with your listing on the Owncast Directory and were asked to "reset" your connection to the service, you can do that here. The next time you go live it will try and re-register your server with the directory from scratch.'}),(0,r.jsx)(y.Z,{placement:"topLeft",title:"Are you sure you want to reset your connection to the Owncast directory?",onConfirm:i,okText:"Yes",cancelText:"No",children:(0,r.jsx)(l.Z,{type:"primary",children:"Reset Directory Connection"})}),(0,r.jsx)("p",{children:(0,r.jsx)(x.E,{status:t})})]})},{Panel:Z}=a.Z,b=()=>{let[e,t]=(0,o.useState)(null),n=(0,o.useContext)(f.aC),{setMessage:y}=(0,o.useContext)(m.k),{serverConfig:h}=n||{},{adminPassword:C,ffmpegPath:x,rtmpServerPort:b,webServerPort:N,yp:k,socketHostOverride:w}=h,[E,P]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{t({adminPassword:C,ffmpegPath:x,rtmpServerPort:b,webServerPort:N,socketHostOverride:w})},[h]),!e)return null;let j=n=>{let{fieldName:r,value:o}=n;t({...e,[r]:o})},O=()=>{y("Updating server settings requires a restart of your Owncast server.")},I=()=>{y("Changing your stream key will log you out of the admin and block you from streaming until you change the key in your broadcasting software.")},S=()=>{n.online&&y("The updated ffmpeg path will be used when starting your next live stream.")};return(0,r.jsxs)("div",{className:"edit-server-details-container",children:[(0,r.jsx)("div",{className:"field-container field-streamkey-container",children:(0,r.jsxs)("div",{className:"left-side",children:[(0,r.jsx)(p.$7,{fieldName:"adminPassword",...v.tQ,value:e.adminPassword,initialValue:C,type:u.A8,onChange:j,onSubmit:I}),(0,r.jsxs)("div",{className:"streamkey-actions",children:[(0,r.jsx)(i.Z,{title:"Generate a stream key",children:(0,r.jsx)(l.Z,{icon:(0,r.jsx)(s.Z,{}),size:"small",onClick:function(){let e="";for(let t=0;t<3;t+=1)e+=Math.random().toString(36).substring(2);j({fieldName:"streamKey",value:e})}})}),(0,r.jsx)(i.Z,{className:"copy-tooltip",title:E?"Copied!":"Copy to clipboard",children:(0,r.jsx)(l.Z,{icon:(0,r.jsx)(d.Z,{}),size:"small",onClick:function(){navigator.clipboard.writeText(e.streamKey).then(()=>{P(!0),setTimeout(()=>P(!1),3e3)})}})})]})]})}),(0,r.jsx)(p.$7,{fieldName:"ffmpegPath",...v.KB,value:e.ffmpegPath,initialValue:x,onChange:j,onSubmit:S}),(0,r.jsx)(p.$7,{fieldName:"webServerPort",...v.rE,value:e.webServerPort,initialValue:N,type:u.mG,onChange:j,onSubmit:O}),(0,r.jsx)(p.$7,{fieldName:"rtmpServerPort",...v.lT,value:e.rtmpServerPort,initialValue:b,type:u.mG,onChange:j,onSubmit:O}),(0,r.jsx)(a.Z,{className:"advanced-settings",children:(0,r.jsxs)(Z,{header:"Advanced Settings",children:[(0,r.jsx)(c.Z.Paragraph,{children:"If you have a CDN in front of your entire Owncast instance, specify your origin server here for the websocket to connect to. Most people will never need to set this."}),(0,r.jsx)(p.$7,{fieldName:"socketHostOverride",...v.ME,value:e.socketHostOverride,initialValue:w||"",type:u.xA,onChange:j}),k.enabled&&(0,r.jsx)(g,{})]},"1")})]})};function N(){return(0,r.jsxs)("div",{className:"config-server-details-form",children:[(0,r.jsx)("p",{className:"description",children:"You should change your admin password from the default and keep it safe. For most people it's likely the other settings will not need to be changed."}),(0,r.jsx)("div",{className:"form-module config-server-details-container",children:(0,r.jsx)(b,{})})]})}}},function(e){e.O(0,[4485,9774,2888,179],function(){return e(e.s=29284)}),_N_E=e.O()}]);
//# sourceMappingURL=ServerConfig-ad000f7223e1e905.js.map