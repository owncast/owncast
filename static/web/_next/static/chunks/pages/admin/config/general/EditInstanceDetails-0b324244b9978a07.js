(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3353],{63606:function(e,n,a){"use strict";a.d(n,{Z:function(){return c}});var t=a(1413),i=a(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},s=a(42135),r=function(e,n){return i.createElement(s.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:n,icon:l}))};r.displayName="CheckOutlined";var c=i.forwardRef(r)},88484:function(e,n,a){"use strict";a.d(n,{Z:function(){return c}});var t=a(1413),i=a(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},s=a(42135),r=function(e,n){return i.createElement(s.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:n,icon:l}))};r.displayName="UploadOutlined";var c=i.forwardRef(r)},57838:function(e,n,a){"use strict";a.d(n,{Z:function(){return l}});var t=a(97685),i=a(67294);function l(){var e=i.useReducer(function(e){return e+1},0);return(0,t.Z)(e,2)[1]}},94594:function(e,n,a){"use strict";a.d(n,{Z:function(){return N}});var t=a(87462),i=a(4942),l=a(50888),s=a(94184),r=a.n(s),c=a(97685),o=a(45987),u=a(67294),d=a(21770),f=a(15105),h=u.forwardRef(function(e,n){var a,t=e.prefixCls,l=void 0===t?"rc-switch":t,s=e.className,h=e.checked,m=e.defaultChecked,p=e.disabled,g=e.loadingIcon,v=e.checkedChildren,x=e.unCheckedChildren,b=e.onClick,N=e.onChange,j=e.onKeyDown,w=(0,o.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=(0,d.Z)(!1,{value:h,defaultValue:m}),k=(0,c.Z)(C,2),y=k[0],Z=k[1];function E(e,n){var a=y;return p||(Z(a=e),null==N||N(a,n)),a}var S=r()(l,s,(a={},(0,i.Z)(a,"".concat(l,"-checked"),y),(0,i.Z)(a,"".concat(l,"-disabled"),p),a));return u.createElement("button",Object.assign({},w,{type:"button",role:"switch","aria-checked":y,disabled:p,className:S,ref:n,onKeyDown:function(e){e.which===f.Z.LEFT?E(!1,e):e.which===f.Z.RIGHT&&E(!0,e),null==j||j(e)},onClick:function(e){var n=E(!y,e);null==b||b(n,e)}}),g,u.createElement("span",{className:"".concat(l,"-inner")},y?v:x))});h.displayName="Switch";var m=a(53124),p=a(98866),g=a(97647),v=a(68349),x=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>n.indexOf(t)&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)0>n.indexOf(t[i])&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(a[t[i]]=e[t[i]]);return a},b=u.forwardRef(function(e,n){var a,s=e.prefixCls,c=e.size,o=e.disabled,d=e.loading,f=e.className,b=x(e,["prefixCls","size","disabled","loading","className"]),N=u.useContext(m.E_),j=N.getPrefixCls,w=N.direction,C=u.useContext(g.Z),k=u.useContext(p.Z),y=j("switch",s),Z=u.createElement("div",{className:"".concat(y,"-handle")},d&&u.createElement(l.Z,{className:"".concat(y,"-loading-icon")})),E=r()((a={},(0,i.Z)(a,"".concat(y,"-small"),"small"===(c||C)),(0,i.Z)(a,"".concat(y,"-loading"),d),(0,i.Z)(a,"".concat(y,"-rtl"),"rtl"===w),a),void 0===f?"":f);return u.createElement(v.Z,{insertExtraNode:!0},u.createElement(h,(0,t.Z)({},b,{prefixCls:y,className:E,disabled:(null!=o?o:k)||d,ref:n,loadingIcon:Z})))});b.__ANT_SWITCH=!0;var N=b},84202:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config/general/EditInstanceDetails",function(){return a(67650)}])},73706:function(e,n,a){"use strict";a.d(n,{Z:function(){return u}});var t=a(85893),i=a(67294),l=a(94594),s=a(41983),r=a(39664),c=a(90745),o=a(99519);let u=e=>{let{apiPath:n,checked:a,reversed:u=!1,configPath:d="",disabled:f=!1,fieldName:h,label:m,tip:p,useSubmit:g,onChange:v}=e,[x,b]=(0,i.useState)(null),N=null,j=(0,i.useContext)(o.aC),{setFieldInConfigState:w}=j||{},C=()=>{b(null),clearTimeout(N),N=null},k=async e=>{if(g){b((0,s.kg)(s.Jk));let a=u?!e:e;await (0,c.Si)({apiPath:n,data:{value:a},onSuccess(){w({fieldName:h,value:a,path:d}),b((0,s.kg)(s.zv))},onError(e){b((0,s.kg)(s.Un,"There was an error: ".concat(e)))}}),N=setTimeout(C,c.sI)}v&&v(e)},y=null!==x&&x.type===s.Jk;return(0,t.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[m&&(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:m})}),(0,t.jsxs)("div",{className:"input-side",children:[(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)(l.Z,{className:"switch field-".concat(h),loading:y,onChange:k,defaultChecked:a,checked:a,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:f}),(0,t.jsx)(r.E,{status:x})]}),(0,t.jsx)("p",{className:"field-tip",children:p})]})]})};u.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},67650:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return N}});var t=a(85893),i=a(67294),l=a(84485),s=a(10135),r=a(99519),c=a(90745),o=a(73706),u=a(77916),d=a(71577),f=a(50888),h=a(88484),m=a(39664),p=a(41983),g=a(64777),v=a(60956);let x=()=>{var e;let[n,a]=(0,i.useState)(null),[l,s]=(0,i.useState)(!1),[o,x]=(0,i.useState)(0),b=(0,i.useContext)(r.aC),{setFieldInConfigState:N,serverConfig:j}=b||{},w=null==j?void 0:null===(e=j.instanceDetails)||void 0===e?void 0:e.logo,[C,k]=(0,i.useState)(null),y=null,{apiPath:Z,tip:E}=c.ZQ,S=()=>{k(null),clearTimeout(y),y=null},T=e=>(s(!0),new Promise((n,t)=>{if(e.size>v.Z7){let i="File size is too big: ".concat((0,v.kR)(e.size));return k((0,p.kg)(p.Un,"There was an error: ".concat(i))),y=setTimeout(S,c.sI),s(!1),t()}if(!v.dr.includes(e.type)){let l="File type is not supported: ".concat(e.type);return k((0,p.kg)(p.Un,"There was an error: ".concat(l))),y=setTimeout(S,c.sI),s(!1),t()}(0,v.y3)(e,e=>{a(e),setTimeout(()=>n(),100)})})),_=async()=>{n!==w&&(k((0,p.kg)(p.Jk)),await (0,c.Si)({apiPath:Z,data:{value:n},onSuccess(){N({fieldName:"logo",value:n,path:""}),k((0,p.kg)(p.zv)),s(!1),x(Math.floor(100*Math.random()))},onError(e){k((0,p.kg)(p.Un,"There was an error: ".concat(e))),s(!1)}}),y=setTimeout(S,c.sI))},O="".concat(g.WB,"logo?random=").concat(o);return(0,t.jsxs)("div",{className:"formfield-container logo-upload-container",children:[(0,t.jsx)("div",{className:"label-side",children:(0,t.jsx)("span",{className:"formfield-label",children:"Logo"})}),(0,t.jsxs)("div",{className:"input-side",children:[(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("img",{src:O,alt:"avatar",className:"logo-preview"}),(0,t.jsx)(u.Z,{name:"logo",listType:"picture",className:"avatar-uploader",showUploadList:!1,accept:v.dr.join(","),beforeUpload:T,customRequest:_,disabled:l,children:l?(0,t.jsx)(f.Z,{style:{color:"white"}}):(0,t.jsx)(d.Z,{icon:(0,t.jsx)(h.Z,{})})})]}),(0,t.jsx)(m.E,{status:C}),(0,t.jsx)("p",{className:"field-tip",children:E})]})]})},{Title:b}=l.Z;function N(){let[e,n]=(0,i.useState)(null),a=(0,i.useContext)(r.aC),{serverConfig:l}=a||{},{instanceDetails:u,yp:d}=l,{instanceUrl:f}=d;if((0,i.useEffect)(()=>{n({...u,...d})},[u,d]),!e)return null;let h=()=>{""===e.instanceUrl&&!0===d.enabled&&(0,c.Si)({apiPath:c.AP,data:{value:!1}})},m=a=>{let{fieldName:t,value:i}=a;n({...e,[t]:i})},p=""!==f;return(0,t.jsxs)("div",{className:"edit-general-settings",children:[(0,t.jsx)(b,{level:3,className:"section-title",children:"Configure Instance Details"}),(0,t.jsx)("br",{}),(0,t.jsx)(s.$7,{fieldName:"name",...c.RE,value:e.name,initialValue:u.name,onChange:m}),(0,t.jsx)(s.$7,{fieldName:"instanceUrl",...c.cj,value:e.instanceUrl,initialValue:d.instanceUrl,type:s.xA,onChange:m,onSubmit:h}),(0,t.jsx)(s.$7,{fieldName:"summary",...c.rs,type:s.Sk,value:e.summary,initialValue:u.summary,onChange:m}),(0,t.jsx)(s.$7,{fieldName:"offlineMessage",...c.rd,type:s.Sk,value:e.offlineMessage,initialValue:u.offlineMessage,onChange:m}),(0,t.jsx)(x,{}),(0,t.jsx)(o.Z,{fieldName:"hideViewerCount",useSubmit:!0,...c._X,checked:e.hideViewerCount,onChange:function(e){m({fieldName:"hideViewerCount",value:e})}}),(0,t.jsx)("br",{}),(0,t.jsxs)("p",{className:"description",children:["Increase your audience by appearing in the"," ",(0,t.jsx)("a",{href:"https://directory.owncast.online",target:"_blank",rel:"noreferrer",children:(0,t.jsx)("strong",{children:"Owncast Directory"})}),". This is an external service run by the Owncast project."," ",(0,t.jsx)("a",{href:"https://owncast.online/docs/directory/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Learn more"}),"."]}),!d.instanceUrl&&(0,t.jsxs)("p",{className:"description",children:["You must set your ",(0,t.jsx)("strong",{children:"Server URL"})," above to enable the directory."]}),(0,t.jsxs)("div",{className:"config-yp-container",children:[(0,t.jsx)(o.Z,{fieldName:"enabled",useSubmit:!0,...c.P,checked:e.enabled,disabled:!p}),(0,t.jsx)(o.Z,{fieldName:"nsfw",useSubmit:!0,...c.EY,checked:e.nsfw,disabled:!p})]})]})}},60956:function(e,n,a){"use strict";a.d(n,{Z7:function(){return t},dr:function(){return i},kR:function(){return s},y3:function(){return l}});let t=2097152,i=["image/png","image/jpeg","image/gif"];function l(e,n){let a=new FileReader;a.addEventListener("load",()=>n(a.result)),a.readAsDataURL(e)}function s(e){let n=Math.floor(Math.log(e)/Math.log(1024)),a=1*Number((e/Math.pow(1024,n)).toFixed(2));return"".concat(a," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n])}}},function(e){e.O(0,[4485,7910,7916,9774,2888,179],function(){return e(e.s=84202)}),_N_E=e.O()}]);