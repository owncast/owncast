(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{48689:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),o=n(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=n(42135),c=function(e,t){return o.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};c.displayName="DeleteOutlined";var l=o.forwardRef(c)},27561:function(e,t,n){var r=n(67990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var r=n(13218),o=n(7771),a=n(14841),i=Math.max,c=Math.min;e.exports=function(e,t,n){var l,u,s,d,h,p,f=0,x=!1,v=!1,y=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){var n=l,r=u;return l=u=void 0,f=t,d=e.apply(r,n)}function g(e){var n=e-p,r=e-f;return void 0===p||n>=t||n<0||v&&r>=s}function j(){var e,n,r,a=o();if(g(a))return w(a);h=setTimeout(j,(e=a-p,n=a-f,r=t-e,v?c(r,s-n):r))}function w(e){return(h=void 0,y&&l)?m(e):(l=u=void 0,d)}function k(){var e,n=o(),r=g(n);if(l=arguments,u=this,p=n,r){if(void 0===h)return f=e=p,h=setTimeout(j,t),x?m(e):d;if(v)return clearTimeout(h),h=setTimeout(j,t),m(p)}return void 0===h&&(h=setTimeout(j,t)),d}return t=a(t)||0,r(n)&&(x=!!n.leading,s=(v="maxWait"in n)?i(a(n.maxWait)||0,t):s,y="trailing"in n?!!n.trailing:y),k.cancel=function(){void 0!==h&&clearTimeout(h),f=0,l=p=u=h=void 0},k.flush=function(){return void 0===h?d:w(o())},k}},33448:function(e,t,n){var r=n(44239),o=n(37005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},7771:function(e,t,n){var r=n(55639);e.exports=function(){return r.Date.now()}},14841:function(e,t,n){var r=n(27561),o=n(13218),a=n(33448),i=0/0,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||u.test(e)?s(e.slice(2),n?2:8):c.test(e)?i:+e}},54005:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return n(2075)}])},2075:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(48689),a=n(84485),i=n(85402),c=n(69677),l=n(32808),u=n(26713),s=n(71577),d=n(93626),h=n(67294),p=n(39664),f=n(90745),x=n(41983),v=n(99519),y=n(37174);let{Title:m,Paragraph:g}=a.Z,j=e=>{let{onOk:t,onCancel:n,open:o}=e,[a,u]=(0,h.useState)(""),[s,d]=(0,h.useState)(""),[p,f]=(0,h.useState)(""),[x,v]=(0,h.useState)(""),[m,g]=(0,h.useState)(""),[j,w]=(0,h.useState)(!1),k={disabled:!function(){try{let e=new URL(a);if("https:"!==e.protocol)return!1}catch(t){return!1}return(0,y.Z)(a)&&""!==s}()},b=e=>{w(e.target.checked)};return(0,r.jsx)(i.Z,{title:"Create New Action",open:o,onOk:function(){t(a,s,p,x,m,j),u(""),d(""),f(""),v(""),g(""),w(!1)},onCancel:n,okButtonProps:k,children:(0,r.jsxs)("div",{children:["Add the URL for the external action you want to present."," ",(0,r.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,r.jsx)("p",{children:(0,r.jsx)(c.Z,{value:a,required:!0,placeholder:"https://myserver.com/action (required)",onChange:e=>u(e.currentTarget.value.trim()),type:"url",pattern:y.a})}),(0,r.jsx)("p",{children:(0,r.jsx)(c.Z,{value:s,required:!0,placeholder:"Your action title (required)",onChange:e=>d(e.currentTarget.value)})}),(0,r.jsx)("p",{children:(0,r.jsx)(c.Z,{value:p,placeholder:"Optional description",onChange:e=>f(e.currentTarget.value)})}),(0,r.jsx)("p",{children:(0,r.jsx)(c.Z,{value:x,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:e=>v(e.currentTarget.value)})}),(0,r.jsxs)("p",{children:[(0,r.jsx)(c.Z,{type:"color",value:m,onChange:e=>g(e.currentTarget.value)}),"Optional background color of the action button."]}),(0,r.jsx)(l.Z,{checked:j,defaultChecked:j,onChange:b,children:"Open in a new tab instead of within your page."})]})})},w=()=>{let e=(0,h.useContext)(v.aC),{serverConfig:t,setFieldInConfigState:n}=e||{},{externalActions:a}=t,[i,c]=(0,h.useState)([]),[l,y]=(0,h.useState)(!1),[w,k]=(0,h.useState)(null),b=()=>{k(null),clearTimeout(null)};async function C(e){await (0,f.Si)({apiPath:f.os,data:{value:e},onSuccess(){n({fieldName:"externalActions",value:e,path:""}),k((0,x.kg)(x.zv,"Updated.")),setTimeout(b,f.sI)},onError(e){console.log(e),k((0,x.kg)(x.Un,e)),setTimeout(b,f.sI)}})}async function T(e){let t=[...i],n=i.findIndex(t=>t.url===e.url);t.splice(n,1);try{c(t),C(t)}catch(r){console.error(r)}}async function Z(e,t,n,r,o,a){try{let l=[...i],u=l.concat({url:e,title:t,description:n,icon:r,color:o,openExternally:a});c(u),await C(u)}catch(s){console.error(s)}}(0,h.useEffect)(()=>{c(a||[])},[a]);let E=()=>{y(!0)},I=(e,t,n,r,o,a)=>{y(!1),Z(e,t,n,r,o,a)},S=()=>{y(!1)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(m,{children:"External Actions"}),(0,r.jsx)(g,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,r.jsxs)(g,{children:["Read more about how to use actions, with examples, at"," ",(0,r.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,r.jsx)(d.Z,{rowKey:e=>"".concat(e.title,"-").concat(e.url),columns:[{title:"",key:"delete",render:(e,t)=>(0,r.jsx)(u.Z,{size:"middle",children:(0,r.jsx)(s.Z,{onClick:()=>T(t),icon:(0,r.jsx)(o.Z,{})})})},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:e=>e?(0,r.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null},{title:"Color",dataIndex:"color",key:"color",render:e=>e?(0,r.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:e=>e?"In a new tab":"In a modal"}],dataSource:i,pagination:!1}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{type:"primary",onClick:E,children:"Create New Action"}),(0,r.jsx)(p.E,{status:w}),(0,r.jsx)(j,{open:l,onOk:I,onCancel:S})]})};t.default=w}},function(e){e.O(0,[8939,3903,4267,3626,9774,2888,179],function(){return e(e.s=54005)}),_N_E=e.O()}]);