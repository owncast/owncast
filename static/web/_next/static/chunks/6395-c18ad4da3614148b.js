"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6395],{23917:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{e:function(){return useMachine}});var InterpreterStatus,interpreter_InterpreterStatus,react=__webpack_require__(67294),with_selector=__webpack_require__(52798),_tslib=__webpack_require__(63056),types=__webpack_require__(59043),es_State=__webpack_require__(54911),actionTypes=__webpack_require__(3884),actions=__webpack_require__(30375),environment=__webpack_require__(14066),utils=__webpack_require__(89823),defaultOptions={deferEvents:!1},Scheduler=function(){function Scheduler(options){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=(0,_tslib.pi)((0,_tslib.pi)({},defaultOptions),options)}return Scheduler.prototype.initialize=function(callback){if(this.initialized=!0,callback){if(!this.options.deferEvents){this.schedule(callback);return}this.process(callback)}this.flushEvents()},Scheduler.prototype.schedule=function(task){if(!this.initialized||this.processingEvent){this.queue.push(task);return}if(0!==this.queue.length)throw Error("Event queue should be empty when it is not processing events");this.process(task),this.flushEvents()},Scheduler.prototype.clear=function(){this.queue=[]},Scheduler.prototype.flushEvents=function(){for(var nextCallback=this.queue.shift();nextCallback;)this.process(nextCallback),nextCallback=this.queue.shift()},Scheduler.prototype.process=function(callback){this.processingEvent=!0;try{callback()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},Scheduler}(),Actor=__webpack_require__(98933),children=new Map,sessionIdIndex=0,registry={bookId:function(){return"x:".concat(sessionIdIndex++)},register:function(id,actor){return children.set(id,actor),id},get:function(id){return children.get(id)},free:function(id){children.delete(id)}};function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:void(environment.M||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues"))}var serviceScope=__webpack_require__(10797),DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1};(InterpreterStatus=interpreter_InterpreterStatus||(interpreter_InterpreterStatus={}))[InterpreterStatus.NotStarted=0]="NotStarted",InterpreterStatus[InterpreterStatus.Running=1]="Running",InterpreterStatus[InterpreterStatus.Stopped=2]="Stopped";var Interpreter=function(){function Interpreter(machine,options){void 0===options&&(options=Interpreter.defaultOptions);var _this=this;this.machine=machine,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=interpreter_InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(event1,payload){if((0,utils.kJ)(event1))return _this.batch(event1),_this.state;var _event=(0,utils.g5)((0,utils._v)(event1,payload));if(_this.status===interpreter_InterpreterStatus.Stopped)return environment.M||(0,utils.ZK)(!1,'Event "'.concat(_event.name,'" was sent to stopped service "').concat(_this.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(JSON.stringify(_event.data))),_this.state;if(_this.status!==interpreter_InterpreterStatus.Running&&!_this.options.deferEvents)throw Error('Event "'.concat(_event.name,'" was sent to uninitialized service "').concat(_this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(_event.data)));return _this.scheduler.schedule(function(){_this.forward(_event);var nextState=_this._nextState(_event);_this.update(nextState,_event)}),_this._state},this.sendTo=function(event1,to,immediate){var isParent=_this.parent&&(to===types.K.Parent||_this.parent.id===to),target=isParent?_this.parent:(0,utils.HD)(to)?_this.children.get(to)||registry.get(to):(0,utils.Bc)(to)?to:void 0;if(!target){if(!isParent)throw Error("Unable to send event to child '".concat(to,"' from service '").concat(_this.id,"'."));environment.M||(0,utils.ZK)(!1,"Service '".concat(_this.id,"' has no parent: unable to send event ").concat(event1.type));return}if("machine"in target){if(_this.status!==interpreter_InterpreterStatus.Stopped||_this.parent!==target||_this.state.done){var scxmlEvent=(0,_tslib.pi)((0,_tslib.pi)({},event1),{name:event1.name===actionTypes.vU?"".concat((0,actions.vU)(_this.id)):event1.name,origin:_this.sessionId});!immediate&&_this.machine.config.predictableActionArguments?_this._outgoingQueue.push([target,scxmlEvent]):target.send(scxmlEvent)}}else!immediate&&_this.machine.config.predictableActionArguments?_this._outgoingQueue.push([target,event1.data]):target.send(event1.data)},this._exec=function(action,context,_event,actionFunctionMap){void 0===actionFunctionMap&&(actionFunctionMap=_this.machine.options.actions);var actionOrExec=action.exec||(0,actions.o$)(action.type,actionFunctionMap),exec=(0,utils.mf)(actionOrExec)?actionOrExec:actionOrExec?actionOrExec.exec:action.exec;if(exec)try{return exec(context,_event.data,_this.machine.config.predictableActionArguments?{action:action,_event:_event}:{action:action,state:_this.state,_event:_event})}catch(err){throw _this.parent&&_this.parent.send({type:"xstate.error",data:err}),err}switch(action.type){case actionTypes.lW:if("number"==typeof action.delay){_this.defer(action);return}action.to?_this.sendTo(action._event,action.to,_event===actions.bf):_this.send(action._event);break;case actionTypes.al:_this.cancel(action.sendId);break;case actionTypes.BL:if(_this.status!==interpreter_InterpreterStatus.Running)return;var activity=action.activity;if(!_this.machine.config.predictableActionArguments&&!_this.state.activities[activity.id||activity.type])break;if(activity.type===types.M.Invoke){var invokeSource=(0,utils.j)(activity.src),serviceCreator=_this.machine.options.services?_this.machine.options.services[invokeSource.type]:void 0,id=activity.id,data=activity.data;environment.M||(0,utils.ZK)(!("forward"in activity),"`forward` property is deprecated (found in invocation of '".concat(activity.src,"' in in machine '").concat(_this.machine.id,"'). ")+"Please use `autoForward` instead.");var autoForward="autoForward"in activity?activity.autoForward:!!activity.forward;if(!serviceCreator){environment.M||(0,utils.ZK)(!1,"No service found for invocation '".concat(activity.src,"' in machine '").concat(_this.machine.id,"'."));return}var resolvedData=data?(0,utils.QX)(data,context,_event):void 0;if("string"==typeof serviceCreator)return;var source=(0,utils.mf)(serviceCreator)?serviceCreator(context,_event.data,{data:resolvedData,src:invokeSource,meta:activity.meta}):serviceCreator;if(!source)return;var options=void 0;(0,utils.O4)(source)&&(source=resolvedData?source.withContext(resolvedData):source,options={autoForward:autoForward}),_this.spawn(source,id,options)}else _this.spawnActivity(activity);break;case actionTypes.sT:_this.stopChild(action.activity.id);break;case actionTypes.cM:var label=action.label,value=action.value;label?_this.logger(label,value):_this.logger(value);break;default:environment.M||(0,utils.ZK)(!1,"No implementation found for action type '".concat(action.type,"'"))}};var resolvedOptions=(0,_tslib.pi)((0,_tslib.pi)({},Interpreter.defaultOptions),options),clock=resolvedOptions.clock,logger=resolvedOptions.logger,parent=resolvedOptions.parent,id=resolvedOptions.id,resolvedId=void 0!==id?id:machine.id;this.id=resolvedId,this.logger=logger,this.clock=clock,this.parent=parent,this.options=resolvedOptions,this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry.bookId()}return Object.defineProperty(Interpreter.prototype,"initialState",{get:function(){var _this=this;return this._initialState?this._initialState:(0,serviceScope.J)(this,function(){return _this._initialState=_this.machine.initialState,_this._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(Interpreter.prototype,"state",{get:function(){return environment.M||(0,utils.ZK)(this.status!==interpreter_InterpreterStatus.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),Interpreter.prototype.execute=function(state,actionsConfig){var e_1,_a;try{for(var _b=(0,_tslib.XA)(state.actions),_c=_b.next();!_c.done;_c=_b.next()){var action=_c.value;this.exec(action,state,actionsConfig)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},Interpreter.prototype.update=function(state,_event){var e_2,_a,e_3,_b,e_4,_c,e_5,_d,_this=this;if(state._sessionid=this.sessionId,this._state=state,(!this.machine.config.predictableActionArguments||_event===actions.bf)&&this.options.execute)this.execute(this.state);else for(var item=void 0;item=this._outgoingQueue.shift();)item[0].send(item[1]);if(this.children.forEach(function(child){_this.state.children[child.id]=child}),this.devTools&&this.devTools.send(_event.data,state),state.event)try{for(var _e=(0,_tslib.XA)(this.eventListeners),_f=_e.next();!_f.done;_f=_e.next()){var listener=_f.value;listener(state.event)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_f&&!_f.done&&(_a=_e.return)&&_a.call(_e)}finally{if(e_2)throw e_2.error}}try{for(var _g=(0,_tslib.XA)(this.listeners),_h=_g.next();!_h.done;_h=_g.next()){var listener=_h.value;listener(state,state.event)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_h&&!_h.done&&(_b=_g.return)&&_b.call(_g)}finally{if(e_3)throw e_3.error}}try{for(var _j=(0,_tslib.XA)(this.contextListeners),_k=_j.next();!_k.done;_k=_j.next())(0,_k.value)(this.state.context,this.state.history?this.state.history.context:void 0)}catch(e_4_1){e_4={error:e_4_1}}finally{try{_k&&!_k.done&&(_c=_j.return)&&_c.call(_j)}finally{if(e_4)throw e_4.error}}if(this.state.done){var finalChildStateNode=state.configuration.find(function(sn){return"final"===sn.type&&sn.parent===_this.machine}),doneData=finalChildStateNode&&finalChildStateNode.doneData?(0,utils.QX)(finalChildStateNode.doneData,state.context,_event):void 0;try{for(var _l=(0,_tslib.XA)(this.doneListeners),_m=_l.next();!_m.done;_m=_l.next()){var listener=_m.value;listener((0,actions.Sl)(this.id,doneData))}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_m&&!_m.done&&(_d=_l.return)&&_d.call(_l)}finally{if(e_5)throw e_5.error}}this._stop(),this._stopChildren()}},Interpreter.prototype.onTransition=function(listener){return this.listeners.add(listener),this.status===interpreter_InterpreterStatus.Running&&listener(this.state,this.state.event),this},Interpreter.prototype.subscribe=function(nextListenerOrObserver,_,completeListener){var _this=this,observer=(0,utils.zM)(nextListenerOrObserver,_,completeListener);this.listeners.add(observer.next),this.status!==interpreter_InterpreterStatus.NotStarted&&observer.next(this.state);var completeOnce=function(){_this.doneListeners.delete(completeOnce),_this.stopListeners.delete(completeOnce),observer.complete()};return this.status===interpreter_InterpreterStatus.Stopped?observer.complete():(this.onDone(completeOnce),this.onStop(completeOnce)),{unsubscribe:function(){_this.listeners.delete(observer.next),_this.doneListeners.delete(completeOnce),_this.stopListeners.delete(completeOnce)}}},Interpreter.prototype.onEvent=function(listener){return this.eventListeners.add(listener),this},Interpreter.prototype.onSend=function(listener){return this.sendListeners.add(listener),this},Interpreter.prototype.onChange=function(listener){return this.contextListeners.add(listener),this},Interpreter.prototype.onStop=function(listener){return this.stopListeners.add(listener),this},Interpreter.prototype.onDone=function(listener){return this.doneListeners.add(listener),this},Interpreter.prototype.off=function(listener){return this.listeners.delete(listener),this.eventListeners.delete(listener),this.sendListeners.delete(listener),this.stopListeners.delete(listener),this.doneListeners.delete(listener),this.contextListeners.delete(listener),this},Interpreter.prototype.start=function(initialState){var _this=this;if(this.status===interpreter_InterpreterStatus.Running)return this;this.machine._init(),registry.register(this.sessionId,this),this.initialized=!0,this.status=interpreter_InterpreterStatus.Running;var resolvedState=void 0===initialState?this.initialState:(0,serviceScope.J)(this,function(){return(0,es_State.TL)(initialState)?_this.machine.resolveState(initialState):_this.machine.resolveState(es_State.ZM.from(initialState,_this.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){_this.update(resolvedState,actions.bf)}),this},Interpreter.prototype._stopChildren=function(){this.children.forEach(function(child){(0,utils.mf)(child.stop)&&child.stop()}),this.children.clear()},Interpreter.prototype._stop=function(){var e_6,_a,e_7,_b,e_8,_c,e_9,_d,e_10,_e;try{for(var _f=(0,_tslib.XA)(this.listeners),_g=_f.next();!_g.done;_g=_f.next()){var listener=_g.value;this.listeners.delete(listener)}}catch(e_6_1){e_6={error:e_6_1}}finally{try{_g&&!_g.done&&(_a=_f.return)&&_a.call(_f)}finally{if(e_6)throw e_6.error}}try{for(var _h=(0,_tslib.XA)(this.stopListeners),_j=_h.next();!_j.done;_j=_h.next()){var listener=_j.value;listener(),this.stopListeners.delete(listener)}}catch(e_7_1){e_7={error:e_7_1}}finally{try{_j&&!_j.done&&(_b=_h.return)&&_b.call(_h)}finally{if(e_7)throw e_7.error}}try{for(var _k=(0,_tslib.XA)(this.contextListeners),_l=_k.next();!_l.done;_l=_k.next()){var listener=_l.value;this.contextListeners.delete(listener)}}catch(e_8_1){e_8={error:e_8_1}}finally{try{_l&&!_l.done&&(_c=_k.return)&&_c.call(_k)}finally{if(e_8)throw e_8.error}}try{for(var _m=(0,_tslib.XA)(this.doneListeners),_o=_m.next();!_o.done;_o=_m.next()){var listener=_o.value;this.doneListeners.delete(listener)}}catch(e_9_1){e_9={error:e_9_1}}finally{try{_o&&!_o.done&&(_d=_m.return)&&_d.call(_m)}finally{if(e_9)throw e_9.error}}if(!this.initialized)return this;this.initialized=!1,this.status=interpreter_InterpreterStatus.Stopped,this._initialState=void 0;try{for(var _p=(0,_tslib.XA)(Object.keys(this.delayedEventsMap)),_q=_p.next();!_q.done;_q=_p.next()){var key=_q.value;this.clock.clearTimeout(this.delayedEventsMap[key])}}catch(e_10_1){e_10={error:e_10_1}}finally{try{_q&&!_q.done&&(_e=_p.return)&&_e.call(_p)}finally{if(e_10)throw e_10.error}}this.scheduler.clear(),this.scheduler=new Scheduler({deferEvents:this.options.deferEvents})},Interpreter.prototype.stop=function(){var _this=this,scheduler=this.scheduler;return this._stop(),scheduler.schedule(function(){var _event=(0,utils.g5)({type:"xstate.stop"}),nextState=(0,serviceScope.J)(_this,function(){var exitActions=(0,utils.xH)((0,_tslib.ev)([],(0,_tslib.CR)(_this.state.configuration),!1).sort(function(a,b){return b.order-a.order}).map(function(stateNode){return(0,actions.AE)(stateNode.onExit,_this.machine.options.actions)})),_a=(0,_tslib.CR)((0,actions.yC)(_this.machine,_this.state,_this.state.context,_event,[exitActions],_this.machine.config.predictableActionArguments?_this._exec:void 0,_this.machine.config.predictableActionArguments||_this.machine.config.preserveActionOrder),2),resolvedActions=_a[0],updatedContext=_a[1],newState=new es_State.ZM({value:_this.state.value,context:updatedContext,_event:_event,_sessionid:_this.sessionId,historyValue:void 0,history:_this.state,actions:resolvedActions.filter(function(action){return action.type!==actionTypes.OU&&(action.type!==actionTypes.lW||!!action.to&&action.to!==types.K.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:_this.state.done,tags:_this.state.tags,machine:_this.machine});return newState.changed=!0,newState});_this.update(nextState,_event),_this._stopChildren(),registry.free(_this.sessionId)}),this},Interpreter.prototype.batch=function(events){var _this=this;if(this.status===interpreter_InterpreterStatus.NotStarted&&this.options.deferEvents)environment.M||(0,utils.ZK)(!1,"".concat(events.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(JSON.stringify(event)));else if(this.status!==interpreter_InterpreterStatus.Running)throw Error("".concat(events.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(events.length){var exec=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var e_11,_a,nextState=_this.state,batchChanged=!1,batchedActions=[];try{for(var events_1=(0,_tslib.XA)(events),events_1_1=events_1.next();!events_1_1.done;events_1_1=events_1.next()){var event_1=events_1_1.value;!function(event_1){var _event=(0,utils.g5)(event_1);_this.forward(_event),nextState=(0,serviceScope.J)(_this,function(){return _this.machine.transition(nextState,_event,void 0,exec||void 0)}),batchedActions.push.apply(batchedActions,(0,_tslib.ev)([],(0,_tslib.CR)(_this.machine.config.predictableActionArguments?nextState.actions:nextState.actions.map(function(a){return(0,es_State.j1)(a,nextState)})),!1)),batchChanged=batchChanged||!!nextState.changed}(event_1)}}catch(e_11_1){e_11={error:e_11_1}}finally{try{events_1_1&&!events_1_1.done&&(_a=events_1.return)&&_a.call(events_1)}finally{if(e_11)throw e_11.error}}nextState.changed=batchChanged,nextState.actions=batchedActions,_this.update(nextState,(0,utils.g5)(events[events.length-1]))})}},Interpreter.prototype.sender=function(event1){return this.send.bind(this,event1)},Interpreter.prototype._nextState=function(event1,exec){var _this=this;void 0===exec&&(exec=!!this.machine.config.predictableActionArguments&&this._exec);var _event=(0,utils.g5)(event1);if(0===_event.name.indexOf(actionTypes.Mg)&&!this.state.nextEvents.some(function(nextEvent){return 0===nextEvent.indexOf(actionTypes.Mg)}))throw _event.data.data;return(0,serviceScope.J)(this,function(){return _this.machine.transition(_this.state,_event,void 0,exec||void 0)})},Interpreter.prototype.nextState=function(event1){return this._nextState(event1,!1)},Interpreter.prototype.forward=function(event1){var e_12,_a;try{for(var _b=(0,_tslib.XA)(this.forwardTo),_c=_b.next();!_c.done;_c=_b.next()){var id=_c.value,child=this.children.get(id);if(!child)throw Error("Unable to forward event '".concat(event1,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(id,"'."));child.send(event1)}}catch(e_12_1){e_12={error:e_12_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_12)throw e_12.error}}},Interpreter.prototype.defer=function(sendAction){var _this=this;this.delayedEventsMap[sendAction.id]=this.clock.setTimeout(function(){sendAction.to?_this.sendTo(sendAction._event,sendAction.to,!0):_this.send(sendAction._event)},sendAction.delay)},Interpreter.prototype.cancel=function(sendId){this.clock.clearTimeout(this.delayedEventsMap[sendId]),delete this.delayedEventsMap[sendId]},Interpreter.prototype.exec=function(action,state,actionFunctionMap){void 0===actionFunctionMap&&(actionFunctionMap=this.machine.options.actions),this._exec(action,state.context,state._event,actionFunctionMap)},Interpreter.prototype.removeChild=function(childId){var _a;this.children.delete(childId),this.forwardTo.delete(childId),null===(_a=this.state)||void 0===_a||delete _a.children[childId]},Interpreter.prototype.stopChild=function(childId){var child=this.children.get(childId);child&&(this.removeChild(childId),(0,utils.mf)(child.stop)&&child.stop())},Interpreter.prototype.spawn=function(entity,name,options){if(this.status!==interpreter_InterpreterStatus.Running)return(0,Actor.Xg)(entity,name);if((0,utils.y8)(entity))return this.spawnPromise(Promise.resolve(entity),name);if((0,utils.mf)(entity))return this.spawnCallback(entity,name);if((0,Actor.f3)(entity))return this.spawnActor(entity,name);if((0,utils.bi)(entity))return this.spawnObservable(entity,name);if((0,utils.O4)(entity))return this.spawnMachine(entity,(0,_tslib.pi)((0,_tslib.pi)({},options),{id:name}));if((0,utils.HV)(entity))return this.spawnBehavior(entity,name);throw Error('Unable to spawn entity "'.concat(name,'" of type "').concat(typeof entity,'".'))},Interpreter.prototype.spawnMachine=function(machine,options){var _this=this;void 0===options&&(options={});var childService=new Interpreter(machine,(0,_tslib.pi)((0,_tslib.pi)({},this.options),{parent:this,id:options.id||machine.id})),resolvedOptions=(0,_tslib.pi)((0,_tslib.pi)({},DEFAULT_SPAWN_OPTIONS),options);return resolvedOptions.sync&&childService.onTransition(function(state){_this.send(actionTypes.Vx,{state:state,id:childService.id})}),this.children.set(childService.id,childService),resolvedOptions.autoForward&&this.forwardTo.add(childService.id),childService.onDone(function(doneEvent){_this.removeChild(childService.id),_this.send((0,utils.g5)(doneEvent,{origin:childService.id}))}).start(),childService},Interpreter.prototype.spawnBehavior=function(behavior,id){var options,state,observers,mailbox,flushing,flush,actor,actorCtx,actorRef=(options={id:id,parent:this},state=behavior.initialState,observers=new Set,mailbox=[],flushing=!1,flush=function(){if(!flushing){for(flushing=!0;mailbox.length>0;){var event_1=mailbox.shift();state=behavior.transition(state,event_1,actorCtx),observers.forEach(function(observer){return observer.next(state)})}flushing=!1}},actor=(0,Actor.vk)({id:options.id,send:function(event1){mailbox.push(event1),flush()},getSnapshot:function(){return state},subscribe:function(next,handleError,complete){var observer=(0,utils.zM)(next,handleError,complete);return observers.add(observer),observer.next(state),{unsubscribe:function(){observers.delete(observer)}}}}),actorCtx={parent:options.parent,self:actor,id:options.id||"anonymous",observers:observers},state=behavior.start?behavior.start(actorCtx):state,actor);return this.children.set(id,actorRef),actorRef},Interpreter.prototype.spawnPromise=function(promise,id){var _a,resolvedData,_this=this,canceled=!1;promise.then(function(response){canceled||(resolvedData=response,_this.removeChild(id),_this.send((0,utils.g5)((0,actions.Sl)(id,response),{origin:id})))},function(errorData){if(!canceled){_this.removeChild(id);var errorEvent=(0,actions.vU)(id,errorData);try{_this.send((0,utils.g5)(errorEvent,{origin:id}))}catch(error){(0,utils.v4)(errorData,error,id),_this.devTools&&_this.devTools.send(errorEvent,_this.state),_this.machine.strict&&_this.stop()}}});var actor=((_a={id:id,send:function(){},subscribe:function(next,handleError,complete){var observer=(0,utils.zM)(next,handleError,complete),unsubscribed=!1;return promise.then(function(response){!unsubscribed&&(observer.next(response),unsubscribed||observer.complete())},function(err){unsubscribed||observer.error(err)}),{unsubscribe:function(){return unsubscribed=!0}}},stop:function(){canceled=!0},toJSON:function(){return{id:id}},getSnapshot:function(){return resolvedData}})[utils.L$]=function(){return this},_a);return this.children.set(id,actor),actor},Interpreter.prototype.spawnCallback=function(callback,id){var _a,emitted,callbackStop,_this=this,canceled=!1,receivers=new Set,listeners=new Set;try{callbackStop=callback(function(e){emitted=e,listeners.forEach(function(listener){return listener(e)}),canceled||_this.send((0,utils.g5)(e,{origin:id}))},function(newListener){receivers.add(newListener)})}catch(err){this.send((0,actions.vU)(id,err))}if((0,utils.y8)(callbackStop))return this.spawnPromise(callbackStop,id);var actor=((_a={id:id,send:function(event1){return receivers.forEach(function(receiver){return receiver(event1)})},subscribe:function(next){var observer=(0,utils.zM)(next);return listeners.add(observer.next),{unsubscribe:function(){listeners.delete(observer.next)}}},stop:function(){canceled=!0,(0,utils.mf)(callbackStop)&&callbackStop()},toJSON:function(){return{id:id}},getSnapshot:function(){return emitted}})[utils.L$]=function(){return this},_a);return this.children.set(id,actor),actor},Interpreter.prototype.spawnObservable=function(source,id){var _a,emitted,_this=this,subscription=source.subscribe(function(value){emitted=value,_this.send((0,utils.g5)(value,{origin:id}))},function(err){_this.removeChild(id),_this.send((0,utils.g5)((0,actions.vU)(id,err),{origin:id}))},function(){_this.removeChild(id),_this.send((0,utils.g5)((0,actions.Sl)(id),{origin:id}))}),actor=((_a={id:id,send:function(){},subscribe:function(next,handleError,complete){return source.subscribe(next,handleError,complete)},stop:function(){return subscription.unsubscribe()},getSnapshot:function(){return emitted},toJSON:function(){return{id:id}}})[utils.L$]=function(){return this},_a);return this.children.set(id,actor),actor},Interpreter.prototype.spawnActor=function(actor,name){return this.children.set(name,actor),actor},Interpreter.prototype.spawnActivity=function(activity){var implementation=this.machine.options&&this.machine.options.activities?this.machine.options.activities[activity.type]:void 0;if(!implementation){environment.M||(0,utils.ZK)(!1,"No implementation found for activity '".concat(activity.type,"'"));return}var dispose=implementation(this.state.context,activity);this.spawnEffect(activity.id,dispose)},Interpreter.prototype.spawnEffect=function(id,dispose){var _a;this.children.set(id,((_a={id:id,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:dispose||void 0,getSnapshot:function(){},toJSON:function(){return{id:id}}})[utils.L$]=function(){return this},_a))},Interpreter.prototype.attachDev=function(){var global=getGlobal();if(this.options.devTools&&global){if(global.__REDUX_DEVTOOLS_EXTENSION__){var devToolsOptions="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=global.__REDUX_DEVTOOLS_EXTENSION__.connect((0,_tslib.pi)((0,_tslib.pi)({name:this.id,autoPause:!0,stateSanitizer:function(state){return{value:state.value,context:state.context,actions:state.actions}}},devToolsOptions),{features:(0,_tslib.pi)({jump:!1,skip:!1},devToolsOptions?devToolsOptions.features:void 0)}),this.machine),this.devTools.init(this.state)}!function(service){if(getGlobal()){var devTools=function(){var global=getGlobal();if(global&&"__xstate__"in global)return global.__xstate__}();devTools&&devTools.register(service)}}(this)}},Interpreter.prototype.toJSON=function(){return{id:this.id}},Interpreter.prototype[utils.L$]=function(){return this},Interpreter.prototype.getSnapshot=function(){return this.status===interpreter_InterpreterStatus.NotStarted?this.initialState:this._state},Interpreter.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(fn,ms){return setTimeout(fn,ms)},clearTimeout:function(id){return clearTimeout(id)}},logger:console.log.bind(console),devTools:!1},Interpreter.interpret=interpret,Interpreter}();function interpret(machine,options){return new Interpreter(machine,options)}var index=react.useLayoutEffect;function useConstant(fn){var ref=react.useRef();return ref.current||(ref.current={v:fn()}),ref.current.v}var useInterpret_assign=function(){return(useInterpret_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t},useMachine_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function identity(a){return a}function useMachine(getMachine){for(var machine,context,guards,actions,activities,services,delays,interpreterOptions,service,_a=[],_i=1;_i<arguments.length;_i++)_a[_i-1]=arguments[_i];var _c=useMachine_read(_a,1)[0],options=void 0===_c?{}:_c,service1=(machine=useConstant(function(){return"function"==typeof getMachine?getMachine():getMachine}),context=options.context,guards=options.guards,actions=options.actions,activities=options.activities,services=options.services,delays=options.delays,options.state,interpreterOptions=__rest(options,["context","guards","actions","activities","services","delays","state"]),service=useConstant(function(){return interpret(machine.withConfig({context:context,guards:guards,actions:actions,activities:activities,services:services,delays:delays},function(){return useInterpret_assign(useInterpret_assign({},machine.context),context)}),interpreterOptions)}),index(function(){Object.assign(service.machine.options.actions,actions),Object.assign(service.machine.options.guards,guards),Object.assign(service.machine.options.activities,activities),Object.assign(service.machine.options.services,services),Object.assign(service.machine.options.delays,delays)},[actions,guards,activities,services,delays]),service),getSnapshot=(0,react.useCallback)(function(){return service1.status===interpreter_InterpreterStatus.NotStarted?options.state?es_State.ZM.create(options.state):service1.machine.initialState:service1.state},[service1]),isEqual=(0,react.useCallback)(function(prevState,nextState){if(service1.status===interpreter_InterpreterStatus.NotStarted)return!0;var initialStateChanged=void 0===nextState.changed&&(Object.keys(nextState.children).length>0||"boolean"==typeof prevState.changed);return!(nextState.changed||initialStateChanged)},[service1]),subscribe=(0,react.useCallback)(function(handleStoreChange){return service1.subscribe(handleStoreChange).unsubscribe},[service1]),storeSnapshot=(0,with_selector.useSyncExternalStoreWithSelector)(subscribe,getSnapshot,getSnapshot,identity,isEqual);return(0,react.useEffect)(function(){var rehydratedState=options.state;return service1.start(rehydratedState?es_State.ZM.create(rehydratedState):void 0),function(){service1.stop(),service1.status=interpreter_InterpreterStatus.NotStarted}},[]),[storeSnapshot,service1.send,service1]}},53250:function(__unused_webpack_module,exports,__webpack_require__){/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ var e=__webpack_require__(67294),k="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function r(a){var b=a.getSnapshot;a=a.value;try{var d=b();return!k(a,d)}catch(f){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(a,b){return b()}:function(a,b){var d=b(),f=l({inst:{value:d,getSnapshot:b}}),c=f[0].inst,g=f[1];return n(function(){c.value=d,c.getSnapshot=b,r(c)&&g({inst:c})},[a,d,b]),m(function(){return r(c)&&g({inst:c}),a(function(){r(c)&&g({inst:c})})},[a]),p(d),d};exports.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:u},50139:function(__unused_webpack_module,exports,__webpack_require__){/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ var h=__webpack_require__(67294),n=__webpack_require__(61688),q="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},r=n.useSyncExternalStore,t=h.useRef,u=h.useEffect,v=h.useMemo,w=h.useDebugValue;exports.useSyncExternalStoreWithSelector=function(a,b,e,l,g){var c=t(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;c=v(function(){function a(a){if(!c){if(c=!0,d=a,a=l(a),void 0!==g&&f.hasValue){var b=f.value;if(g(b,a))return k=b}return k=a}if(b=k,q(d,a))return b;var e=l(a);return void 0!==g&&g(b,e)?b:(d=a,k=e)}var d,k,c=!1,m=void 0===e?null:e;return[function(){return a(b())},null===m?void 0:function(){return a(m())}]},[b,e,l,g]);var d=r(a,c[0],c[1]);return u(function(){f.hasValue=!0,f.value=d},[d]),w(d),d}},61688:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__(53250)},52798:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__(50139)},98933:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Xg:function(){return createDeferredActor},f3:function(){return isSpawnedActor},mu:function(){return createInvocableActor},vk:function(){return toActorRef}});var _virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63056),_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(89823),_serviceScope_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10797);function createNullActor(id){var _a;return(_a={id:id,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:id}}})[_utils_js__WEBPACK_IMPORTED_MODULE_0__.L$]=function(){return this},_a}function createInvocableActor(invokeDefinition,machine,context,_event){var _a,invokeSrc=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.j)(invokeDefinition.src),serviceCreator=null===(_a=null==machine?void 0:machine.options.services)||void 0===_a?void 0:_a[invokeSrc.type],resolvedData=invokeDefinition.data?(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.QX)(invokeDefinition.data,context,_event):void 0,tempActor=serviceCreator?createDeferredActor(serviceCreator,invokeDefinition.id,resolvedData):createNullActor(invokeDefinition.id);return tempActor.meta=invokeDefinition,tempActor}function createDeferredActor(entity,id,data){var tempActor=createNullActor(id);if(tempActor.deferred=!0,(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.O4)(entity)){var initialState_1=tempActor.state=(0,_serviceScope_js__WEBPACK_IMPORTED_MODULE_1__.J)(void 0,function(){return(data?entity.withContext(data):entity).initialState});tempActor.getSnapshot=function(){return initialState_1}}return tempActor}function isSpawnedActor(item){return function(item){try{return"function"==typeof item.send}catch(e){return!1}}(item)&&"id"in item}function toActorRef(actorRefLike){var _a;return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)(((_a={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[_utils_js__WEBPACK_IMPORTED_MODULE_0__.L$]=function(){return this},_a),actorRefLike)}},4723:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{C:function(){return createMachine}});var _tslib=__webpack_require__(63056),utils=__webpack_require__(89823),types=__webpack_require__(59043),State=__webpack_require__(54911),actionTypes=__webpack_require__(3884),es_actions=__webpack_require__(30375),environment=__webpack_require__(14066),constants=__webpack_require__(87353),stateUtils=__webpack_require__(56115),Actor=__webpack_require__(98933);function toInvokeDefinition(invokeConfig){return(0,_tslib.pi)((0,_tslib.pi)({type:actionTypes.dw},invokeConfig),{toJSON:function(){invokeConfig.onDone,invokeConfig.onError;var invokeDef=(0,_tslib._T)(invokeConfig,["onDone","onError"]);return(0,_tslib.pi)((0,_tslib.pi)({},invokeDef),{type:actionTypes.dw,src:function(src){if("string"==typeof src){var simpleSrc={type:src};return simpleSrc.toString=function(){return src},simpleSrc}return src}(invokeConfig.src)})}})}var EMPTY_OBJECT={},isStateId=function(str){return"#"===str[0]},validateArrayifiedTransitions=function(stateNode,event1,transitions){var hasNonLastUnguardedTarget=transitions.slice(0,-1).some(function(transition){return!("cond"in transition)&&!("in"in transition)&&((0,utils.HD)(transition.target)||(0,utils.O4)(transition.target))});(0,utils.ZK)(!hasNonLastUnguardedTarget,"One or more transitions for ".concat(""===event1?"the transient event":"event '".concat(event1,"'")," on state '").concat(stateNode.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},StateNode_StateNode=function(){function StateNode(config,options,_context,_stateInfo){void 0===_context&&(_context="context"in config?config.context:void 0);var _a,_this=this;this.config=config,this._context=_context,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},options),this.parent=null==_stateInfo?void 0:_stateInfo.parent,this.key=this.config.key||(null==_stateInfo?void 0:_stateInfo.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:constants.iS),this.id=this.config.id||(0,_tslib.ev)([this.machine.key],(0,_tslib.CR)(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(_a=this.config.schema)&&void 0!==_a?_a:{},this.description=this.config.description,environment.M||(0,utils.ZK)(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?(0,utils.Q8)(this.config.states,function(stateConfig,key){var _a,stateNode=new StateNode(stateConfig,{},void 0,{parent:_this,key:key});return Object.assign(_this.idMap,(0,_tslib.pi)(((_a={})[stateNode.id]=stateNode,_a),stateNode.idMap)),stateNode}):EMPTY_OBJECT;var order=0;!function dfs(stateNode){var e_1,_a;stateNode.order=order++;try{for(var _b=(0,_tslib.XA)((0,stateUtils.nI)(stateNode)),_c=_b.next();!_c.done;_c=_b.next()){var child=_c.value;dfs(child)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some(function(_a){return""===_a.event}):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=(0,utils.qo)(this.config.entry||this.config.onEntry).map(function(action){return(0,es_actions.Q8)(action)}),this.onExit=(0,utils.qo)(this.config.exit||this.config.onExit).map(function(action){return(0,es_actions.Q8)(action)}),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=(0,utils.qo)(this.config.invoke).map(function(invokeConfig,i){if((0,utils.O4)(invokeConfig)){var _a,_b,invokeId=(0,utils.bx)(_this.id,i);return _this.machine.options.services=(0,_tslib.pi)(((_a={})[invokeId]=invokeConfig,_a),_this.machine.options.services),toInvokeDefinition({src:invokeId,id:invokeId})}if((0,utils.HD)(invokeConfig.src)){var invokeId=invokeConfig.id||(0,utils.bx)(_this.id,i);return toInvokeDefinition((0,_tslib.pi)((0,_tslib.pi)({},invokeConfig),{id:invokeId,src:invokeConfig.src}))}if((0,utils.O4)(invokeConfig.src)||(0,utils.mf)(invokeConfig.src)){var invokeId=invokeConfig.id||(0,utils.bx)(_this.id,i);return _this.machine.options.services=(0,_tslib.pi)(((_b={})[invokeId]=invokeConfig.src,_b),_this.machine.options.services),toInvokeDefinition((0,_tslib.pi)((0,_tslib.pi)({id:invokeId},invokeConfig),{src:invokeId}))}var invokeSource=invokeConfig.src;return toInvokeDefinition((0,_tslib.pi)((0,_tslib.pi)({id:(0,utils.bx)(_this.id,i)},invokeConfig),{src:invokeSource}))}),this.activities=(0,utils.qo)(this.config.activities).concat(this.invoke).map(function(activity){return(0,es_actions.XA)(activity)}),this.transition=this.transition.bind(this),this.tags=(0,utils.qo)(this.config.tags)}return StateNode.prototype._init=function(){this.__cache.transitions||(0,stateUtils.ac)(this).forEach(function(stateNode){return stateNode.on})},StateNode.prototype.withConfig=function(options,context){var _a=this.options,actions=_a.actions,activities=_a.activities,guards=_a.guards,services=_a.services,delays=_a.delays;return new StateNode(this.config,{actions:(0,_tslib.pi)((0,_tslib.pi)({},actions),options.actions),activities:(0,_tslib.pi)((0,_tslib.pi)({},activities),options.activities),guards:(0,_tslib.pi)((0,_tslib.pi)({},guards),options.guards),services:(0,_tslib.pi)((0,_tslib.pi)({},services),options.services),delays:(0,_tslib.pi)((0,_tslib.pi)({},delays),options.delays)},null!=context?context:this.context)},StateNode.prototype.withContext=function(context){return new StateNode(this.config,this.options,context)},Object.defineProperty(StateNode.prototype,"context",{get:function(){return(0,utils.mf)(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:(0,utils.Q8)(this.states,function(state){return state.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),StateNode.prototype.toJSON=function(){return this.definition},Object.defineProperty(StateNode.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var transitions=this.transitions;return this.__cache.on=transitions.reduce(function(map,transition){return map[transition.eventType]=map[transition.eventType]||[],map[transition.eventType].push(transition),map},{})},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),StateNode.prototype.getCandidates=function(eventName){if(this.__cache.candidates[eventName])return this.__cache.candidates[eventName];var transient=""===eventName,candidates=this.transitions.filter(function(transition){var sameEventType=transition.eventType===eventName;return transient?sameEventType:sameEventType||"*"===transition.eventType});return this.__cache.candidates[eventName]=candidates,candidates},StateNode.prototype.getDelayedTransitions=function(){var _this=this,afterConfig=this.config.after;if(!afterConfig)return[];var mutateEntryExit=function(delay,i){var delayRef=(0,utils.mf)(delay)?"".concat(_this.id,":delay[").concat(i,"]"):delay,eventType=(0,es_actions.e4)(delayRef,_this.id);return _this.onEntry.push((0,es_actions.lW)(eventType,{delay:delay})),_this.onExit.push((0,es_actions.al)(eventType)),eventType};return((0,utils.kJ)(afterConfig)?afterConfig.map(function(transition,i){var eventType=mutateEntryExit(transition.delay,i);return(0,_tslib.pi)((0,_tslib.pi)({},transition),{event:eventType})}):(0,utils.xH)(Object.keys(afterConfig).map(function(delay,i){var configTransition=afterConfig[delay],resolvedTransition=(0,utils.HD)(configTransition)?{target:configTransition}:configTransition,resolvedDelay=isNaN(+delay)?delay:+delay,eventType=mutateEntryExit(resolvedDelay,i);return(0,utils.qo)(resolvedTransition).map(function(transition){return(0,_tslib.pi)((0,_tslib.pi)({},transition),{event:eventType,delay:resolvedDelay})})}))).map(function(delayedTransition){var delay=delayedTransition.delay;return(0,_tslib.pi)((0,_tslib.pi)({},_this.formatTransition(delayedTransition)),{delay:delay})})},StateNode.prototype.getStateNodes=function(state){var _a,_this=this;if(!state)return[];var stateValue=state instanceof State.ZM?state.value:(0,utils.WM)(state,this.delimiter);if((0,utils.HD)(stateValue)){var initialStateValue=this.getStateNode(stateValue).initial;return void 0!==initialStateValue?this.getStateNodes(((_a={})[stateValue]=initialStateValue,_a)):[this,this.states[stateValue]]}var subStateKeys=Object.keys(stateValue),subStateNodes=[this];return subStateNodes.push.apply(subStateNodes,(0,_tslib.ev)([],(0,_tslib.CR)((0,utils.xH)(subStateKeys.map(function(subStateKey){return _this.getStateNode(subStateKey).getStateNodes(stateValue[subStateKey])}))),!1)),subStateNodes},StateNode.prototype.handles=function(event1){var eventType=(0,utils.x6)(event1);return this.events.includes(eventType)},StateNode.prototype.resolveState=function(state){var stateFromConfig=state instanceof State.ZM?state:State.ZM.create(state),configuration=Array.from((0,stateUtils.P_)([],this.getStateNodes(stateFromConfig.value)));return new State.ZM((0,_tslib.pi)((0,_tslib.pi)({},stateFromConfig),{value:this.resolve(stateFromConfig.value),configuration:configuration,done:(0,stateUtils.Ij)(configuration,this),tags:(0,stateUtils.Oe)(configuration),machine:this.machine}))},StateNode.prototype.transitionLeafNode=function(stateValue,state,_event){var next=this.getStateNode(stateValue).next(state,_event);return next&&next.transitions.length?next:this.next(state,_event)},StateNode.prototype.transitionCompoundNode=function(stateValue,state,_event){var subStateKeys=Object.keys(stateValue),next=this.getStateNode(subStateKeys[0])._transition(stateValue[subStateKeys[0]],state,_event);return next&&next.transitions.length?next:this.next(state,_event)},StateNode.prototype.transitionParallelNode=function(stateValue,state,_event){var e_2,_a,transitionMap={};try{for(var _b=(0,_tslib.XA)(Object.keys(stateValue)),_c=_b.next();!_c.done;_c=_b.next()){var subStateKey=_c.value,subStateValue=stateValue[subStateKey];if(subStateValue){var next=this.getStateNode(subStateKey)._transition(subStateValue,state,_event);next&&(transitionMap[subStateKey]=next)}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}var stateTransitions=Object.keys(transitionMap).map(function(key){return transitionMap[key]}),enabledTransitions=(0,utils.xH)(stateTransitions.map(function(st){return st.transitions}));if(!stateTransitions.some(function(st){return st.transitions.length>0}))return this.next(state,_event);var entryNodes=(0,utils.xH)(stateTransitions.map(function(t){return t.entrySet})),configuration=(0,utils.xH)(Object.keys(transitionMap).map(function(key){return transitionMap[key].configuration}));return{transitions:enabledTransitions,entrySet:entryNodes,exitSet:(0,utils.xH)(stateTransitions.map(function(t){return t.exitSet})),configuration:configuration,source:state,actions:(0,utils.xH)(Object.keys(transitionMap).map(function(key){return transitionMap[key].actions}))}},StateNode.prototype._transition=function(stateValue,state,_event){return(0,utils.HD)(stateValue)?this.transitionLeafNode(stateValue,state,_event):1===Object.keys(stateValue).length?this.transitionCompoundNode(stateValue,state,_event):this.transitionParallelNode(stateValue,state,_event)},StateNode.prototype.getTransitionData=function(state,event1){return this._transition(state.value,state,(0,utils.g5)(event1))},StateNode.prototype.next=function(state,_event){var e_3,_a,selectedTransition,_this=this,eventName=_event.name,actions=[],nextStateNodes=[];try{for(var _b=(0,_tslib.XA)(this.getCandidates(eventName)),_c=_b.next();!_c.done;_c=_b.next()){var candidate=_c.value,cond=candidate.cond,stateIn=candidate.in,resolvedContext=state.context,isInState=!stateIn||((0,utils.HD)(stateIn)&&isStateId(stateIn)?state.matches((0,utils.WM)(this.getStateNodeById(stateIn).path,this.delimiter)):(0,utils.W)((0,utils.WM)(stateIn,this.delimiter),(0,utils.ET)(this.path.slice(0,-2))(state.value))),guardPassed=!1;try{guardPassed=!cond||(0,utils.vx)(this.machine,cond,resolvedContext,_event,state)}catch(err){throw Error("Unable to evaluate guard '".concat(cond.name||cond.type,"' in transition for event '").concat(eventName,"' in state node '").concat(this.id,"':\n").concat(err.message))}if(guardPassed&&isInState){void 0!==candidate.target&&(nextStateNodes=candidate.target),actions.push.apply(actions,(0,_tslib.ev)([],(0,_tslib.CR)(candidate.actions),!1)),selectedTransition=candidate;break}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_3)throw e_3.error}}if(selectedTransition){if(!nextStateNodes.length)return{transitions:[selectedTransition],entrySet:[],exitSet:[],configuration:state.value?[this]:[],source:state,actions:actions};var allNextStateNodes=(0,utils.xH)(nextStateNodes.map(function(stateNode){return _this.getRelativeStateNodes(stateNode,state.historyValue)})),isInternal=!!selectedTransition.internal,reentryNodes=[];return isInternal||nextStateNodes.forEach(function(targetNode){reentryNodes.push.apply(reentryNodes,(0,_tslib.ev)([],(0,_tslib.CR)(_this.getExternalReentryNodes(targetNode)),!1))}),{transitions:[selectedTransition],entrySet:reentryNodes,exitSet:isInternal?[]:[this],configuration:allNextStateNodes,source:state,actions:actions}}},StateNode.prototype.getExternalReentryNodes=function(targetNode){for(var nodes=[],_a=(0,_tslib.CR)(targetNode.order>this.order?[targetNode,this]:[this,targetNode],2),marker=_a[0],possibleAncestor=_a[1];marker&&marker!==possibleAncestor;)nodes.push(marker),marker=marker.parent;return marker!==possibleAncestor?[]:(nodes.push(possibleAncestor),nodes)},StateNode.prototype.getActions=function(resolvedConfig,isDone,transition,currentContext,_event,prevState,predictableExec){var e_4,_a,e_5,_b,_this=this,prevConfig=(0,stateUtils.P_)([],prevState?this.getStateNodes(prevState.value):[this]);try{for(var resolvedConfig_1=(0,_tslib.XA)(resolvedConfig),resolvedConfig_1_1=resolvedConfig_1.next();!resolvedConfig_1_1.done;resolvedConfig_1_1=resolvedConfig_1.next()){var sn=resolvedConfig_1_1.value;(!(0,stateUtils.e$)(prevConfig,sn)||(0,stateUtils.e$)(transition.entrySet,sn.parent)&&!(0,stateUtils.e$)(transition.entrySet,sn))&&transition.entrySet.push(sn)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{resolvedConfig_1_1&&!resolvedConfig_1_1.done&&(_a=resolvedConfig_1.return)&&_a.call(resolvedConfig_1)}finally{if(e_4)throw e_4.error}}try{for(var prevConfig_1=(0,_tslib.XA)(prevConfig),prevConfig_1_1=prevConfig_1.next();!prevConfig_1_1.done;prevConfig_1_1=prevConfig_1.next()){var sn=prevConfig_1_1.value;(!(0,stateUtils.e$)(resolvedConfig,sn)||(0,stateUtils.e$)(transition.exitSet,sn.parent))&&transition.exitSet.push(sn)}}catch(e_5_1){e_5={error:e_5_1}}finally{try{prevConfig_1_1&&!prevConfig_1_1.done&&(_b=prevConfig_1.return)&&_b.call(prevConfig_1)}finally{if(e_5)throw e_5.error}}var doneEvents=(0,utils.xH)(transition.entrySet.map(function(sn){var events=[];if("final"!==sn.type)return events;var parent=sn.parent;if(!parent.parent)return events;events.push((0,es_actions.aT)(sn.id,sn.doneData),(0,es_actions.aT)(parent.id,sn.doneData?(0,utils.QX)(sn.doneData,currentContext,_event):void 0));var grandparent=parent.parent;return"parallel"===grandparent.type&&(0,stateUtils.G)(grandparent).every(function(parentNode){return(0,stateUtils.Ij)(transition.configuration,parentNode)})&&events.push((0,es_actions.aT)(grandparent.id)),events}));transition.exitSet.sort(function(a,b){return b.order-a.order}),transition.entrySet.sort(function(a,b){return a.order-b.order});var entryStates=new Set(transition.entrySet),exitStates=new Set(transition.exitSet),entryActions=Array.from(entryStates).map(function(stateNode){var entryActions=stateNode.onEntry,invokeActions=stateNode.activities.map(function(activity){return(0,es_actions.BL)(activity)});return(0,es_actions.AE)(predictableExec?(0,_tslib.ev)((0,_tslib.ev)([],(0,_tslib.CR)(entryActions),!1),(0,_tslib.CR)(invokeActions),!1):(0,_tslib.ev)((0,_tslib.ev)([],(0,_tslib.CR)(invokeActions),!1),(0,_tslib.CR)(entryActions),!1),_this.machine.options.actions)}).concat([doneEvents.map(es_actions.OU)]),actions=Array.from(exitStates).map(function(stateNode){return(0,es_actions.AE)((0,_tslib.ev)((0,_tslib.ev)([],(0,_tslib.CR)(stateNode.onExit),!1),(0,_tslib.CR)(stateNode.activities.map(function(activity){return(0,es_actions.sT)(activity)})),!1),_this.machine.options.actions)}).concat([(0,es_actions.AE)(transition.actions,this.machine.options.actions)]).concat(entryActions);if(isDone){var stopActions=(0,es_actions.AE)((0,utils.xH)((0,_tslib.ev)([],(0,_tslib.CR)(resolvedConfig),!1).sort(function(a,b){return b.order-a.order}).map(function(stateNode){return stateNode.onExit})),this.machine.options.actions).filter(function(action){return action.type!==actionTypes.OU&&(action.type!==actionTypes.lW||!!action.to&&action.to!==types.K.Internal)});return actions.concat([stopActions])}return actions},StateNode.prototype.transition=function(state,event1,context,exec){void 0===state&&(state=this.initialState);var currentState,_event=(0,utils.g5)(event1);if(state instanceof State.ZM)currentState=void 0===context?state:this.resolveState(State.ZM.from(state,context));else{var resolvedStateValue=(0,utils.HD)(state)?this.resolve((0,utils.on)(this.getResolvedPath(state))):this.resolve(state),resolvedContext=null!=context?context:this.machine.context;currentState=this.resolveState(State.ZM.from(resolvedStateValue,resolvedContext))}if(!environment.M&&"*"===_event.name)throw Error("An event cannot have the wildcard type ('".concat("*","')"));if(this.strict&&!this.events.includes(_event.name)&&!(0,utils.JQ)(_event.name))throw Error("Machine '".concat(this.id,"' does not accept event '").concat(_event.name,"'"));var stateTransition=this._transition(currentState.value,currentState,_event)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:currentState,actions:[]},prevConfig=(0,stateUtils.P_)([],this.getStateNodes(currentState.value)),resolvedConfig=stateTransition.configuration.length?(0,stateUtils.P_)(prevConfig,stateTransition.configuration):prevConfig;return stateTransition.configuration=(0,_tslib.ev)([],(0,_tslib.CR)(resolvedConfig),!1),this.resolveTransition(stateTransition,currentState,currentState.context,exec,_event)},StateNode.prototype.resolveRaisedTransition=function(state,_event,originalEvent,predictableExec){var _a,currentActions=state.actions;return(state=this.transition(state,_event,void 0,predictableExec))._event=originalEvent,state.event=originalEvent.data,(_a=state.actions).unshift.apply(_a,(0,_tslib.ev)([],(0,_tslib.CR)(currentActions),!1)),state},StateNode.prototype.resolveTransition=function(stateTransition,currentState,context,predictableExec,_event){var e_6,_a,e_7,_b,_this=this;void 0===_event&&(_event=es_actions.bf);var configuration=stateTransition.configuration,willTransition=!currentState||stateTransition.transitions.length>0,resolvedConfiguration=willTransition?stateTransition.configuration:currentState?currentState.configuration:[],isDone=(0,stateUtils.Ij)(resolvedConfiguration,this),resolvedStateValue=willTransition?(0,stateUtils.NA)(this.machine,configuration):void 0,historyValue=currentState?currentState.historyValue?currentState.historyValue:stateTransition.source?this.machine.historyValue(currentState.value):void 0:void 0,actionBlocks=this.getActions(new Set(resolvedConfiguration),isDone,stateTransition,context,_event,currentState,predictableExec),activities=currentState?(0,_tslib.pi)({},currentState.activities):{};try{for(var actionBlocks_1=(0,_tslib.XA)(actionBlocks),actionBlocks_1_1=actionBlocks_1.next();!actionBlocks_1_1.done;actionBlocks_1_1=actionBlocks_1.next()){var block=actionBlocks_1_1.value;try{for(var block_1=(e_7=void 0,(0,_tslib.XA)(block)),block_1_1=block_1.next();!block_1_1.done;block_1_1=block_1.next()){var action=block_1_1.value;action.type===actionTypes.BL?activities[action.activity.id||action.activity.type]=action:action.type===actionTypes.sT&&(activities[action.activity.id||action.activity.type]=!1)}}catch(e_7_1){e_7={error:e_7_1}}finally{try{block_1_1&&!block_1_1.done&&(_b=block_1.return)&&_b.call(block_1)}finally{if(e_7)throw e_7.error}}}}catch(e_6_1){e_6={error:e_6_1}}finally{try{actionBlocks_1_1&&!actionBlocks_1_1.done&&(_a=actionBlocks_1.return)&&_a.call(actionBlocks_1)}finally{if(e_6)throw e_6.error}}var _c=(0,_tslib.CR)((0,es_actions.yC)(this,currentState,context,_event,actionBlocks,predictableExec,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),resolvedActions=_c[0],updatedContext=_c[1],_d=(0,_tslib.CR)((0,utils.uK)(resolvedActions,function(action){return action.type===actionTypes.OU||action.type===actionTypes.lW&&action.to===types.K.Internal}),2),raisedEvents=_d[0],nonRaisedActions=_d[1],children=resolvedActions.filter(function(action){var _a;return action.type===actionTypes.BL&&(null===(_a=action.activity)||void 0===_a?void 0:_a.type)===actionTypes.dw}).reduce(function(acc,action){return acc[action.activity.id]=(0,Actor.mu)(action.activity,_this.machine,updatedContext,_event),acc},currentState?(0,_tslib.pi)({},currentState.children):{}),nextState=new State.ZM({value:resolvedStateValue||currentState.value,context:updatedContext,_event:_event,_sessionid:currentState?currentState._sessionid:null,historyValue:resolvedStateValue?historyValue?(0,utils.yv)(historyValue,resolvedStateValue):void 0:currentState?currentState.historyValue:void 0,history:!resolvedStateValue||stateTransition.source?currentState:void 0,actions:resolvedStateValue?nonRaisedActions:[],activities:resolvedStateValue?activities:currentState?currentState.activities:{},events:[],configuration:resolvedConfiguration,transitions:stateTransition.transitions,children:children,done:isDone,tags:(0,stateUtils.Oe)(resolvedConfiguration),machine:this}),didUpdateContext=context!==updatedContext;nextState.changed=_event.name===actionTypes.Vx||didUpdateContext;var history=nextState.history;history&&delete history.history;var hasAlwaysTransitions=!isDone&&(this._transient||configuration.some(function(stateNode){return stateNode._transient}));if(!willTransition&&(!hasAlwaysTransitions||""===_event.name))return nextState;var maybeNextState=nextState;if(!isDone)for(hasAlwaysTransitions&&(maybeNextState=this.resolveRaisedTransition(maybeNextState,{type:actionTypes.IA},_event,predictableExec));raisedEvents.length;){var raisedEvent=raisedEvents.shift();maybeNextState=this.resolveRaisedTransition(maybeNextState,raisedEvent._event,_event,predictableExec)}var changed=maybeNextState.changed||(history?!!maybeNextState.actions.length||didUpdateContext||typeof history.value!=typeof maybeNextState.value||!(0,State.j_)(maybeNextState.value,history.value):void 0);return maybeNextState.changed=changed,maybeNextState.history=history,maybeNextState},StateNode.prototype.getStateNode=function(stateKey){if(isStateId(stateKey))return this.machine.getStateNodeById(stateKey);if(!this.states)throw Error("Unable to retrieve child state '".concat(stateKey,"' from '").concat(this.id,"'; no child states exist."));var result=this.states[stateKey];if(!result)throw Error("Child state '".concat(stateKey,"' does not exist on '").concat(this.id,"'"));return result},StateNode.prototype.getStateNodeById=function(stateId){var resolvedStateId=isStateId(stateId)?stateId.slice(1):stateId;if(resolvedStateId===this.id)return this;var stateNode=this.machine.idMap[resolvedStateId];if(!stateNode)throw Error("Child state node '#".concat(resolvedStateId,"' does not exist on machine '").concat(this.id,"'"));return stateNode},StateNode.prototype.getStateNodeByPath=function(statePath){if("string"==typeof statePath&&isStateId(statePath))try{return this.getStateNodeById(statePath.slice(1))}catch(e){}for(var arrayStatePath=(0,utils.Q9)(statePath,this.delimiter).slice(),currentStateNode=this;arrayStatePath.length;){var key=arrayStatePath.shift();if(!key.length)break;currentStateNode=currentStateNode.getStateNode(key)}return currentStateNode},StateNode.prototype.resolve=function(stateValue){var _a,_this=this;if(!stateValue)return this.initialStateValue||EMPTY_OBJECT;switch(this.type){case"parallel":return(0,utils.Q8)(this.initialStateValue,function(subStateValue,subStateKey){return subStateValue?_this.getStateNode(subStateKey).resolve(stateValue[subStateKey]||subStateValue):EMPTY_OBJECT});case"compound":if((0,utils.HD)(stateValue)){var subStateNode=this.getStateNode(stateValue);if("parallel"===subStateNode.type||"compound"===subStateNode.type)return(_a={})[stateValue]=subStateNode.initialStateValue,_a;return stateValue}if(!Object.keys(stateValue).length)return this.initialStateValue||{};return(0,utils.Q8)(stateValue,function(subStateValue,subStateKey){return subStateValue?_this.getStateNode(subStateKey).resolve(subStateValue):EMPTY_OBJECT});default:return stateValue||EMPTY_OBJECT}},StateNode.prototype.getResolvedPath=function(stateIdentifier){if(isStateId(stateIdentifier)){var stateNode=this.machine.idMap[stateIdentifier.slice(1)];if(!stateNode)throw Error("Unable to find state node '".concat(stateIdentifier,"'"));return stateNode.path}return(0,utils.Q9)(stateIdentifier,this.delimiter)},Object.defineProperty(StateNode.prototype,"initialStateValue",{get:function(){var _a,initialStateValue;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)initialStateValue=(0,utils.ib)(this.states,function(state){return state.initialStateValue||EMPTY_OBJECT},function(stateNode){return"history"!==stateNode.type});else if(void 0!==this.initial){if(!this.states[this.initial])throw Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));initialStateValue=(0,stateUtils.N9)(this.states[this.initial])?this.initial:((_a={})[this.initial]=this.states[this.initial].initialStateValue,_a)}else initialStateValue={};return this.__cache.initialStateValue=initialStateValue,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),StateNode.prototype.getInitialState=function(stateValue,context){this._init();var configuration=this.getStateNodes(stateValue);return this.resolveTransition({configuration:configuration,entrySet:configuration,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=context?context:this.machine.context,void 0)},Object.defineProperty(StateNode.prototype,"initialState",{get:function(){var initialStateValue=this.initialStateValue;if(!initialStateValue)throw Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(initialStateValue)},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"target",{get:function(){var target;if("history"===this.type){var historyConfig=this.config;target=(0,utils.HD)(historyConfig.target)&&isStateId(historyConfig.target)?(0,utils.on)(this.machine.getStateNodeById(historyConfig.target).path.slice(this.path.length-1)):historyConfig.target}return target},enumerable:!1,configurable:!0}),StateNode.prototype.getRelativeStateNodes=function(relativeStateId,historyValue,resolve){return void 0===resolve&&(resolve=!0),resolve?"history"===relativeStateId.type?relativeStateId.resolveHistory(historyValue):relativeStateId.initialStateNodes:[relativeStateId]},Object.defineProperty(StateNode.prototype,"initialStateNodes",{get:function(){var _this=this;if((0,stateUtils.N9)(this))return[this];if("compound"===this.type&&!this.initial)return environment.M||(0,utils.ZK)(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var initialStateNodePaths=(0,utils.SA)(this.initialStateValue);return(0,utils.xH)(initialStateNodePaths.map(function(initialPath){return _this.getFromRelativePath(initialPath)}))},enumerable:!1,configurable:!0}),StateNode.prototype.getFromRelativePath=function(relativePath){if(!relativePath.length)return[this];var _a=(0,_tslib.CR)(relativePath),stateKey=_a[0],childStatePath=_a.slice(1);if(!this.states)throw Error("Cannot retrieve subPath '".concat(stateKey,"' from node with no states"));var childStateNode=this.getStateNode(stateKey);if("history"===childStateNode.type)return childStateNode.resolveHistory();if(!this.states[stateKey])throw Error("Child state '".concat(stateKey,"' does not exist on '").concat(this.id,"'"));return this.states[stateKey].getFromRelativePath(childStatePath)},StateNode.prototype.historyValue=function(relativeStateValue){if(Object.keys(this.states).length)return{current:relativeStateValue||this.initialStateValue,states:(0,utils.ib)(this.states,function(stateNode,key){if(!relativeStateValue)return stateNode.historyValue();var subStateValue=(0,utils.HD)(relativeStateValue)?void 0:relativeStateValue[key];return stateNode.historyValue(subStateValue||stateNode.initialStateValue)},function(stateNode){return!stateNode.history})}},StateNode.prototype.resolveHistory=function(historyValue){var _this=this;if("history"!==this.type)return[this];var parent=this.parent;if(!historyValue){var historyTarget=this.target;return historyTarget?(0,utils.xH)((0,utils.SA)(historyTarget).map(function(relativeChildPath){return parent.getFromRelativePath(relativeChildPath)})):parent.initialStateNodes}var subHistoryValue=(0,utils.gk)(parent.path,"states")(historyValue).current;return(0,utils.HD)(subHistoryValue)?[parent.getStateNode(subHistoryValue)]:(0,utils.xH)((0,utils.SA)(subHistoryValue).map(function(subStatePath){return"deep"===_this.history?parent.getFromRelativePath(subStatePath):[parent.states[subStatePath[0]]]}))},Object.defineProperty(StateNode.prototype,"stateIds",{get:function(){var _this=this;return[this.id].concat((0,utils.xH)(Object.keys(this.states).map(function(stateKey){return _this.states[stateKey].stateIds})))},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"events",{get:function(){if(this.__cache.events)return this.__cache.events;var e_8,_a,e_9,_b,states=this.states,events=new Set(this.ownEvents);if(states)try{for(var _c=(0,_tslib.XA)(Object.keys(states)),_d=_c.next();!_d.done;_d=_c.next()){var state=states[_d.value];if(state.states)try{for(var _e=(e_9=void 0,(0,_tslib.XA)(state.events)),_f=_e.next();!_f.done;_f=_e.next()){var event_1=_f.value;events.add("".concat(event_1))}}catch(e_9_1){e_9={error:e_9_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_9)throw e_9.error}}}}catch(e_8_1){e_8={error:e_8_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_8)throw e_8.error}}return this.__cache.events=Array.from(events)},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"ownEvents",{get:function(){return Array.from(new Set(this.transitions.filter(function(transition){return!(!transition.target&&!transition.actions.length&&transition.internal)}).map(function(transition){return transition.eventType})))},enumerable:!1,configurable:!0}),StateNode.prototype.resolveTarget=function(_target){var _this=this;if(void 0!==_target)return _target.map(function(target){if(!(0,utils.HD)(target))return target;var isInternalTarget=target[0]===_this.delimiter;if(isInternalTarget&&!_this.parent)return _this.getStateNodeByPath(target.slice(1));var resolvedTarget=isInternalTarget?_this.key+target:target;if(!_this.parent)return _this.getStateNodeByPath(resolvedTarget);try{return _this.parent.getStateNodeByPath(resolvedTarget)}catch(err){throw Error("Invalid transition definition for state node '".concat(_this.id,"':\n").concat(err.message))}})},StateNode.prototype.formatTransition=function(transitionConfig){var _this=this,normalizedTarget=(0,utils.rg)(transitionConfig.target),internal="internal"in transitionConfig?transitionConfig.internal:!normalizedTarget||normalizedTarget.some(function(_target){return(0,utils.HD)(_target)&&_target[0]===_this.delimiter}),guards=this.machine.options.guards,target=this.resolveTarget(normalizedTarget),transition=(0,_tslib.pi)((0,_tslib.pi)({},transitionConfig),{actions:(0,es_actions.AE)((0,utils.qo)(transitionConfig.actions)),cond:(0,utils.Qi)(transitionConfig.cond,guards),target:target,source:this,internal:internal,eventType:transitionConfig.event,toJSON:function(){return(0,_tslib.pi)((0,_tslib.pi)({},transition),{target:transition.target?transition.target.map(function(t){return"#".concat(t.id)}):void 0,source:"#".concat(_this.id)})}});return transition},StateNode.prototype.formatTransitions=function(){var e_10,_a,onConfig,_this=this;if(this.config.on){if(Array.isArray(this.config.on))onConfig=this.config.on;else{var _b=this.config.on,_d=_b["*"],strictTransitionConfigs_1=(0,_tslib._T)(_b,["*"]);onConfig=(0,utils.xH)(Object.keys(strictTransitionConfigs_1).map(function(key){environment.M||""!==key||(0,utils.ZK)(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(_this.id,'".'));var transitionConfigArray=(0,utils.jh)(key,strictTransitionConfigs_1[key]);return environment.M||validateArrayifiedTransitions(_this,key,transitionConfigArray),transitionConfigArray}).concat((0,utils.jh)("*",void 0===_d?[]:_d)))}}else onConfig=[];var eventlessConfig=this.config.always?(0,utils.jh)("",this.config.always):[],doneConfig=this.config.onDone?(0,utils.jh)(String((0,es_actions.aT)(this.id)),this.config.onDone):[];environment.M||(0,utils.ZK)(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var invokeConfig=(0,utils.xH)(this.invoke.map(function(invokeDef){var settleTransitions=[];return invokeDef.onDone&&settleTransitions.push.apply(settleTransitions,(0,_tslib.ev)([],(0,_tslib.CR)((0,utils.jh)(String((0,es_actions.Sl)(invokeDef.id)),invokeDef.onDone)),!1)),invokeDef.onError&&settleTransitions.push.apply(settleTransitions,(0,_tslib.ev)([],(0,_tslib.CR)((0,utils.jh)(String((0,es_actions.vU)(invokeDef.id)),invokeDef.onError)),!1)),settleTransitions})),delayedTransitions=this.after,formattedTransitions=(0,utils.xH)((0,_tslib.ev)((0,_tslib.ev)((0,_tslib.ev)((0,_tslib.ev)([],(0,_tslib.CR)(doneConfig),!1),(0,_tslib.CR)(invokeConfig),!1),(0,_tslib.CR)(onConfig),!1),(0,_tslib.CR)(eventlessConfig),!1).map(function(transitionConfig){return(0,utils.qo)(transitionConfig).map(function(transition){return _this.formatTransition(transition)})}));try{for(var delayedTransitions_1=(0,_tslib.XA)(delayedTransitions),delayedTransitions_1_1=delayedTransitions_1.next();!delayedTransitions_1_1.done;delayedTransitions_1_1=delayedTransitions_1.next()){var delayedTransition=delayedTransitions_1_1.value;formattedTransitions.push(delayedTransition)}}catch(e_10_1){e_10={error:e_10_1}}finally{try{delayedTransitions_1_1&&!delayedTransitions_1_1.done&&(_a=delayedTransitions_1.return)&&_a.call(delayedTransitions_1)}finally{if(e_10)throw e_10.error}}return formattedTransitions},StateNode}(),warned=!1;function createMachine(config,options){return environment.M||config.predictableActionArguments||warned||(warned=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new StateNode_StateNode(config,options)}},54911:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{TL:function(){return isStateConfig},ZM:function(){return State},j1:function(){return bindActionToState},j_:function(){return function stateValuesEqual(a,b){if(a===b)return!0;if(void 0===a||void 0===b)return!1;if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(a)||(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(b))return a===b;var aKeys=Object.keys(a),bKeys=Object.keys(b);return aKeys.length===bKeys.length&&aKeys.every(function(key){return stateValuesEqual(a[key],b[key])})}}});var _virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63056),_constants_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87353),_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(89823),_stateUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(56115),_actions_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30375),_environment_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14066);function isStateConfig(state){return"object"==typeof state&&null!==state&&"value"in state&&"_event"in state}function bindActionToState(action,state){var exec=action.exec;return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.pi)({},action),{exec:void 0!==exec?function(){return exec(state.context,state.event,{action:action,state:state,_event:state._event})}:void 0})}var State=function(){function State(config){var _a,_this=this;this.actions=[],this.activities=_constants_js__WEBPACK_IMPORTED_MODULE_2__.qP,this.meta={},this.events=[],this.value=config.value,this.context=config.context,this._event=config._event,this._sessionid=config._sessionid,this.event=this._event.data,this.historyValue=config.historyValue,this.history=config.history,this.actions=config.actions||[],this.activities=config.activities||_constants_js__WEBPACK_IMPORTED_MODULE_2__.qP,this.meta=(0,_stateUtils_js__WEBPACK_IMPORTED_MODULE_3__.xZ)(config.configuration),this.events=config.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=config.configuration,this.transitions=config.transitions,this.children=config.children,this.done=!!config.done,this.tags=null!==(_a=Array.isArray(config.tags)?new Set(config.tags):config.tags)&&void 0!==_a?_a:new Set,this.machine=config.machine,Object.defineProperty(this,"nextEvents",{get:function(){return(0,_stateUtils_js__WEBPACK_IMPORTED_MODULE_3__.nJ)(_this.configuration)}})}return State.from=function(stateValue,context){if(stateValue instanceof State)return stateValue.context!==context?new State({value:stateValue.value,context:context,_event:stateValue._event,_sessionid:null,historyValue:stateValue.historyValue,history:stateValue.history,actions:[],activities:stateValue.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):stateValue;var _event=_actions_js__WEBPACK_IMPORTED_MODULE_4__.bf;return new State({value:stateValue,context:context,_event:_event,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},State.create=function(config){return new State(config)},State.inert=function(stateValue,context){if(stateValue instanceof State){if(!stateValue.actions.length)return stateValue;var _event=_actions_js__WEBPACK_IMPORTED_MODULE_4__.bf;return new State({value:stateValue.value,context:context,_event:_event,_sessionid:null,historyValue:stateValue.historyValue,history:stateValue.history,activities:stateValue.activities,configuration:stateValue.configuration,transitions:[],children:{}})}return State.from(stateValue,context)},State.prototype.toStrings=function(stateValue,delimiter){var _this=this;if(void 0===stateValue&&(stateValue=this.value),void 0===delimiter&&(delimiter="."),(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(stateValue))return[stateValue];var valueKeys=Object.keys(stateValue);return valueKeys.concat.apply(valueKeys,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.ev)([],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.CR)(valueKeys.map(function(key){return _this.toStrings(stateValue[key],delimiter).map(function(s){return key+delimiter+s})})),!1))},State.prototype.toJSON=function(){this.configuration,this.transitions;var tags=this.tags;this.machine;var jsonValues=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__._T)(this,["configuration","transitions","tags","machine"]);return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.pi)({},jsonValues),{tags:Array.from(tags)})},State.prototype.matches=function(parentStateValue){return(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.W)(parentStateValue,this.value)},State.prototype.hasTag=function(tag){return this.tags.has(tag)},State.prototype.can=function(event1){_environment_js__WEBPACK_IMPORTED_MODULE_5__.M&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.ZK)(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var _a,transitionData=null===(_a=this.machine)||void 0===_a?void 0:_a.getTransitionData(this,event1);return!!(null==transitionData?void 0:transitionData.transitions.length)&&transitionData.transitions.some(function(t){return void 0!==t.target||t.actions.length})},State}()},63056:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{CR:function(){return __read},XA:function(){return __values},_T:function(){return __rest},ev:function(){return __spreadArray},pi:function(){return __assign}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spreadArray(to,from,pack){if(pack||2==arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}},3884:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{BL:function(){return start},IA:function(){return nullEvent},Le:function(){return pure},Mg:function(){return errorPlatform},OU:function(){return raise},RN:function(){return choose},S1:function(){return init},Vx:function(){return update},al:function(){return cancel},cM:function(){return log},dw:function(){return invoke},f0:function(){return assign},lW:function(){return send},sT:function(){return stop},vU:function(){return error}});var _types_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(59043),start=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Start,stop=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Stop,raise=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Raise,send=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Send,cancel=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Cancel,nullEvent=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.NullEvent,assign=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Assign;_types_js__WEBPACK_IMPORTED_MODULE_0__.M.After,_types_js__WEBPACK_IMPORTED_MODULE_0__.M.DoneState;var log=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Log,init=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Init,invoke=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Invoke;_types_js__WEBPACK_IMPORTED_MODULE_0__.M.ErrorExecution;var errorPlatform=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.ErrorPlatform,error=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.ErrorCustom,update=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Update,choose=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Choose,pure=_types_js__WEBPACK_IMPORTED_MODULE_0__.M.Pure},30375:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{AE:function(){return toActionObjects},BL:function(){return start},OU:function(){return raise},Q8:function(){return toActionObject},Sl:function(){return doneInvoke},XA:function(){return toActivityDefinition},aT:function(){return done},al:function(){return cancel},bf:function(){return initEvent},e4:function(){return after},lW:function(){return send},o$:function(){return getActionFunction},sT:function(){return stop},vU:function(){return error},yC:function(){return function resolveActions(machine,currentState,currentContext,_event,actionBlocks,predictableExec,preserveActionOrder){void 0===preserveActionOrder&&(preserveActionOrder=!1);var assignActions=preserveActionOrder?[]:pluckAssigns(actionBlocks),updatedContext=assignActions.length?(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.dt)(currentContext,_event,assignActions,currentState):currentContext,preservedContexts=preserveActionOrder?[currentContext]:void 0,deferredToBlockEnd=[];return[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.xH)(actionBlocks.map(function(block){var e_2,_a,resolvedActions=[];try{for(var block_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.XA)(block),block_1_1=block_1.next();!block_1_1.done;block_1_1=block_1.next()){var action=block_1_1.value,resolved=function(actionObject){switch(actionObject.type){case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.OU:return{type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.OU,_event:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.g5)(actionObject.event)};case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.lW:var sendAction=function(action,ctx,_event,delaysMap){var resolvedDelay,meta={_event:_event},resolvedEvent=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.g5)((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(action.event)?action.event(ctx,_event.data,meta):action.event);if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(action.delay)){var configDelay=delaysMap&&delaysMap[action.delay];resolvedDelay=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(configDelay)?configDelay(ctx,_event.data,meta):configDelay}else resolvedDelay=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(action.delay)?action.delay(ctx,_event.data,meta):action.delay;var resolvedTarget=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(action.to)?action.to(ctx,_event.data,meta):action.to;return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)({},action),{to:resolvedTarget,_event:resolvedEvent,event:resolvedEvent.data,delay:resolvedDelay})}(actionObject,updatedContext,_event,machine.options.delays);return _environment_js__WEBPACK_IMPORTED_MODULE_4__.M||(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.ZK)(!(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(actionObject.delay)||"number"==typeof sendAction.delay,"No delay reference for delay expression '".concat(actionObject.delay,"' was found on machine '").concat(machine.id,"'")),predictableExec&&sendAction.to!==_types_js__WEBPACK_IMPORTED_MODULE_3__.K.Internal&&deferredToBlockEnd.push(sendAction),sendAction;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.cM:var _a,ctx,resolved=(ctx=updatedContext,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)({},actionObject),{value:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(actionObject.expr)?actionObject.expr:actionObject.expr(ctx,_event.data,{_event:_event})}));return null==predictableExec||predictableExec(resolved,updatedContext,_event),resolved;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.RN:var matchedActions=null===(_a=actionObject.conds.find(function(condition){var guard=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Qi)(condition.cond,machine.options.guards);return!guard||(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.vx)(machine,guard,updatedContext,_event,predictableExec?void 0:currentState)}))||void 0===_a?void 0:_a.actions;if(!matchedActions)return[];var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.CR)(resolveActions(machine,currentState,updatedContext,_event,[toActionObjects((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.qo)(matchedActions),machine.options.actions)],predictableExec,preserveActionOrder),2),resolvedActionsFromChoose=_b[0];return updatedContext=_b[1],null==preservedContexts||preservedContexts.push(updatedContext),resolvedActionsFromChoose;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.Le:var matchedActions=actionObject.get(updatedContext,_event.data);if(!matchedActions)return[];var _c=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.CR)(resolveActions(machine,currentState,updatedContext,_event,[toActionObjects((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.qo)(matchedActions),machine.options.actions)],predictableExec,preserveActionOrder),2),resolvedActionsFromPure=_c[0];return updatedContext=_c[1],null==preservedContexts||preservedContexts.push(updatedContext),resolvedActionsFromPure;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.sT:var context,actorRefOrString,resolved=(context=updatedContext,actorRefOrString=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(actionObject.activity)?actionObject.activity(context,_event.data):actionObject.activity,{type:_types_js__WEBPACK_IMPORTED_MODULE_3__.M.Stop,activity:"string"==typeof actorRefOrString?{id:actorRefOrString}:actorRefOrString});return null==predictableExec||predictableExec(resolved,currentContext,_event),resolved;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.f0:updatedContext=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.dt)(updatedContext,_event,[actionObject],predictableExec?void 0:currentState),null==preservedContexts||preservedContexts.push(updatedContext);break;default:var resolvedActionObject=toActionObject(actionObject,machine.options.actions),exec_1=resolvedActionObject.exec;if(predictableExec)predictableExec(resolvedActionObject,updatedContext,_event);else if(exec_1&&preservedContexts){var contextIndex_1=preservedContexts.length-1;resolvedActionObject=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)({},resolvedActionObject),{exec:function(_ctx){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];exec_1.apply(void 0,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.ev)([preservedContexts[contextIndex_1]],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.CR)(args),!1))}})}return resolvedActionObject}}(action);resolved&&(resolvedActions=resolvedActions.concat(resolved))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{block_1_1&&!block_1_1.done&&(_a=block_1.return)&&_a.call(block_1)}finally{if(e_2)throw e_2.error}}return deferredToBlockEnd.forEach(function(action){predictableExec(action,updatedContext,_event)}),deferredToBlockEnd.length=0,resolvedActions})),updatedContext]}}});var _virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63056),_types_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(59043),_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3884),_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(89823),_environment_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(14066),initEvent=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.g5)({type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.S1});function getActionFunction(actionType,actionFunctionMap){return actionFunctionMap&&actionFunctionMap[actionType]||void 0}function toActionObject(action,actionFunctionMap){var actionObject;if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(action)||"number"==typeof action){var exec=getActionFunction(action,actionFunctionMap);actionObject=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(exec)?{type:action,exec:exec}:exec||{type:action,exec:void 0}}else if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(action))actionObject={type:action.name||action.toString(),exec:action};else{var exec=getActionFunction(action.type,actionFunctionMap);if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(exec))actionObject=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)({},action),{exec:exec});else if(exec){var actionType=exec.type||action.type;actionObject=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)({},exec),action),{type:actionType})}else actionObject=action}return actionObject}var toActionObjects=function(action,actionFunctionMap){return action?((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.kJ)(action)?action:[action]).map(function(subAction){return toActionObject(subAction,actionFunctionMap)}):[]};function toActivityDefinition(action){var actionObject=toActionObject(action);return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.pi)({id:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(action)?action:actionObject.id},actionObject),{type:actionObject.type})}function raise(event1){return(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HD)(event1)?{type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.OU,event:event1}:send(event1,{to:_types_js__WEBPACK_IMPORTED_MODULE_3__.K.Internal})}function send(event1,options){return{to:options?options.to:void 0,type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.lW,event:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(event1)?event1:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__._v)(event1),delay:options?options.delay:void 0,id:options&&void 0!==options.id?options.id:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(event1)?event1.name:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.x6)(event1)}}var cancel=function(sendId){return{type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.al,sendId:sendId}};function start(activity){var activityDef=toActivityDefinition(activity);return{type:_types_js__WEBPACK_IMPORTED_MODULE_3__.M.Start,activity:activityDef,exec:void 0}}function stop(actorRef){var activity=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.mf)(actorRef)?actorRef:toActivityDefinition(actorRef);return{type:_types_js__WEBPACK_IMPORTED_MODULE_3__.M.Stop,activity:activity,exec:void 0}}function after(delayRef,id){return"".concat(_types_js__WEBPACK_IMPORTED_MODULE_3__.M.After,"(").concat(delayRef,")").concat(id?"#".concat(id):"")}function done(id,data){var type="".concat(_types_js__WEBPACK_IMPORTED_MODULE_3__.M.DoneState,".").concat(id),eventObject={type:type,data:data};return eventObject.toString=function(){return type},eventObject}function doneInvoke(id,data){var type="".concat(_types_js__WEBPACK_IMPORTED_MODULE_3__.M.DoneInvoke,".").concat(id),eventObject={type:type,data:data};return eventObject.toString=function(){return type},eventObject}function error(id,data){var type="".concat(_types_js__WEBPACK_IMPORTED_MODULE_3__.M.ErrorPlatform,".").concat(id),eventObject={type:type,data:data};return eventObject.toString=function(){return type},eventObject}var pluckAssigns=function(actionBlocks){var e_1,_a,assignActions=[];try{for(var actionBlocks_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.XA)(actionBlocks),actionBlocks_1_1=actionBlocks_1.next();!actionBlocks_1_1.done;actionBlocks_1_1=actionBlocks_1.next())for(var block=actionBlocks_1_1.value,i=0;i<block.length;){if(block[i].type===_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.f0){assignActions.push(block[i]),block.splice(i,1);continue}i++}}catch(e_1_1){e_1={error:e_1_1}}finally{try{actionBlocks_1_1&&!actionBlocks_1_1.done&&(_a=actionBlocks_1.return)&&_a.call(actionBlocks_1)}finally{if(e_1)throw e_1.error}}return assignActions}},87353:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{TV:function(){return DEFAULT_GUARD_TYPE},iS:function(){return STATE_DELIMITER},qP:function(){return EMPTY_ACTIVITY_MAP},rt:function(){return TARGETLESS_KEY}});var STATE_DELIMITER=".",EMPTY_ACTIVITY_MAP={},DEFAULT_GUARD_TYPE="xstate.guard",TARGETLESS_KEY=""},14066:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{M:function(){return IS_PRODUCTION}});var IS_PRODUCTION=!0},10797:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{J:function(){return provide}});var serviceStack=[],provide=function(service,fn){serviceStack.push(service);var result=fn(service);return serviceStack.pop(),result}},56115:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{G:function(){return getChildren},Ij:function(){return function isInFinalState(configuration,stateNode){return"compound"===stateNode.type?getChildren(stateNode).some(function(s){return"final"===s.type&&has(configuration,s)}):"parallel"===stateNode.type&&getChildren(stateNode).every(function(sn){return isInFinalState(configuration,sn)})}},N9:function(){return isLeafNode},NA:function(){return getValue},Oe:function(){return getTagsFromConfiguration},P_:function(){return getConfiguration},ac:function(){return getAllStateNodes},e$:function(){return has},nI:function(){return getAllChildren},nJ:function(){return nextEvents},xZ:function(){return getMeta}});var _virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63056),_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(89823),isLeafNode=function(stateNode){return"atomic"===stateNode.type||"final"===stateNode.type};function getAllChildren(stateNode){return Object.keys(stateNode.states).map(function(key){return stateNode.states[key]})}function getChildren(stateNode){return getAllChildren(stateNode).filter(function(sn){return"history"!==sn.type})}function getAllStateNodes(stateNode){var stateNodes=[stateNode];return isLeafNode(stateNode)?stateNodes:stateNodes.concat((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.xH)(getChildren(stateNode).map(getAllStateNodes)))}function getConfiguration(prevStateNodes,stateNodes){var e_1,_a,e_2,_b,e_3,_c,e_4,_d,prevAdjList=getAdjList(new Set(prevStateNodes)),configuration=new Set(stateNodes);try{for(var configuration_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(configuration),configuration_1_1=configuration_1.next();!configuration_1_1.done;configuration_1_1=configuration_1.next())for(var s=configuration_1_1.value,m=s.parent;m&&!configuration.has(m);)configuration.add(m),m=m.parent}catch(e_1_1){e_1={error:e_1_1}}finally{try{configuration_1_1&&!configuration_1_1.done&&(_a=configuration_1.return)&&_a.call(configuration_1)}finally{if(e_1)throw e_1.error}}var adjList=getAdjList(configuration);try{for(var configuration_2=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(configuration),configuration_2_1=configuration_2.next();!configuration_2_1.done;configuration_2_1=configuration_2.next()){var s=configuration_2_1.value;if("compound"!==s.type||adjList.get(s)&&adjList.get(s).length){if("parallel"===s.type)try{for(var _e=(e_3=void 0,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(getChildren(s))),_f=_e.next();!_f.done;_f=_e.next()){var child=_f.value;configuration.has(child)||(configuration.add(child),prevAdjList.get(child)?prevAdjList.get(child).forEach(function(sn){return configuration.add(sn)}):child.initialStateNodes.forEach(function(sn){return configuration.add(sn)}))}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_f&&!_f.done&&(_c=_e.return)&&_c.call(_e)}finally{if(e_3)throw e_3.error}}}else prevAdjList.get(s)?prevAdjList.get(s).forEach(function(sn){return configuration.add(sn)}):s.initialStateNodes.forEach(function(sn){return configuration.add(sn)})}}catch(e_2_1){e_2={error:e_2_1}}finally{try{configuration_2_1&&!configuration_2_1.done&&(_b=configuration_2.return)&&_b.call(configuration_2)}finally{if(e_2)throw e_2.error}}try{for(var configuration_3=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(configuration),configuration_3_1=configuration_3.next();!configuration_3_1.done;configuration_3_1=configuration_3.next())for(var s=configuration_3_1.value,m=s.parent;m&&!configuration.has(m);)configuration.add(m),m=m.parent}catch(e_4_1){e_4={error:e_4_1}}finally{try{configuration_3_1&&!configuration_3_1.done&&(_d=configuration_3.return)&&_d.call(configuration_3)}finally{if(e_4)throw e_4.error}}return configuration}function getAdjList(configuration){var e_5,_a,adjList=new Map;try{for(var configuration_4=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(configuration),configuration_4_1=configuration_4.next();!configuration_4_1.done;configuration_4_1=configuration_4.next()){var s=configuration_4_1.value;adjList.has(s)||adjList.set(s,[]),s.parent&&(adjList.has(s.parent)||adjList.set(s.parent,[]),adjList.get(s.parent).push(s))}}catch(e_5_1){e_5={error:e_5_1}}finally{try{configuration_4_1&&!configuration_4_1.done&&(_a=configuration_4.return)&&_a.call(configuration_4)}finally{if(e_5)throw e_5.error}}return adjList}function getValue(rootNode,configuration){var config=getConfiguration([rootNode],configuration);return function getValueFromAdj(baseNode,adjList){var childStateNodes=adjList.get(baseNode);if(!childStateNodes)return{};if("compound"===baseNode.type){var childStateNode=childStateNodes[0];if(!childStateNode)return{};if(isLeafNode(childStateNode))return childStateNode.key}var stateValue={};return childStateNodes.forEach(function(csn){stateValue[csn.key]=getValueFromAdj(csn,adjList)}),stateValue}(rootNode,getAdjList(config))}function has(iterable,item){return Array.isArray(iterable)?iterable.some(function(member){return member===item}):iterable instanceof Set&&iterable.has(item)}function nextEvents(configuration){return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.ev)([],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.CR)(new Set((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.xH)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.ev)([],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.CR)(configuration.map(function(sn){return sn.ownEvents})),!1)))),!1)}function getMeta(configuration){return void 0===configuration&&(configuration=[]),configuration.reduce(function(acc,stateNode){return void 0!==stateNode.meta&&(acc[stateNode.id]=stateNode.meta),acc},{})}function getTagsFromConfiguration(configuration){return new Set((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.xH)(configuration.map(function(sn){return sn.tags})))}},59043:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var ActionTypes,SpecialTargets,ActionTypes1,SpecialTargets1;__webpack_require__.d(__webpack_exports__,{K:function(){return SpecialTargets},M:function(){return ActionTypes}}),(ActionTypes1=ActionTypes||(ActionTypes={})).Start="xstate.start",ActionTypes1.Stop="xstate.stop",ActionTypes1.Raise="xstate.raise",ActionTypes1.Send="xstate.send",ActionTypes1.Cancel="xstate.cancel",ActionTypes1.NullEvent="",ActionTypes1.Assign="xstate.assign",ActionTypes1.After="xstate.after",ActionTypes1.DoneState="done.state",ActionTypes1.DoneInvoke="done.invoke",ActionTypes1.Log="xstate.log",ActionTypes1.Init="xstate.init",ActionTypes1.Invoke="xstate.invoke",ActionTypes1.ErrorExecution="error.execution",ActionTypes1.ErrorCommunication="error.communication",ActionTypes1.ErrorPlatform="error.platform",ActionTypes1.ErrorCustom="xstate.error",ActionTypes1.Update="xstate.update",ActionTypes1.Pure="xstate.pure",ActionTypes1.Choose="xstate.choose",(SpecialTargets1=SpecialTargets||(SpecialTargets={})).Parent="#_parent",SpecialTargets1.Internal="#_internal"},89823:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Bc:function(){return isActor},ET:function(){return path},HD:function(){return isString},HV:function(){return isBehavior},JQ:function(){return isBuiltInEvent},L$:function(){return symbolObservable},O4:function(){return isMachine},Q8:function(){return mapValues},Q9:function(){return toStatePath},QX:function(){return mapContext},Qi:function(){return toGuard},SA:function(){return function toStatePaths(stateValue){return stateValue?isString(stateValue)?[[stateValue]]:flatten(Object.keys(stateValue).map(function(key){var subStateValue=stateValue[key];return"string"==typeof subStateValue||subStateValue&&Object.keys(subStateValue).length?toStatePaths(stateValue[key]).map(function(subPath){return[key].concat(subPath)}):[[key]]})):[[]]}},W:function(){return function matchesState(parentStateId,childStateId,delimiter){void 0===delimiter&&(delimiter=_constants_js__WEBPACK_IMPORTED_MODULE_0__.iS);var parentStateValue=toStateValue(parentStateId,delimiter),childStateValue=toStateValue(childStateId,delimiter);return isString(childStateValue)?!!isString(parentStateValue)&&childStateValue===parentStateValue:isString(parentStateValue)?parentStateValue in childStateValue:Object.keys(parentStateValue).every(function(key){return key in childStateValue&&matchesState(parentStateValue[key],childStateValue[key])})}},WM:function(){return toStateValue},ZK:function(){return warn},_v:function(){return toEventObject},bi:function(){return isObservable},bx:function(){return createInvokeId},dt:function(){return updateContext},g5:function(){return toSCXMLEvent},gk:function(){return nestedPath},ib:function(){return mapFilterValues},j:function(){return toInvokeSource},jh:function(){return toTransitionConfigArray},kJ:function(){return isArray},mf:function(){return isFunction},on:function(){return pathToStateValue},qo:function(){return toArray},rg:function(){return normalizeTarget},uK:function(){return partition},v4:function(){return reportUnhandledExceptionOnInvocation},vx:function(){return evaluateGuard},x6:function(){return getEventType},xH:function(){return flatten},y8:function(){return isPromiseLike},yv:function(){return updateHistoryValue},zM:function(){return toObserver}});var _a,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63056),_constants_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(87353),_environment_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14066);function getEventType(event1){try{return isString(event1)||"number"==typeof event1?"".concat(event1):event1.type}catch(e){throw Error("Events must be strings or objects with a string event.type property.")}}function toStatePath(stateId,delimiter){try{if(isArray(stateId))return stateId;return stateId.toString().split(delimiter)}catch(e){throw Error("'".concat(stateId,"' is not a valid state path."))}}function toStateValue(stateValue,delimiter){return"object"==typeof stateValue&&"value"in stateValue&&"context"in stateValue&&"event"in stateValue&&"_event"in stateValue?stateValue.value:isArray(stateValue)?pathToStateValue(stateValue):"string"!=typeof stateValue?stateValue:pathToStateValue(toStatePath(stateValue,delimiter))}function pathToStateValue(statePath){if(1===statePath.length)return statePath[0];for(var value={},marker=value,i=0;i<statePath.length-1;i++)i===statePath.length-2?marker[statePath[i]]=statePath[i+1]:(marker[statePath[i]]={},marker=marker[statePath[i]]);return value}function mapValues(collection,iteratee){for(var result={},collectionKeys=Object.keys(collection),i=0;i<collectionKeys.length;i++){var key=collectionKeys[i];result[key]=iteratee(collection[key],key,collection,i)}return result}function mapFilterValues(collection,iteratee,predicate){var e_1,_a,result={};try{for(var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(Object.keys(collection)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,item=collection[key];predicate(item)&&(result[key]=iteratee(item,key,collection))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return result}var path=function(props){return function(object){var e_2,_a,result=object;try{for(var props_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(props),props_1_1=props_1.next();!props_1_1.done;props_1_1=props_1.next())result=result[props_1_1.value]}catch(e_2_1){e_2={error:e_2_1}}finally{try{props_1_1&&!props_1_1.done&&(_a=props_1.return)&&_a.call(props_1)}finally{if(e_2)throw e_2.error}}return result}};function nestedPath(props,accessorProp){return function(object){var e_3,_a,result=object;try{for(var props_2=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(props),props_2_1=props_2.next();!props_2_1.done;props_2_1=props_2.next()){var prop=props_2_1.value;result=result[accessorProp][prop]}}catch(e_3_1){e_3={error:e_3_1}}finally{try{props_2_1&&!props_2_1.done&&(_a=props_2.return)&&_a.call(props_2)}finally{if(e_3)throw e_3.error}}return result}}function flatten(array){var _a;return(_a=[]).concat.apply(_a,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.ev)([],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.CR)(array),!1))}function toArray(value){return void 0===value?[]:isArray(value)?value:[value]}function mapContext(mapper,context,_event){if(isFunction(mapper))return mapper(context,_event.data);var e_5,_a,result={};try{for(var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(Object.keys(mapper)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,subMapper=mapper[key];isFunction(subMapper)?result[key]=subMapper(context,_event.data):result[key]=subMapper}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_5)throw e_5.error}}return result}function isBuiltInEvent(eventType){return/^(done|error)\./.test(eventType)}function isPromiseLike(value){return!!(value instanceof Promise||null!==value&&(isFunction(value)||"object"==typeof value)&&isFunction(value.then))}function isBehavior(value){return null!==value&&"object"==typeof value&&"transition"in value&&"function"==typeof value.transition}function partition(items,predicate){var e_6,_a,_b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.CR)([[],[]],2),truthy=_b[0],falsy=_b[1];try{for(var items_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(items),items_1_1=items_1.next();!items_1_1.done;items_1_1=items_1.next()){var item=items_1_1.value;predicate(item)?truthy.push(item):falsy.push(item)}}catch(e_6_1){e_6={error:e_6_1}}finally{try{items_1_1&&!items_1_1.done&&(_a=items_1.return)&&_a.call(items_1)}finally{if(e_6)throw e_6.error}}return[truthy,falsy]}function updateHistoryValue(hist,stateValue){return{current:stateValue,states:function updateHistoryStates(hist,stateValue){return mapValues(hist.states,function(subHist,key){if(subHist){var subStateValue=(isString(stateValue)?void 0:stateValue[key])||(subHist?subHist.current:void 0);if(subStateValue)return{current:subStateValue,states:updateHistoryStates(subHist,subStateValue)}}})}(hist,stateValue)}}function updateContext(context,_event,assignActions,state){return _environment_js__WEBPACK_IMPORTED_MODULE_2__.M||warn(!!context,"Attempting to update undefined context"),context?assignActions.reduce(function(acc,assignAction){var e_7,_a,assignment=assignAction.assignment,meta={state:state,action:assignAction,_event:_event},partialUpdate={};if(isFunction(assignment))partialUpdate=assignment(acc,_event.data,meta);else try{for(var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.XA)(Object.keys(assignment)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,propAssignment=assignment[key];partialUpdate[key]=isFunction(propAssignment)?propAssignment(acc,_event.data,meta):propAssignment}}catch(e_7_1){e_7={error:e_7_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_7)throw e_7.error}}return Object.assign({},acc,partialUpdate)},context):context}var warn=function(){};function isArray(value){return Array.isArray(value)}function isFunction(value){return"function"==typeof value}function isString(value){return"string"==typeof value}function toGuard(condition,guardMap){return condition?isString(condition)?{type:_constants_js__WEBPACK_IMPORTED_MODULE_0__.TV,name:condition,predicate:guardMap?guardMap[condition]:void 0}:isFunction(condition)?{type:_constants_js__WEBPACK_IMPORTED_MODULE_0__.TV,name:condition.name,predicate:condition}:condition:void 0}function isObservable(value){try{return"subscribe"in value&&isFunction(value.subscribe)}catch(e){return!1}}_environment_js__WEBPACK_IMPORTED_MODULE_2__.M||(warn=function(condition,message){var error=condition instanceof Error?condition:void 0;if((error||!condition)&&void 0!==console){var args=["Warning: ".concat(message)];error&&args.push(error),console.warn.apply(console,args)}});var symbolObservable="function"==typeof Symbol&&Symbol.observable||"@@observable";function isMachine(value){return!!value&&"__xstatenode"in value}function isActor(value){return!!value&&"function"==typeof value.send}function toEventObject(event1,payload){return isString(event1)||"number"==typeof event1?(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.pi)({type:event1},payload):event1}function toSCXMLEvent(event1,scxmlEvent){if(!isString(event1)&&"$$type"in event1&&"scxml"===event1.$$type)return event1;var eventObject=toEventObject(event1);return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.pi)({name:eventObject.type,data:eventObject,$$type:"scxml",type:"external"},scxmlEvent)}function toTransitionConfigArray(event1,configLike){return(isArray(configLike)?configLike:[configLike]).map(function(transitionLike){return void 0===transitionLike||"string"==typeof transitionLike||isMachine(transitionLike)?{target:transitionLike,event:event1}:(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.pi)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.pi)({},transitionLike),{event:event1})})}function normalizeTarget(target){if(void 0!==target&&target!==_constants_js__WEBPACK_IMPORTED_MODULE_0__.rt)return toArray(target)}function reportUnhandledExceptionOnInvocation(originalError,currentError,id){if(!_environment_js__WEBPACK_IMPORTED_MODULE_2__.M){var originalStackTrace=originalError.stack?" Stacktrace was '".concat(originalError.stack,"'"):"";if(originalError===currentError)console.error("Missing onError handler for invocation '".concat(id,"', error was '").concat(originalError,"'.").concat(originalStackTrace));else{var stackTrace=currentError.stack?" Stacktrace was '".concat(currentError.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(id,"'. ")+"Original error: '".concat(originalError,"'. ").concat(originalStackTrace," Current error is '").concat(currentError,"'.").concat(stackTrace))}}}function evaluateGuard(machine,guard,context,_event,state){var guards=machine.options.guards,guardMeta={state:state,cond:guard,_event:_event};if(guard.type===_constants_js__WEBPACK_IMPORTED_MODULE_0__.TV)return((null==guards?void 0:guards[guard.name])||guard.predicate)(context,_event.data,guardMeta);var condFn=null==guards?void 0:guards[guard.type];if(!condFn)throw Error("Guard '".concat(guard.type,"' is not implemented on machine '").concat(machine.id,"'."));return condFn(context,_event.data,guardMeta)}function toInvokeSource(src){return"string"==typeof src?{type:src}:src}function toObserver(nextHandler,errorHandler,completionHandler){var noop=function(){},isObserver="object"==typeof nextHandler,self1=isObserver?nextHandler:null;return{next:((isObserver?nextHandler.next:nextHandler)||noop).bind(self1),error:((isObserver?nextHandler.error:errorHandler)||noop).bind(self1),complete:((isObserver?nextHandler.complete:completionHandler)||noop).bind(self1)}}function createInvokeId(stateNodeId,index){return"".concat(stateNodeId,":invocation[").concat(index,"]")}(_a={})[symbolObservable]=function(){return this},_a[Symbol.observable]=function(){return this}}}]);