"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8700],{96391:function(e,t,r){r.d(t,{BU:function(){return tT},CX:function(){return tp},F3:function(){return eb},UE:function(){return ty},mH:function(){return tC},vt:function(){return ez}});var a=r(6907),n=r.n(a),o=r(23279),i=r.n(o),l=r(23493),s=r.n(l),d=r(67294),c=r(94203),u=r(77493),f=r(58354),v=r(18156),h=r(73935);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var m=0;class w{constructor(){this.id="".concat(m++)}}var b=new WeakMap,M=new WeakMap,x=new WeakMap,k=new WeakMap,y=new WeakMap,E=new WeakMap,L=new WeakMap,C=new WeakMap,D=new WeakMap,O=new WeakMap,S=new WeakMap,B=new WeakMap,F=new WeakMap,T=new WeakMap,R=new WeakMap,P=new WeakMap,N=new WeakMap,W=new WeakMap,j=new WeakMap,A=new WeakMap,I=new WeakMap,q=Symbol("placeholder"),Y=Symbol("mark-placeholder"),_=globalThis.Text,$=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,U=e=>V(e)&&8===e.nodeType,z=e=>V(e)&&1===e.nodeType,V=e=>{var t=$(e);return!!t&&e instanceof t.Node},K=e=>{var t=e&&e.anchorNode&&$(e.anchorNode);return!!t&&e instanceof t.Selection},H=e=>V(e)&&3===e.nodeType,X=e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length,J=e=>{var[t,r]=e;if(z(t)&&t.childNodes.length){var a=r===t.childNodes.length,n=a?r-1:r;for([t,n]=G(t,n,a?"backward":"forward"),a=n<r;z(t)&&t.childNodes.length;){var o=a?t.childNodes.length-1:0;t=Q(t,o,a?"backward":"forward")}r=a&&null!=t.textContent?t.textContent.length:0}return[t,r]},Z=e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},G=(e,t,r)=>{for(var{childNodes:a}=e,n=a[t],o=t,i=!1,l=!1;(U(n)||z(n)&&0===n.childNodes.length||z(n)&&"false"===n.getAttribute("contenteditable"))&&(!i||!l);){if(o>=a.length){i=!0,o=t-1,r="backward";continue}if(o<0){l=!0,o=t+1,r="forward";continue}n=a[o],t=o,o+="forward"===r?1:-1}return[n,t]},Q=(e,t,r)=>{var[a]=G(e,t,r);return a},ee=e=>{var t="";if(H(e)&&e.nodeValue)return e.nodeValue;if(z(e)){for(var r of Array.from(e.childNodes))t+=ee(r);var a=getComputedStyle(e).getPropertyValue("display");("block"===a||"list"===a||"BR"===e.tagName)&&(t+="\n")}return t},et=/data-slate-fragment="(.+?)"/m,er=e=>{var[,t]=e.getData("text/html").match(et)||[];return t},ea=(e,t,r)=>{var{target:a}=t;if(z(a)&&a.matches('[contentEditable="false"]'))return!1;var{document:n}=eb.getWindow(e);if(n.contains(a))return eb.hasDOMNode(e,a,{editable:!0});var o=r.find(e=>{var{addedNodes:t,removedNodes:r}=e;for(var n of t)if(n===a||n.contains(a))return!0;for(var o of r)if(o===a||o.contains(a))return!0});return!!o&&o!==t&&ea(e,o,r)},en=parseInt(d.version.split(".")[0],10)>=17,eo="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ei="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),el="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),es="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ed="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),ec="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),eu="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),ef="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),ev=el&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),eh="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),ep="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),eg="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent),em=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement),ew=(!ef||!ev)&&!ec&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,eb={isComposing:e=>!!B.get(e),getWindow(e){var t=x.get(e);if(!t)throw Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=C.get(t);return r||(r=new w,C.set(t,r)),r},findPath(e,t){for(var r=[],a=t;;){var n=M.get(a);if(null==n){if(u.ML.isEditor(a))return r;break}var o=b.get(a);if(null==o)break;r.unshift(o),a=n}throw Error("Unable to find the path for Slate node: ".concat(u.o4.stringify(t)))},findDocumentOrShadowRoot(e){var t=eb.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},isFocused:e=>!!S.get(e),isReadOnly:e=>!!O.get(e),blur(e){var t=eb.toDOMNode(e,e),r=eb.findDocumentOrShadowRoot(e);S.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=eb.toDOMNode(e,e),r=eb.findDocumentOrShadowRoot(e);S.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){var{selection:t}=e,r=eb.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&u.YR.deselect(e)},hasDOMNode(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:n=!1}=a,o=eb.toDOMNode(e,e);try{r=z(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&r.closest("[data-slate-editor]")===o&&(!n||!!r.isContentEditable||"boolean"==typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===o||!!r.getAttribute("data-slate-zero-width"))},insertData(e,t){e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),setFragmentData(e,t,r){e.setFragmentData(t,r)},toDOMNode(e,t){var r=D.get(e),a=u.ML.isEditor(t)?k.get(e):null==r?void 0:r.get(eb.findKey(e,t));if(!a)throw Error("Cannot resolve a DOM node from Slate node: ".concat(u.o4.stringify(t)));return a},toDOMPoint(e,t){var[r]=u.ML.node(e,t.path),a=eb.toDOMNode(e,r);u.ML.void(e,{at:t})&&(t={path:t.path,offset:0});for(var n=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),o=0,i=0;i<n.length;i++){var l=n[i],s=l.childNodes[0];if(null!=s&&null!=s.textContent){var{length:d}=s.textContent,c=l.getAttribute("data-slate-length"),f=o+(null==c?d:parseInt(c,10)),v=n[i+1];if(t.offset===f&&null!=v&&v.hasAttribute("data-slate-mark-placeholder")){var h,p,g=v.childNodes[0];h=[g instanceof _?g:v,null!==(p=v.textContent)&&void 0!==p&&p.startsWith("\uFEFF")?1:0];break}if(t.offset<=f){h=[s,Math.min(d,Math.max(0,t.offset-o))];break}o=f}}if(!h)throw Error("Cannot resolve a DOM point from Slate point: ".concat(u.o4.stringify(t)));return h},toDOMRange(e,t){var{anchor:r,focus:a}=t,n=u.e6.isBackward(t),o=eb.toDOMPoint(e,r),i=u.e6.isCollapsed(t)?o:eb.toDOMPoint(e,a),l=eb.getWindow(e).document.createRange(),[s,d]=n?i:o,[c,f]=n?o:i,v=!!(z(s)?s:s.parentElement).getAttribute("data-slate-zero-width"),h=!!(z(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return l.setStart(s,v?1:d),l.setEnd(c,h?1:f),l},toSlateNode(e,t){var r=z(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var a=r?E.get(r):null;if(!a)throw Error("Cannot resolve a Slate node from DOM node: ".concat(r));return a},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var r,{clientX:a,clientY:n,target:o}=t;if(null==a||null==n)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i=eb.toSlateNode(e,t.target),l=eb.findPath(e,i);if(u.W_.isElement(i)&&u.ML.isVoid(e,i)){var s=o.getBoundingClientRect(),d=e.isInline(i)?a-s.left<s.left+s.width-a:n-s.top<s.top+s.height-n,c=u.ML.point(e,l,{edge:d?"start":"end"}),f=d?u.ML.before(e,c):u.ML.after(e,c);if(f)return u.ML.range(e,f)}var{document:v}=eb.getWindow(e);if(v.caretRangeFromPoint)r=v.caretRangeFromPoint(a,n);else{var h=v.caretPositionFromPoint(a,n);h&&((r=v.createRange()).setStart(h.offsetNode,h.offset),r.setEnd(h.offsetNode,h.offset))}if(!r)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return eb.toSlateRange(e,r,{exactMatch:!1,suppressThrow:!1})},toSlatePoint(e,t,r){var{exactMatch:a,suppressThrow:n}=r,[o,i]=a?t:J(t),l=o.parentNode,s=null,d=0;if(l){var c,f,v=eb.toDOMNode(e,e),h=l.closest('[data-slate-void="true"]'),p=h&&v.contains(h)?h:null,g=l.closest("[data-slate-leaf]"),m=null;if(g){if(s=g.closest('[data-slate-node="text"]')){var w=eb.getWindow(e).document.createRange();w.setStart(s,0),w.setEnd(o,i);var b=w.cloneContents();[...Array.prototype.slice.call(b.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(b.querySelectorAll("[contenteditable=false]"))].forEach(e=>{if(el&&!a&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\uFEFF"!==e.textContext){e.textContent.startsWith("\uFEFF")&&(e.textContent=e.textContent.slice(1));return}e.parentNode.removeChild(e)}),d=b.textContent.length,m=s}}else if(p){for(var M=p.querySelectorAll("[data-slate-leaf]"),x=0;x<M.length;x++){var k=M[x];if(eb.hasDOMNode(e,k)){g=k;break}}g?(s=g.closest('[data-slate-node="text"]'),d=(m=g).textContent.length,m.querySelectorAll("[data-slate-zero-width]").forEach(e=>{d-=e.textContent.length})):d=1}m&&d===m.textContent.length&&el&&"z"===m.getAttribute("data-slate-zero-width")&&null!==(c=m.textContent)&&void 0!==c&&c.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||es&&null!==(f=m.textContent)&&void 0!==f&&f.endsWith("\n\n"))&&d--}if(el&&!s&&!a){var y=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(y&&eb.hasDOMNode(e,y,{editable:!0})){var E=eb.toSlateNode(e,y),{path:L,offset:C}=u.ML.start(e,eb.findPath(e,E));return y.querySelector("[data-slate-leaf]")||(C=i),{path:L,offset:C}}}if(!s){if(n)return null;throw Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var D=eb.toSlateNode(e,s);return{path:eb.findPath(e,D),offset:d}},toSlateRange(e,t,r){var a,n,o,i,l,s,{exactMatch:d,suppressThrow:c}=r;if((K(t)?t.anchorNode:t.startContainer)&&(K(t)?(a=t.anchorNode,n=t.anchorOffset,o=t.focusNode,i=t.focusOffset,l=eu&&Z(a)?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(a=t.startContainer,n=t.startOffset,o=t.endContainer,i=t.endOffset,l=t.collapsed)),null==a||null==o||null==n||null==i)throw Error("Cannot resolve a Slate range from DOM range: ".concat(t));"getAttribute"in o&&"false"===o.getAttribute("contenteditable")&&(o=a,i=(null===(s=a.textContent)||void 0===s?void 0:s.length)||0);var f=eb.toSlatePoint(e,[a,n],{exactMatch:d,suppressThrow:c});if(!f)return null;var v=l?f:eb.toSlatePoint(e,[o,i],{exactMatch:d,suppressThrow:c});if(!v)return null;if(es&&!l&&a!==o){var h=u.ML.isEnd(e,f,f.path),p=u.ML.isStart(e,v,v.path);h&&(f=u.ML.after(e,f)||f),p&&(v=u.ML.before(e,v)||v)}var g={anchor:f,focus:v};return u.e6.isExpanded(g)&&u.e6.isForward(g)&&z(o)&&u.ML.void(e,{at:g.focus,mode:"highest"})&&(g=u.ML.unhangRange(e,g,{voids:!0})),g},hasRange(e,t){var{anchor:r,focus:a}=t;return u.ML.hasPath(e,r.path)&&u.ML.hasPath(e,a.path)},hasTarget:(e,t)=>V(t)&&eb.hasDOMNode(e,t),hasEditableTarget:(e,t)=>V(t)&&eb.hasDOMNode(e,t,{editable:!0}),hasSelectableTarget:(e,t)=>eb.hasEditableTarget(e,t)||eb.isTargetInsideNonReadonlyVoid(e,t),isTargetInsideNonReadonlyVoid(e,t){if(O.get(e))return!1;var r=eb.hasTarget(e,t)&&eb.toSlateNode(e,t);return u.W_.isElement(r)&&u.ML.isVoid(e,r)},androidScheduleFlush(e){var t;null===(t=R.get(e))||void 0===t||t()},androidPendingDiffs:e=>W.get(e)},eM=["anchor","focus"],ex=["anchor","focus"],ek=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>t.hasOwnProperty(r)&&e[r]===t[r]),ey=(e,t)=>{var r=g(e,eM),a=g(t,ex);return e[q]===t[q]&&ek(r,a)},eE=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r];if(!u.e6.equals(a,n)||!ey(a,n))return!1}return!0},eL=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r];if(a.anchor.offset!==n.anchor.offset||a.focus.offset!==n.focus.offset||!ey(a,n))return!1}return!0},eC=em?d.useLayoutEffect:d.useEffect,eD=e=>{var{isLast:t,leaf:r,parent:a,text:n}=e,o=eT(),i=eb.findPath(o,n),l=u.y$.parent(i),s=!0===r[Y];return o.isVoid(a)?d.createElement(eB,{length:u.NB.string(a).length}):""!==r.text||a.children[a.children.length-1]!==n||o.isInline(a)||""!==u.ML.string(o,l)?""===r.text?d.createElement(eB,{isMarkPlaceholder:s}):t&&"\n"===r.text.slice(-1)?d.createElement(eO,{isTrailing:!0,text:r.text}):d.createElement(eO,{text:r.text}):d.createElement(eB,{isLineBreak:!0,isMarkPlaceholder:s})},eO=e=>{var{text:t,isTrailing:r=!1}=e,a=(0,d.useRef)(null),n=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[o]=(0,d.useState)(n);return eC(()=>{var e=n();a.current&&a.current.textContent!==e&&(a.current.textContent=e)}),d.createElement(eS,{ref:a},o)},eS=(0,d.memo)((0,d.forwardRef)((e,t)=>d.createElement("span",{"data-slate-string":!0,ref:t},e.children))),eB=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:a=!1}=e,n={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return a&&(n["data-slate-mark-placeholder"]=!0),d.createElement("span",Object.assign({},n),el&&r?null:"\uFEFF",r?d.createElement("br",null):null)},eF=(0,d.createContext)(null),eT=()=>{var e=(0,d.useContext)(eF);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e};function eR(e){e.current&&(clearTimeout(e.current),e.current=null)}var eP=e=>{var{leaf:t,isLast:r,text:a,parent:n,renderPlaceholder:o,renderLeaf:i=e=>d.createElement(eW,Object.assign({},e))}=e,l=eT(),s=(0,d.useRef)(null),c=(0,d.useRef)(null),[u,v]=(0,d.useState)(!1),h=(0,d.useRef)(null),p=(0,d.useCallback)(e=>{if((r=s).current&&(r.current.disconnect(),null==e&&(r.current=null)),null==e)y.delete(l),null===(a=t.onPlaceholderResize)||void 0===a||a.call(t,null);else{if(y.set(l,e),!s.current){var r,a,n=window.ResizeObserver||f.do;s.current=new n(()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)})}s.current.observe(e),c.current=e}},[c,t,l]),g=d.createElement(eD,{isLast:r,leaf:t,parent:n,text:a}),m=t[q];if((0,d.useEffect)(()=>(m?h.current||(h.current=setTimeout(()=>{v(!0),h.current=null},300)):(eR(h),v(!1)),()=>eR(h)),[m,v]),m&&u){var w={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:ed?"inherit":void 0},contentEditable:!1,ref:p}};g=d.createElement(d.Fragment,null,o(w),g)}return i({attributes:{"data-slate-leaf":!0},children:g,leaf:t,text:a})},eN=d.memo(eP,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&u.xv.equals(t.leaf,e.leaf)&&t.leaf[q]===e.leaf[q]),eW=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r)},ej=e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:n,renderLeaf:o,text:i}=e,l=eT(),s=(0,d.useRef)(null),c=u.xv.decorations(i,t),f=eb.findKey(l,i),v=[],h=0;h<c.length;h++){var p=c[h];v.push(d.createElement(eN,{isLast:r&&h===c.length-1,key:"".concat(f.id,"-").concat(h),renderPlaceholder:n,leaf:p,text:i,parent:a,renderLeaf:o}))}var g=(0,d.useCallback)(e=>{var t=D.get(l);e?(null==t||t.set(f,e),L.set(i,e),E.set(e,i)):(null==t||t.delete(f),L.delete(i),s.current&&E.delete(s.current)),s.current=e},[s,l,f,i]);return d.createElement("span",{"data-slate-node":"text",ref:g},v)},eA=d.memo(ej,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&eL(t.decorations,e.decorations)),eI=e=>{var{decorations:t,element:r,renderElement:a=e=>d.createElement(eY,Object.assign({},e)),renderPlaceholder:o,renderLeaf:i,selection:l}=e,s=eT(),c=eH(),f=s.isInline(r),v=eb.findKey(s,r),h=(0,d.useCallback)(e=>{var t=D.get(s);e?(null==t||t.set(v,e),L.set(r,e),E.set(e,r)):(null==t||t.delete(v),L.delete(r))},[s,v,r]),p=eV({decorations:t,node:r,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:l}),g={"data-slate-node":"element",ref:h};if(f&&(g["data-slate-inline"]=!0),!f&&u.ML.hasInlines(s,r)){var m=u.NB.string(r),w=n()(m);"rtl"===w&&(g.dir=w)}if(u.ML.isVoid(s,r)){g["data-slate-void"]=!0,!c&&f&&(g.contentEditable=!1);var[[x]]=u.NB.texts(r);p=d.createElement(f?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d.createElement(eA,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:x})),b.set(x,0),M.set(x,r)}return a({attributes:g,children:p,element:r})},eq=d.memo(eI,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&eE(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&u.e6.equals(e.selection,t.selection))),eY=e=>{var{attributes:t,children:r,element:a}=e,n=eT().isInline(a)?"span":"div";return d.createElement(n,Object.assign({},t,{style:{position:"relative"}}),r)},e_=(0,d.createContext)(()=>[]),e$=()=>(0,d.useContext)(e_),eU=(0,d.createContext)(!1),ez=()=>(0,d.useContext)(eU),eV=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:i}=e,l=e$(),s=eT(),c=eb.findPath(s,r),f=[],v=u.W_.isElement(r)&&!s.isInline(r)&&u.ML.hasInlines(s,r),h=0;h<r.children.length;h++){var p=c.concat(h),g=r.children[h],m=eb.findKey(s,g),w=u.ML.range(s,p),x=i&&u.e6.intersection(w,i),k=l([g,p]);for(var y of t){var E=u.e6.intersection(y,w);E&&k.push(E)}u.W_.isElement(g)?f.push(d.createElement(eU.Provider,{key:"provider-".concat(m.id),value:!!x},d.createElement(eq,{decorations:k,element:g,key:m.id,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:x}))):f.push(d.createElement(eA,{decorations:k,key:m.id,isLast:v&&h===r.children.length-1,parent:r,renderPlaceholder:n,renderLeaf:o,text:g})),b.set(g,h),M.set(g,r)}return f},eK=(0,d.createContext)(!1),eH=()=>(0,d.useContext)(eK),eX=(0,d.createContext)(null),eJ=()=>{var e=(0,d.useContext)(eX);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},eZ={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},eG={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},eQ={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},e0=e=>{var t=eZ[e],r=eG[e],a=eQ[e],n=t&&(0,v.TB)(t),o=r&&(0,v.TB)(r),i=a&&(0,v.TB)(a);return e=>!!(n&&n(e)||ei&&o&&o(e)||!ei&&i&&i(e))},e1={isBold:e0("bold"),isCompose:e0("compose"),isMoveBackward:e0("moveBackward"),isMoveForward:e0("moveForward"),isDeleteBackward:e0("deleteBackward"),isDeleteForward:e0("deleteForward"),isDeleteLineBackward:e0("deleteLineBackward"),isDeleteLineForward:e0("deleteLineForward"),isDeleteWordBackward:e0("deleteWordBackward"),isDeleteWordForward:e0("deleteWordForward"),isExtendBackward:e0("extendBackward"),isExtendForward:e0("extendForward"),isExtendLineBackward:e0("extendLineBackward"),isExtendLineForward:e0("extendLineForward"),isItalic:e0("italic"),isMoveLineBackward:e0("moveLineBackward"),isMoveLineForward:e0("moveLineForward"),isMoveWordBackward:e0("moveWordBackward"),isMoveWordForward:e0("moveWordForward"),isRedo:e0("redo"),isSoftBreak:e0("insertSoftBreak"),isSplitBlock:e0("splitBlock"),isTransposeCharacter:e0("transposeCharacter"),isUndo:e0("undo")},e6=(e,t)=>{var r=[],a=()=>{r=[]};return{registerMutations:a=>{if(t.current){var n=a.filter(t=>ea(e,t,a));r.push(...n)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),a())},clear:a}},e2={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class e9 extends d.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,e2)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=e6(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,a,n=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=n&&n.length&&(null===(a=this.manager)||void 0===a||a.registerMutations(n)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}e9.contextType=eF;var e3=el?e9:e=>{var{children:t}=e;return d.createElement(d.Fragment,null,t)};function e7(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}function e4(e,t){var{start:r,end:a,text:n}=t,o=e.slice(r,a),i=function(e,t){for(var r=Math.min(e.length,t.length),a=0;a<r;a++)if(e.charAt(a)!==t.charAt(a))return a;return r}(o,n),l=Math.min(o.length-i,n.length-i),s=function(e,t,r){for(var a=Math.min(e.length,t.length,r),n=0;n<a;n++)if(e.charAt(e.length-n-1)!==t.charAt(t.length-n-1))return n;return a}(o,n,l),d={start:r+i,end:a-s,text:n.slice(i,n.length-s)};return d.start===d.end&&0===d.text.length?null:d}function e5(e,t){var{path:r,offset:a}=t;if(!u.ML.hasPath(e,r))return null;var n=u.NB.get(e,r);if(!u.xv.isText(n))return null;var o=u.ML.above(e,{match:t=>u.W_.isElement(t)&&u.ML.isBlock(e,t),at:r});if(!o)return null;for(;a>n.text.length;){var i=u.ML.next(e,{at:r,match:u.xv.isText});if(!i||!u.y$.isDescendant(i[1],o[1]))return null;a-=n.text.length,n=i[0],r=i[1]}return{path:r,offset:a}}function e8(e,t){var r=e5(e,t.anchor);if(!r)return null;if(u.e6.isCollapsed(t))return{anchor:r,focus:r};var a=e5(e,t.focus);return a?{anchor:r,focus:a}:null}function te(e,t,r){var a=W.get(e),n=null==a?void 0:a.find(e=>{var{path:r}=e;return u.y$.equals(r,t.path)});if(!n||t.offset<=n.diff.start)return u.E9.transform(t,r,{affinity:"backward"});var{diff:o}=n;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},l=u.E9.transform(i,r,{affinity:"backward"});return l?{path:l.path,offset:l.offset+t.offset-o.start}:null}var s={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=u.E9.transform(s,r,{affinity:"backward"});return d?"split_node"===r.type&&u.y$.equals(r.path,t.path)&&s.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function tt(e,t,r){var a=te(e,t.anchor,r);if(!a)return null;if(u.e6.isCollapsed(t))return{anchor:a,focus:a};var n=te(e,t.focus,r);return n?{anchor:a,focus:n}:null}function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tn=function(){},to=e=>(null==e?void 0:e.constructor.name)==="DataTransfer",ti=["node"];function tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var ts={subtree:!0,childList:!0,characterData:!0},td=el?e=>{var t,{node:r}=e,a=g(e,ti);if(!el)return null;var n=eT(),o=(t=(0,d.useRef)(!1),(0,d.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current),[i]=(0,d.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:a}=e,n=!1,o=null,i=null,l=null,s=0,d=!1,c=()=>{var e=A.get(t);if(A.delete(t),e){var{selection:r}=t,a=e8(t,e);!a||r&&u.e6.equals(a,r)||u.YR.select(t,a)}},f=()=>{var e=j.get(t);if(j.delete(t),e){if(e.at){var r=u.E9.isPoint(e.at)?e5(t,e.at):e8(t,e.at);if(!r)return;var a=u.ML.range(t,r);t.selection&&u.e6.equals(t.selection,a)||u.YR.select(t,r)}e.run()}},v=()=>{if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),!w()&&!m()){c();return}n||(n=!0,setTimeout(()=>n=!1)),m()&&(n="action");var e=t.selection&&u.ML.rangeRef(t,t.selection,{affinity:"forward"});N.set(t,t.marks),tn("flush",j.get(t),W.get(t));for(var o=w();s=null===(v=W.get(t))||void 0===v?void 0:v[0];){var s,v,h,p=P.get(t);void 0!==p&&(P.delete(t),t.marks=p),p&&!1===d&&(d=null);var g=function(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}(s);t.selection&&u.e6.equals(t.selection,g)||u.YR.select(t,g),s.diff.text?u.ML.insertText(t,s.diff.text):u.ML.deleteFragment(t),W.set(t,null===(h=W.get(t))||void 0===h?void 0:h.filter(e=>{var{id:t}=e;return t!==s.id})),!function(e,t){var{path:r,diff:a}=t;if(!u.ML.hasPath(e,r))return!1;var n=u.NB.get(e,r);if(!u.xv.isText(n))return!1;if(a.start!==n.text.length||0===a.text.length)return n.text.slice(a.start,a.start+a.text.length)===a.text;var o=u.y$.next(r);if(!u.ML.hasPath(e,o))return!1;var i=u.NB.get(e,o);return u.xv.isText(i)&&i.text.startsWith(a.text)}(t,s)&&(o=!1,j.delete(t),N.delete(t),n="action",A.delete(t),r.cancel(),a.cancel(),null==e||e.unref())}var b=null==e?void 0:e.unref();if(!b||A.get(t)||t.selection&&u.e6.equals(b,t.selection)||u.YR.select(t,b),m()){f();return}o&&r(),r.flush(),a.flush(),c();var M=N.get(t);N.delete(t),void 0!==M&&(t.marks=M,t.onChange())},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=y.get(t);if(r){if(w()||e){r.style.display="none";return}r.style.removeProperty("display")}},p=(e,r)=>{var a,n,o,i,l,d,c,f,v=null!==(f=W.get(t))&&void 0!==f?f:[];W.set(t,v);var p=u.NB.leaf(t,e),g=v.findIndex(t=>u.y$.equals(t.path,e));if(g<0){e4(p.text,r)&&v.push({path:e,diff:r,id:s++}),h();return}var m=(a=p.text,o=Math.min((n=v[g].diff).start,r.start),i=Math.max(0,Math.min(n.start+n.text.length,r.end)-r.start),l=e7(a,n,r),d=Math.max(r.start+r.text.length,n.start+n.text.length+(n.start+n.text.length>r.start?r.text.length:0)-i),c=l.slice(o,d),e4(a,{start:o,end:Math.max(n.end,r.end-n.text.length+(n.end-n.start)),text:c}));if(!m){v.splice(g,1),h();return}v[g]=ta(ta({},v[g]),{},{diff:m})},g=function(e){var{at:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,A.delete(t),r.cancel(),a.cancel(),m()&&v(),j.set(t,{at:n,run:e}),l=setTimeout(v)},m=()=>!!j.get(t),w=()=>{var e;return!!(null!==(e=W.get(t))&&void 0!==e&&e.length)},b=e=>{A.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var a=!r||!u.y$.equals(r.anchor.path,e.anchor.path),n=!r||!u.y$.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(a&&d||n)&&(d=!1),(a||w())&&(i=setTimeout(v,200))}},M=()=>{m()||(l=setTimeout(v))};return{flush:v,scheduleFlush:M,hasPendingDiffs:w,hasPendingAction:m,hasPendingChanges:()=>m()||w(),isFlushing:()=>n,handleUserSelect:b,handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout(()=>{B.set(t,!1),v()},25)},handleCompositionStart:e=>{B.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{i&&(clearTimeout(i),i=null);var{inputType:r}=e,a=null,n=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==r&&"insertCompositionText"!==r&&(d=!1);var[o]=e.getTargetRanges();o&&(a=eb.toSlateRange(t,o,{exactMatch:!1,suppressThrow:!0}));var l=eb.getWindow(t).getSelection();if(!a&&l&&(o=l,a=eb.toSlateRange(t,l,{exactMatch:!1,suppressThrow:!0})),a=null!==(B=a)&&void 0!==B?B:t.selection){var s=!0;if(r.startsWith("delete")){if(u.e6.isExpanded(a)){var[c,f]=u.e6.edges(a);if(u.NB.leaf(t,c.path).text.length===c.offset&&0===f.offset){var v=u.ML.next(t,{at:c.path,match:u.xv.isText});v&&u.y$.equals(v[1],f.path)&&(a={anchor:f,focus:f})}}var h=r.endsWith("Backward")?"backward":"forward",[m,w]=u.e6.edges(a),[x,k]=u.ML.leaf(t,m.path),y={text:"",start:m.offset,end:w.offset},E=W.get(t),L=null==E?void 0:E.find(e=>u.y$.equals(e.path,k)),C=L?[L.diff,y]:[y];if(0===e7(x.text,...C).length&&(s=!1),u.e6.isExpanded(a)){if(s&&u.y$.equals(a.anchor.path,a.focus.path)){var D={path:a.anchor.path,offset:m.offset};return b(u.ML.range(t,D,D)),p(a.anchor.path,{text:"",end:w.offset,start:m.offset})}return g(()=>u.ML.deleteFragment(t,{direction:h}),{at:a})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return g(()=>u.ML.deleteFragment(t),{at:a});case"deleteContent":case"deleteContentForward":var{anchor:O}=a;if(s&&u.e6.isCollapsed(a)){var S=u.NB.leaf(t,O.path);if(O.offset<S.text.length)return p(O.path,{text:"",start:O.offset,end:O.offset+1})}return g(()=>u.ML.deleteForward(t),{at:a});case"deleteContentBackward":var B,F,{anchor:T}=a,R=K(o)?o.isCollapsed:!!(null!==(F=o)&&void 0!==F&&F.collapsed);if(s&&R&&u.e6.isCollapsed(a)&&T.offset>0)return p(T.path,{text:"",start:T.offset-1,end:T.offset});return g(()=>u.ML.deleteBackward(t),{at:a});case"deleteEntireSoftLine":return g(()=>{u.ML.deleteBackward(t,{unit:"line"}),u.ML.deleteForward(t,{unit:"line"})},{at:a});case"deleteHardLineBackward":return g(()=>u.ML.deleteBackward(t,{unit:"block"}),{at:a});case"deleteSoftLineBackward":return g(()=>u.ML.deleteBackward(t,{unit:"line"}),{at:a});case"deleteHardLineForward":return g(()=>u.ML.deleteForward(t,{unit:"block"}),{at:a});case"deleteSoftLineForward":return g(()=>u.ML.deleteForward(t,{unit:"line"}),{at:a});case"deleteWordBackward":return g(()=>u.ML.deleteBackward(t,{unit:"word"}),{at:a});case"deleteWordForward":return g(()=>u.ML.deleteForward(t,{unit:"word"}),{at:a});case"insertLineBreak":return g(()=>u.ML.insertSoftBreak(t),{at:a});case"insertParagraph":return g(()=>u.ML.insertBreak(t),{at:a});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(to(n))return g(()=>eb.insertData(t,n),{at:a});var N=null!=n?n:"";if(P.get(t)&&(N=N.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(N)&&(N=N.slice(0,-1)),N.includes("\n"))return g(()=>{var e=N.split("\n");e.forEach((r,a)=>{r&&u.ML.insertText(t,r),a!==e.length-1&&u.ML.insertSoftBreak(t)})},{at:a});if(u.y$.equals(a.anchor.path,a.focus.path)){var[j,A]=u.e6.edges(a),I={start:j.offset,end:A.offset,text:N};if(N&&d&&"insertCompositionText"===r){var q=d.start+d.text.search(/\S|$/);I.start+I.text.search(/\S|$/)===q+1&&I.end===d.start+d.text.length?(I.start-=1,d=null,M()):d=!1}else d="insertText"===r&&(null===d?I:!!(d&&u.e6.isCollapsed(a))&&d.end+d.text.length===j.offset&&ta(ta({},d),{},{text:d.text+N}));if(s){p(j.path,I);return}}return g(()=>u.ML.insertText(t,N),{at:a})}}},handleKeyDown:e=>{w()||(h(!0),setTimeout(h))},handleDomMutations:e=>{if(!(w()||m())&&e.some(r=>ea(t,r,e))){var r;null===(r=I.get(t))||void 0===r||r()}},handleInput:()=>{(m()||!w())&&v()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:n},a)));return!function(e,t,r){var[a]=(0,d.useState)(()=>new MutationObserver(t));eC(()=>{a.takeRecords()}),(0,d.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),()=>a.disconnect()},[a,e,r])}(r,i.handleDomMutations,ts),R.set(n,i.scheduleFlush),o&&i.flush(),i}:()=>null,tc=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],tu=["text"];function tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function tv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var th=e=>d.createElement(d.Fragment,null,eV(e)),tp=e=>{var t,r,a,o,l=(0,d.useCallback)(e=>d.createElement(tg,Object.assign({},e)),[]),{autoFocus:c,decorate:f=tm,onDOMBeforeInput:v,placeholder:h,readOnly:p=!1,renderElement:m,renderLeaf:w,renderPlaceholder:b=l,scrollSelectionIntoView:M=tw,style:y={},as:C="div",disableDefaultStyles:D=!1}=e,T=g(e,tc),R=eJ(),[W,j]=(0,d.useState)(!1),A=(0,d.useRef)(null),_=(0,d.useRef)([]),[U,K]=(0,d.useState)(),{onUserInput:H,receivedUserInput:J}=(t=eT(),r=(0,d.useRef)(!1),a=(0,d.useRef)(0),o=(0,d.useCallback)(()=>{if(!r.current){r.current=!0;var e=eb.getWindow(t);e.cancelAnimationFrame(a.current),a.current=e.requestAnimationFrame(()=>{r.current=!1})}},[t]),(0,d.useEffect)(()=>()=>cancelAnimationFrame(a.current),[]),{receivedUserInput:r,onUserInput:o}),[,Z]=(0,d.useReducer)(e=>e+1,0);I.set(R,Z),O.set(R,p);var G=(0,d.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,d.useEffect)(()=>{A.current&&c&&A.current.focus()},[c]);var Q=(0,d.useRef)(),ee=(0,d.useMemo)(()=>s()(()=>{var e=Q.current;if((el||!eb.isComposing(R))&&(!G.isUpdatingSelection||null!=e&&e.isFlushing())&&!G.isDraggingInternally){var t=eb.findDocumentOrShadowRoot(R),{activeElement:r}=t,a=eb.toDOMNode(R,R),n=t.getSelection();if(r===a?(G.latestElement=r,S.set(R,!0)):S.delete(R),!n)return u.YR.deselect(R);var{anchorNode:o,focusNode:i}=n,l=eb.hasEditableTarget(R,o)||eb.isTargetInsideNonReadonlyVoid(R,o),s=eb.hasEditableTarget(R,i)||eb.isTargetInsideNonReadonlyVoid(R,i);if(l&&s){var d=eb.toSlateRange(R,n,{exactMatch:!1,suppressThrow:!0});d&&(eb.isComposing(R)||null!=e&&e.hasPendingChanges()||null!=e&&e.isFlushing()?null==e||e.handleUserSelect(d):u.YR.select(R,d))}!p||l&&s||u.YR.deselect(R)}},100),[R,p,G]),et=(0,d.useMemo)(()=>i()(ee,0),[ee]);Q.current=td({node:A,onDOMSelectionChange:ee,scheduleOnDOMSelectionChange:et}),eC(()=>{A.current&&(r=$(A.current))?(x.set(R,r),k.set(R,A.current),L.set(R,A.current),E.set(A.current,R)):L.delete(R);var e,t,r,{selection:a}=R,n=eb.findDocumentOrShadowRoot(R).getSelection();if(!(!n||!eb.isFocused(R)||null!==(e=Q.current)&&void 0!==e&&e.hasPendingAction())){var o=e=>{var t="None"!==n.type;if(a||t){var r=k.get(R),o=!1;if(r.contains(n.anchorNode)&&r.contains(n.focusNode)&&(o=!0),t&&o&&a&&!e){var i=eb.toSlateRange(R,n,{exactMatch:!0,suppressThrow:!0});if(i&&u.e6.equals(i,a)){if(!G.hasMarkPlaceholder)return;var l,{anchorNode:s}=n;if(null!=s&&null!==(l=s.parentElement)&&void 0!==l&&l.hasAttribute("data-slate-mark-placeholder"))return}}if(a&&!eb.hasRange(R,a)){R.selection=eb.toSlateRange(R,n,{exactMatch:!1,suppressThrow:!0});return}G.isUpdatingSelection=!0;var d=a&&eb.toDOMRange(R,a);return d?(u.e6.isBackward(a)?n.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):n.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset),M(R,d)):n.removeAllRanges(),d}},i=o(),l=(null===(t=Q.current)||void 0===t?void 0:t.isFlushing())==="action";if(!el||!l){setTimeout(()=>{i&&es&&eb.toDOMNode(R,R).focus(),G.isUpdatingSelection=!1});return}var s=null,d=requestAnimationFrame(()=>{if(l){var e=e=>{try{eb.toDOMNode(R,R).focus(),o(e)}catch(e){}};e(),s=setTimeout(()=>{e(!0),G.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(d),s&&clearTimeout(s)}}});var er=(0,d.useCallback)(e=>{if(H(),!p&&eb.hasEditableTarget(R,e.target)&&!tx(e,v)){if(Q.current)return Q.current.handleDOMBeforeInput(e);et.flush(),ee.flush();var{selection:t}=R,{inputType:r}=e,a=e.dataTransfer||e.data||void 0,n="insertCompositionText"===r||"deleteCompositionText"===r;if(!(n&&eb.isComposing(R))){var o=!1;if("insertText"===r&&t&&u.e6.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){o=!0,R.marks&&(o=!1);var{anchor:i}=t,[l,s]=eb.toDOMPoint(R,i),d=null===(h=l.parentElement)||void 0===h?void 0:h.closest("a"),c=eb.getWindow(R);if(o&&d&&eb.hasDOMNode(R,d)){var f,h,g,m,w=null==c?void 0:c.document.createTreeWalker(d,NodeFilter.SHOW_TEXT).lastChild();w===l&&(null===(m=w.textContent)||void 0===m?void 0:m.length)===s&&(o=!1)}if(o&&l.parentElement&&(null==c?void 0:null===(g=c.getComputedStyle(l.parentElement))||void 0===g?void 0:g.whiteSpace)==="pre"){var b=u.ML.above(R,{at:i.path,match:e=>u.W_.isElement(e)&&u.ML.isBlock(R,e)});b&&u.NB.string(b[0]).includes("	")&&(o=!1)}}if(!r.startsWith("delete")||r.startsWith("deleteBy")){var[M]=e.getTargetRanges();if(M){var x=eb.toSlateRange(R,M,{exactMatch:!1,suppressThrow:!1});if(!t||!u.e6.equals(t,x)){o=!1;var k=!n&&R.selection&&u.ML.rangeRef(R,R.selection);u.YR.select(R,x),k&&F.set(R,k)}}}if(!n){if(o||e.preventDefault(),t&&u.e6.isExpanded(t)&&r.startsWith("delete")){var y=r.endsWith("Backward")?"backward":"forward";u.ML.deleteFragment(R,{direction:y});return}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":u.ML.deleteFragment(R);break;case"deleteContent":case"deleteContentForward":u.ML.deleteForward(R);break;case"deleteContentBackward":u.ML.deleteBackward(R);break;case"deleteEntireSoftLine":u.ML.deleteBackward(R,{unit:"line"}),u.ML.deleteForward(R,{unit:"line"});break;case"deleteHardLineBackward":u.ML.deleteBackward(R,{unit:"block"});break;case"deleteSoftLineBackward":u.ML.deleteBackward(R,{unit:"line"});break;case"deleteHardLineForward":u.ML.deleteForward(R,{unit:"block"});break;case"deleteSoftLineForward":u.ML.deleteForward(R,{unit:"line"});break;case"deleteWordBackward":u.ML.deleteBackward(R,{unit:"word"});break;case"deleteWordForward":u.ML.deleteForward(R,{unit:"word"});break;case"insertLineBreak":u.ML.insertSoftBreak(R);break;case"insertParagraph":u.ML.insertBreak(R);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&eb.isComposing(R)&&(j(!1),B.set(R,!1)),(null==a?void 0:a.constructor.name)==="DataTransfer"?eb.insertData(R,a):"string"==typeof a&&(o?_.current.push(()=>u.ML.insertText(R,a)):u.ML.insertText(R,a))}var E=null===(f=F.get(R))||void 0===f?void 0:f.unref();F.delete(R),!E||R.selection&&u.e6.equals(R.selection,E)||u.YR.select(R,E)}}}},[R,ee,H,v,p,et]),ea=(0,d.useCallback)(e=>{null==e?(ee.cancel(),et.cancel(),k.delete(R),L.delete(R),A.current&&ew&&A.current.removeEventListener("beforeinput",er)):ew&&e.addEventListener("beforeinput",er),A.current=e},[ee,et,R,er]);eC(()=>{var e=eb.getWindow(R);return e.document.addEventListener("selectionchange",et),()=>{e.document.removeEventListener("selectionchange",et)}},[et]);var en=f([R,[]]),ei=h&&1===R.children.length&&1===Array.from(u.NB.texts(R)).length&&""===u.NB.string(R)&&!W,ec=(0,d.useCallback)(e=>{if(e&&ei){var t;K(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}else K(void 0)},[ei]);if(ei){var ef=u.ML.start(R,[]);en.push({[q]:!0,placeholder:h,onPlaceholderResize:ec,anchor:ef,focus:ef})}var{marks:ev}=R;if(G.hasMarkPlaceholder=!1,R.selection&&u.e6.isCollapsed(R.selection)&&ev){var{anchor:eM}=R.selection,ex=u.NB.leaf(R,eM.path),ek=g(ex,tu);if(!u.xv.equals(ex,ev,{loose:!0})){G.hasMarkPlaceholder=!0;var ey=Object.fromEntries(Object.keys(ek).map(e=>[e,null]));en.push(tv(tv(tv({[Y]:!0},ey),ev),{},{anchor:eM,focus:eM}))}}return(0,d.useEffect)(()=>{setTimeout(()=>{var{selection:e}=R;if(e){var{anchor:t}=e,r=u.NB.leaf(R,t.path);if(ev&&!u.xv.equals(r,ev,{loose:!0})){P.set(R,ev);return}}P.delete(R)})}),d.createElement(eK.Provider,{value:p},d.createElement(e_.Provider,{value:f},d.createElement(e3,{node:A,receivedUserInput:J},d.createElement(C,Object.assign({role:p?void 0:"textbox","aria-multiline":!p||void 0},T,{spellCheck:(!!ew||!em)&&T.spellCheck,autoCorrect:ew||!em?T.autoCorrect:"false",autoCapitalize:ew||!em?T.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!p,zindex:-1,suppressContentEditableWarning:!0,ref:ea,style:tv(tv({},D?{}:tv({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},U?{minHeight:U}:{})),y),onBeforeInput:(0,d.useCallback)(e=>{if(!ew&&!p&&!tb(e,T.onBeforeInput)&&eb.hasSelectableTarget(R,e.target)&&(e.preventDefault(),!eb.isComposing(R))){var t=e.data;u.ML.insertText(R,t)}},[T.onBeforeInput,R,p]),onInput:(0,d.useCallback)(e=>{if(!tb(e,T.onInput)){if(Q.current){Q.current.handleInput();return}for(var t of _.current)t();_.current=[]}},[T.onInput]),onBlur:(0,d.useCallback)(e=>{if(!(p||G.isUpdatingSelection||!eb.hasSelectableTarget(R,e.target)||tb(e,T.onBlur))){var t=eb.findDocumentOrShadowRoot(R);if(G.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===eb.toDOMNode(R,R)||z(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&V(r)&&eb.hasDOMNode(R,r)){var a=eb.toSlateNode(R,r);if(u.W_.isElement(a)&&!R.isVoid(a))return}if(ed){var n=t.getSelection();null==n||n.removeAllRanges()}S.delete(R)}}}},[p,G.isUpdatingSelection,G.latestElement,R,T.onBlur]),onClick:(0,d.useCallback)(e=>{if(eb.hasTarget(R,e.target)&&!tb(e,T.onClick)&&V(e.target)){var t=eb.toSlateNode(R,e.target),r=eb.findPath(R,t);if(u.ML.hasPath(R,r)&&u.NB.get(R,r)===t){if(3===e.detail&&r.length>=1){var a=r;if(!(u.W_.isElement(t)&&u.ML.isBlock(R,t))){var n,o=u.ML.above(R,{match:e=>u.W_.isElement(e)&&u.ML.isBlock(R,e),at:r});a=null!==(n=null==o?void 0:o[1])&&void 0!==n?n:r.slice(0,1)}var i=u.ML.range(R,a);u.YR.select(R,i);return}if(!p){var l=u.ML.start(R,r),s=u.ML.end(R,r),d=u.ML.void(R,{at:l}),c=u.ML.void(R,{at:s});if(d&&c&&u.y$.equals(d[1],c[1])){var f=u.ML.range(R,l);u.YR.select(R,f)}}}}},[R,T.onClick,p]),onCompositionEnd:(0,d.useCallback)(e=>{if(eb.hasSelectableTarget(R,e.target)){var t;if(eb.isComposing(R)&&(j(!1),B.set(R,!1)),null===(t=Q.current)||void 0===t||t.handleCompositionEnd(e),!tb(e,T.onCompositionEnd)&&!el&&!ed&&!eh&&!eo&&!eg&&!ep&&e.data){var r=P.get(R);P.delete(R),void 0!==r&&(N.set(R,R.marks),R.marks=r),u.ML.insertText(R,e.data);var a=N.get(R);N.delete(R),void 0!==a&&(R.marks=a)}}},[T.onCompositionEnd,R]),onCompositionUpdate:(0,d.useCallback)(e=>{!eb.hasSelectableTarget(R,e.target)||tb(e,T.onCompositionUpdate)||eb.isComposing(R)||(j(!0),B.set(R,!0))},[T.onCompositionUpdate,R]),onCompositionStart:(0,d.useCallback)(e=>{if(eb.hasSelectableTarget(R,e.target)&&(null===(t=Q.current)||void 0===t||t.handleCompositionStart(e),!tb(e,T.onCompositionStart)&&!el)){j(!0);var t,{selection:r}=R;if(r){if(u.e6.isExpanded(r)){u.ML.deleteFragment(R);return}var a=u.ML.above(R,{match:e=>u.W_.isElement(e)&&u.ML.isInline(R,e),mode:"highest"});if(a){var[,n]=a;if(u.ML.isEnd(R,r.anchor,n)){var o=u.ML.after(R,n);u.YR.setSelection(R,{anchor:o,focus:o})}}}}},[T.onCompositionStart,R]),onCopy:(0,d.useCallback)(e=>{!eb.hasSelectableTarget(R,e.target)||tb(e,T.onCopy)||tM(e)||(e.preventDefault(),eb.setFragmentData(R,e.clipboardData,"copy"))},[T.onCopy,R]),onCut:(0,d.useCallback)(e=>{if(!p&&eb.hasSelectableTarget(R,e.target)&&!tb(e,T.onCut)&&!tM(e)){e.preventDefault(),eb.setFragmentData(R,e.clipboardData,"cut");var{selection:t}=R;if(t){if(u.e6.isExpanded(t))u.ML.deleteFragment(R);else{var r=u.NB.parent(R,t.anchor.path);u.ML.isVoid(R,r)&&u.YR.delete(R)}}}},[p,R,T.onCut]),onDragOver:(0,d.useCallback)(e=>{if(eb.hasTarget(R,e.target)&&!tb(e,T.onDragOver)){var t=eb.toSlateNode(R,e.target);u.W_.isElement(t)&&u.ML.isVoid(R,t)&&e.preventDefault()}},[T.onDragOver,R]),onDragStart:(0,d.useCallback)(e=>{if(!p&&eb.hasTarget(R,e.target)&&!tb(e,T.onDragStart)){var t=eb.toSlateNode(R,e.target),r=eb.findPath(R,t);if(u.W_.isElement(t)&&u.ML.isVoid(R,t)||u.ML.void(R,{at:r,voids:!0})){var a=u.ML.range(R,r);u.YR.select(R,a)}G.isDraggingInternally=!0,eb.setFragmentData(R,e.dataTransfer,"drag")}},[p,R,T.onDragStart,G]),onDrop:(0,d.useCallback)(e=>{if(!p&&eb.hasTarget(R,e.target)&&!tb(e,T.onDrop)){e.preventDefault();var t=R.selection,r=eb.findEventRange(R,e),a=e.dataTransfer;u.YR.select(R,r),G.isDraggingInternally&&t&&!u.e6.equals(t,r)&&!u.ML.void(R,{at:r,voids:!0})&&u.YR.delete(R,{at:t}),eb.insertData(R,a),eb.isFocused(R)||eb.focus(R)}G.isDraggingInternally=!1},[p,R,T.onDrop,G]),onDragEnd:(0,d.useCallback)(e=>{!p&&G.isDraggingInternally&&T.onDragEnd&&eb.hasTarget(R,e.target)&&T.onDragEnd(e),G.isDraggingInternally=!1},[p,G,T,R]),onFocus:(0,d.useCallback)(e=>{if(!p&&!G.isUpdatingSelection&&eb.hasEditableTarget(R,e.target)&&!tb(e,T.onFocus)){var t=eb.toDOMNode(R,R),r=eb.findDocumentOrShadowRoot(R);if(G.latestElement=r.activeElement,es&&e.target!==t){t.focus();return}S.set(R,!0)}},[p,G,R,T.onFocus]),onKeyDown:(0,d.useCallback)(e=>{if(!p&&eb.hasEditableTarget(R,e.target)){null===(t=Q.current)||void 0===t||t.handleKeyDown(e);var t,{nativeEvent:r}=e;if(eb.isComposing(R)&&!1===r.isComposing&&(B.set(R,!1),j(!1)),!(tb(e,T.onKeyDown)||eb.isComposing(R))){var{selection:a}=R,o=R.children[null!==a?a.focus.path[0]:0],i="rtl"===n()(u.NB.string(o));if(e1.isRedo(r)){e.preventDefault(),"function"==typeof R.redo&&R.redo();return}if(e1.isUndo(r)){e.preventDefault(),"function"==typeof R.undo&&R.undo();return}if(e1.isMoveLineBackward(r)){e.preventDefault(),u.YR.move(R,{unit:"line",reverse:!0});return}if(e1.isMoveLineForward(r)){e.preventDefault(),u.YR.move(R,{unit:"line"});return}if(e1.isExtendLineBackward(r)){e.preventDefault(),u.YR.move(R,{unit:"line",edge:"focus",reverse:!0});return}if(e1.isExtendLineForward(r)){e.preventDefault(),u.YR.move(R,{unit:"line",edge:"focus"});return}if(e1.isMoveBackward(r)){e.preventDefault(),a&&u.e6.isCollapsed(a)?u.YR.move(R,{reverse:!i}):u.YR.collapse(R,{edge:"start"});return}if(e1.isMoveForward(r)){e.preventDefault(),a&&u.e6.isCollapsed(a)?u.YR.move(R,{reverse:i}):u.YR.collapse(R,{edge:"end"});return}if(e1.isMoveWordBackward(r)){e.preventDefault(),a&&u.e6.isExpanded(a)&&u.YR.collapse(R,{edge:"focus"}),u.YR.move(R,{unit:"word",reverse:!i});return}if(e1.isMoveWordForward(r)){e.preventDefault(),a&&u.e6.isExpanded(a)&&u.YR.collapse(R,{edge:"focus"}),u.YR.move(R,{unit:"word",reverse:i});return}if(ew){if((eu||ed)&&a&&(e1.isDeleteBackward(r)||e1.isDeleteForward(r))&&u.e6.isCollapsed(a)){var l=u.NB.parent(R,a.anchor.path);if(u.W_.isElement(l)&&u.ML.isVoid(R,l)&&(u.ML.isInline(R,l)||u.ML.isBlock(R,l))){e.preventDefault(),u.ML.deleteBackward(R,{unit:"block"});return}}}else{if(e1.isBold(r)||e1.isItalic(r)||e1.isTransposeCharacter(r)){e.preventDefault();return}if(e1.isSoftBreak(r)){e.preventDefault(),u.ML.insertSoftBreak(R);return}if(e1.isSplitBlock(r)){e.preventDefault(),u.ML.insertBreak(R);return}if(e1.isDeleteBackward(r)){e.preventDefault(),a&&u.e6.isExpanded(a)?u.ML.deleteFragment(R,{direction:"backward"}):u.ML.deleteBackward(R);return}if(e1.isDeleteForward(r)){e.preventDefault(),a&&u.e6.isExpanded(a)?u.ML.deleteFragment(R,{direction:"forward"}):u.ML.deleteForward(R);return}if(e1.isDeleteLineBackward(r)){e.preventDefault(),a&&u.e6.isExpanded(a)?u.ML.deleteFragment(R,{direction:"backward"}):u.ML.deleteBackward(R,{unit:"line"});return}if(e1.isDeleteLineForward(r)){e.preventDefault(),a&&u.e6.isExpanded(a)?u.ML.deleteFragment(R,{direction:"forward"}):u.ML.deleteForward(R,{unit:"line"});return}if(e1.isDeleteWordBackward(r)){e.preventDefault(),a&&u.e6.isExpanded(a)?u.ML.deleteFragment(R,{direction:"backward"}):u.ML.deleteBackward(R,{unit:"word"});return}if(e1.isDeleteWordForward(r)){e.preventDefault(),a&&u.e6.isExpanded(a)?u.ML.deleteFragment(R,{direction:"forward"}):u.ML.deleteForward(R,{unit:"word"});return}}}}},[p,R,T.onKeyDown]),onPaste:(0,d.useCallback)(e=>{!p&&eb.hasEditableTarget(R,e.target)&&!tb(e,T.onPaste)&&(!ew||X(e.nativeEvent)||ed)&&(e.preventDefault(),eb.insertData(R,e.clipboardData))},[p,R,T.onPaste])}),d.createElement(th,{decorations:en,node:R,renderElement:m,renderPlaceholder:b,renderLeaf:w,selection:R.selection})))))},tg=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r,el&&d.createElement("br",null))},tm=()=>[],tw=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&u.e6.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,c.Z)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},tb=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},tM=e=>V(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),tx=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},tk=(0,d.createContext)(!1),ty=()=>(0,d.useContext)(tk),tE=(0,d.createContext)({}),tL=["editor","children","onChange","value"],tC=e=>{var t,r,a,{editor:n,children:o,onChange:i,value:l}=e,s=g(e,tL),c=(0,d.useRef)(!1),[f,v]=d.useState(()=>{if(!u.NB.isNodeList(l))throw Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(u.o4.stringify(l)));if(!u.ML.isEditor(n))throw Error("[Slate] editor is invalid! You passed: ".concat(u.o4.stringify(n)));return n.children=l,Object.assign(n,s),{v:0,editor:n}}),{selectorContext:h,onChange:p}=(t=(0,d.useRef)([]).current,r=(0,d.useRef)({editor:n}).current,a=(0,d.useCallback)(e=>{r.editor=e,t.forEach(t=>t(e))},[t,r]),{selectorContext:(0,d.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})}),[t,r]),onChange:a}),m=(0,d.useCallback)(()=>{i&&i(n.children),v(e=>({v:e.v+1,editor:n})),p(n)},[n,p,i]);(0,d.useEffect)(()=>(T.set(n,m),()=>{T.set(n,()=>{}),c.current=!0}),[n,m]);var[w,b]=(0,d.useState)(eb.isFocused(n));return(0,d.useEffect)(()=>{b(eb.isFocused(n))},[n]),eC(()=>{var e=()=>b(eb.isFocused(n));return en?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),d.createElement(tE.Provider,{value:h},d.createElement(eX.Provider,{value:f},d.createElement(eF.Provider,{value:f.editor},d.createElement(tk.Provider,{value:w},o))))},tD=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},tO=(e,t,r)=>{var a=eb.toDOMRange(e,t).getBoundingClientRect(),n=eb.toDOMRange(e,r).getBoundingClientRect();return tD(a,n)&&tD(n,a)},tS=(e,t)=>{var r=u.ML.range(e,u.e6.end(t)),a=Array.from(u.ML.positions(e,{at:t})),n=0,o=a.length,i=Math.floor(o/2);if(tO(e,u.ML.range(e,a[n]),r))return u.ML.range(e,a[n],r);if(a.length<2)return u.ML.range(e,a[a.length-1],r);for(;i!==a.length&&i!==n;)tO(e,u.ML.range(e,a[i]),r)?o=i:n=i,i=Math.floor((n+o)/2);return u.ML.range(e,a[o],r)};function tB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function tF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tB(Object(r),!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{apply:a,onChange:n,deleteBackward:o,addMark:i,removeMark:l}=r;return D.set(r,new WeakMap),r.addMark=(e,t)=>{var a,n;null===(a=R.get(r))||void 0===a||a(),!P.get(r)&&null!==(n=W.get(r))&&void 0!==n&&n.length&&P.set(r,null),N.delete(r),i(e,t)},r.removeMark=e=>{var t;!P.get(r)&&null!==(t=W.get(r))&&void 0!==t&&t.length&&P.set(r,null),N.delete(r),l(e)},r.deleteBackward=e=>{if("line"!==e)return o(e);if(r.selection&&u.e6.isCollapsed(r.selection)){var t=u.ML.above(r,{match:e=>u.W_.isElement(e)&&u.ML.isBlock(r,e),at:r.selection});if(t){var[,a]=t,n=u.ML.range(r,a,r.selection.anchor),i=tS(r,n);u.e6.isCollapsed(i)||u.YR.delete(r,{at:i})}}},r.apply=e=>{var t,n=[],o=W.get(r);if(null!=o&&o.length){var i=o.map(t=>(function(e,t){var{path:r,diff:a,id:n}=e;switch(t.type){case"insert_text":if(!u.y$.equals(t.path,r)||t.offset>=a.end)return e;if(t.offset<=a.start)return{diff:{start:t.text.length+a.start,end:t.text.length+a.end,text:a.text},id:n,path:r};return{diff:{start:a.start,end:a.end+t.text.length,text:a.text},id:n,path:r};case"remove_text":if(!u.y$.equals(t.path,r)||t.offset>=a.end)return e;if(t.offset+t.text.length<=a.start)return{diff:{start:a.start-t.text.length,end:a.end-t.text.length,text:a.text},id:n,path:r};return{diff:{start:a.start,end:a.end-t.text.length,text:a.text},id:n,path:r};case"split_node":if(!u.y$.equals(t.path,r)||t.position>=a.end)return{diff:a,id:n,path:u.y$.transform(r,t,{affinity:"backward"})};if(t.position>a.start)return{diff:{start:a.start,end:Math.min(t.position,a.end),text:a.text},id:n,path:r};return{diff:{start:a.start-t.position,end:a.end-t.position,text:a.text},id:n,path:u.y$.transform(r,t,{affinity:"forward"})};case"merge_node":if(!u.y$.equals(t.path,r))return{diff:a,id:n,path:u.y$.transform(r,t)};return{diff:{start:a.start+t.position,end:a.end+t.position,text:a.text},id:n,path:u.y$.transform(r,t)}}var o=u.y$.transform(r,t);return o?{diff:a,path:o,id:n}:null})(t,e)).filter(Boolean);W.set(r,i)}var l=A.get(r);l&&A.set(r,tt(r,l,e));var s=j.get(r);if(null!=s&&s.at){var d=u.E9.isPoint(null==s?void 0:s.at)?te(r,s.at,e):tt(r,s.at,e);j.set(r,d?tF(tF({},s),{},{at:d}):null)}switch(e.type){case"insert_text":case"remove_text":case"set_node":case"split_node":n.push(...tR(r,e.path));break;case"set_selection":null===(t=F.get(r))||void 0===t||t.unref(),F.delete(r);break;case"insert_node":case"remove_node":n.push(...tR(r,u.y$.parent(e.path)));break;case"merge_node":n.push(...tR(r,u.y$.previous(e.path)));break;case"move_node":n.push(...tR(r,u.y$.common(u.y$.parent(e.path),u.y$.parent(e.newPath))))}for(var[c,f]of(a(e),n)){var[v]=u.ML.node(r,c);C.set(v,f)}},r.setFragmentData=e=>{var{selection:a}=r;if(a){var[n,o]=u.e6.edges(a),i=u.ML.void(r,{at:n.path}),l=u.ML.void(r,{at:o.path});if(!u.e6.isCollapsed(a)||i){var s=eb.toDOMRange(r,a),d=s.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),l){var[f]=l,v=s.cloneRange(),h=eb.toDOMNode(r,f);v.setEndAfter(h),d=v.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),H(c)){var p=c.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),d.appendChild(p),c=p}var g=JSON.stringify(r.getFragment()),m=window.btoa(encodeURIComponent(g));c.setAttribute("data-slate-fragment",m),e.setData("application/".concat(t),m);var w=d.ownerDocument.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(w),e.setData("text/html",w.innerHTML),e.setData("text/plain",ee(w)),d.ownerDocument.body.removeChild(w),e}}},r.insertData=e=>{r.insertFragmentData(e)||r.insertTextData(e)},r.insertFragmentData=e=>{var a=e.getData("application/".concat(t))||er(e);if(a){var n=JSON.parse(decodeURIComponent(window.atob(a)));return r.insertFragment(n),!0}return!1},r.insertTextData=e=>{var t=e.getData("text/plain");if(t){var a=t.split(/\r\n|\r|\n/),n=!1;for(var o of a)n&&u.YR.splitNodes(r,{always:!0}),r.insertText(o),n=!0;return!0}return!1},r.onChange=e=>{h.unstable_batchedUpdates(()=>{var t=T.get(r);t&&t(),n(e)})},r},tR=(e,t)=>{var r=[];for(var[a,n]of u.ML.levels(e,{at:t})){var o=eb.findKey(e,a);r.push([n,o])}return r}}}]);