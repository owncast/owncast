(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[145],{98082:function(e,t,n){"use strict";var r=n(97685),a=n(67294),o=n(31808);t.Z=function(){var e=a.useState(!1),t=(0,r.Z)(e,2),n=t[0],c=t[1];return a.useEffect((function(){c((0,o.fk)())}),[]),n}},6226:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(4942),a=n(87462),o=n(71002),c=n(67294),s=n(94184),i=n.n(s),u=n(99134),l=n(59844),f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var d=["xs","sm","md","lg","xl","xxl"],p=c.forwardRef((function(e,t){var n,s=c.useContext(l.E_),p=s.getPrefixCls,m=s.direction,h=c.useContext(u.Z),v=h.gutter,y=h.wrap,g=h.supportFlexGap,b=e.prefixCls,x=e.span,w=e.order,Z=e.offset,j=e.push,O=e.pull,N=e.className,P=e.children,S=e.flex,C=e.style,E=f(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),k=p("col",b),T={};d.forEach((function(t){var n,c={},s=e[t];"number"===typeof s?c.span=s:"object"===(0,o.Z)(s)&&(c=s||{}),delete E[t],T=(0,a.Z)((0,a.Z)({},T),(n={},(0,r.Z)(n,"".concat(k,"-").concat(t,"-").concat(c.span),void 0!==c.span),(0,r.Z)(n,"".concat(k,"-").concat(t,"-order-").concat(c.order),c.order||0===c.order),(0,r.Z)(n,"".concat(k,"-").concat(t,"-offset-").concat(c.offset),c.offset||0===c.offset),(0,r.Z)(n,"".concat(k,"-").concat(t,"-push-").concat(c.push),c.push||0===c.push),(0,r.Z)(n,"".concat(k,"-").concat(t,"-pull-").concat(c.pull),c.pull||0===c.pull),(0,r.Z)(n,"".concat(k,"-rtl"),"rtl"===m),n))}));var _=i()(k,(n={},(0,r.Z)(n,"".concat(k,"-").concat(x),void 0!==x),(0,r.Z)(n,"".concat(k,"-order-").concat(w),w),(0,r.Z)(n,"".concat(k,"-offset-").concat(Z),Z),(0,r.Z)(n,"".concat(k,"-push-").concat(j),j),(0,r.Z)(n,"".concat(k,"-pull-").concat(O),O),n),N,T),A={};if(v&&v[0]>0){var I=v[0]/2;A.paddingLeft=I,A.paddingRight=I}if(v&&v[1]>0&&!g){var M=v[1]/2;A.paddingTop=M,A.paddingBottom=M}return S&&(A.flex=function(e){return"number"===typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(S),!1!==y||A.minWidth||(A.minWidth=0)),c.createElement("div",(0,a.Z)({},E,{style:(0,a.Z)((0,a.Z)({},A),C),className:_,ref:t}),P)}));p.displayName="Col";var m=p},99134:function(e,t,n){"use strict";var r=(0,n(67294).createContext)({});t.Z=r},25968:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(87462),a=n(4942),o=n(71002),c=n(97685),s=n(67294),i=n(94184),u=n.n(i),l=n(59844),f=n(99134),d=n(93355),p=n(24308),m=n(98082),h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},v=((0,d.b)("top","middle","bottom","stretch"),(0,d.b)("start","end","center","space-around","space-between"),s.forwardRef((function(e,t){var n,i=e.prefixCls,d=e.justify,v=e.align,y=e.className,g=e.style,b=e.children,x=e.gutter,w=void 0===x?0:x,Z=e.wrap,j=h(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),O=s.useContext(l.E_),N=O.getPrefixCls,P=O.direction,S=s.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),C=(0,c.Z)(S,2),E=C[0],k=C[1],T=(0,m.Z)(),_=s.useRef(w);s.useEffect((function(){var e=p.ZP.subscribe((function(e){var t=_.current||0;(!Array.isArray(t)&&"object"===(0,o.Z)(t)||Array.isArray(t)&&("object"===(0,o.Z)(t[0])||"object"===(0,o.Z)(t[1])))&&k(e)}));return function(){return p.ZP.unsubscribe(e)}}),[]);var A=N("row",i),I=function(){var e=[0,0];return(Array.isArray(w)?w:[w,0]).forEach((function(t,n){if("object"===(0,o.Z)(t))for(var r=0;r<p.c4.length;r++){var a=p.c4[r];if(E[a]&&void 0!==t[a]){e[n]=t[a];break}}else e[n]=t||0})),e}(),M=u()(A,(n={},(0,a.Z)(n,"".concat(A,"-no-wrap"),!1===Z),(0,a.Z)(n,"".concat(A,"-").concat(d),d),(0,a.Z)(n,"".concat(A,"-").concat(v),v),(0,a.Z)(n,"".concat(A,"-rtl"),"rtl"===P),n),y),R={},z=I[0]>0?I[0]/-2:void 0,D=I[1]>0?I[1]/-2:void 0;if(z&&(R.marginLeft=z,R.marginRight=z),T){var Q=(0,c.Z)(I,2);R.rowGap=Q[1]}else D&&(R.marginTop=D,R.marginBottom=D);var U=s.useMemo((function(){return{gutter:I,wrap:Z,supportFlexGap:T}}),[I,Z,T]);return s.createElement(f.Z.Provider,{value:U},s.createElement("div",(0,r.Z)({},j,{className:M,style:(0,r.Z)((0,r.Z)({},R),g),ref:t}),b))})));v.displayName="Row";var y=v},9007:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/messages",function(){return n(40625)}])},40625:function(e,t,n){"use strict";n.r(t),n.d(t,{OUTCOME_TIMEOUT:function(){return T},default:function(){return _}});var r=n(28520),a=n.n(r),o=n(85893),c=n(67294),s=n(17256),i=n(71577),u=n(73555),l=n(89739),f=n(21640),d=n(94184),p=n.n(d),m=n(58091),h=n(58827),v=n(2766),y=n(56266),g=n(99611),b=n(90420);function x(e,t,n,r,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,a)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}function j(e){var t=e.isVisible,n=e.message,r=e.setMessage;if(!n||(0,v.Qr)(n))return null;var s=null,u=(0,c.useState)(0),d=u[0],p=u[1],m=(n||{}).id;(0,c.useEffect)((function(){return function(){clearTimeout(s)}}));var w,j=(w=a().mark((function e(){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(s),p(0),e.next=4,(0,h.rQ)(h.hn,{auth:!0,method:"POST",data:{visible:!t,idArray:[m]}});case 4:(o=e.sent).success&&"changed"===o.message?(r(Z({},n,{visible:!t})),p(1)):(r(Z({},n,{visible:t})),p(-1)),s=setTimeout((function(){p(0)}),T);case 7:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=w.apply(e,t);function o(e){x(a,n,r,o,c,"next",e)}function c(e){x(a,n,r,o,c,"throw",e)}o(void 0)}))}),O=(0,o.jsx)(l.Z,{style:{color:"transparent"}});d&&(O=d>0?(0,o.jsx)(l.Z,{style:{color:"var(--ant-success)"}}):(0,o.jsx)(f.Z,{style:{color:"var(--ant-warning)"}}));var N="Click to ".concat(t?"hide":"show"," this message");return(0,o.jsxs)("div",{className:"toggle-switch ".concat(t?"":"hidden"),children:[(0,o.jsx)("span",{className:"outcome-icon",children:O}),(0,o.jsx)(y.Z,{title:N,placement:"topRight",children:(0,o.jsx)(i.Z,{shape:"circle",size:"small",type:"text",icon:t?(0,o.jsx)(g.Z,{}):(0,o.jsx)(b.Z,{}),onClick:j})})]})}var O=n(85584);function N(e,t,n,r,a,o,c){try{var s=e[o](c),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(r,a)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){N(o,r,a,c,s,"next",e)}function s(e){N(o,r,a,c,s,"throw",e)}c(void 0)}))}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var k=s.Z.Title;var T=3e3;function _(){var e=(0,c.useState)([]),t=e[0],n=e[1],r=(0,c.useState)([]),s=r[0],d=r[1],y=(0,c.useState)(!1),g=y[0],b=y[1],x=(0,c.useState)(null),w=x[0],Z=x[1],N=(0,c.useState)(""),S=N[0],_=N[1],A=null,I=null,M=P(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.rQ)(h.WE,{auth:!0});case 3:t=e.sent,(0,v.Qr)(t)?n([]):n(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("==== error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));(0,c.useEffect)((function(){return M(),I=setInterval((function(){M()}),h.NE),function(){clearTimeout(A),clearTimeout(I)}}),[]);var R=function(e){return e.reduce((function(e,t){var n=t.user.id;return e.some((function(e){return e.text===n}))||e.push({text:n,value:n}),e}),[]).sort((function(e,t){var n=e.text.toUpperCase(),r=t.text.toUpperCase();return n<r?-1:n>r?1:0}))}(t),z={selectedRowKeys:s,onChange:function(e){d(e)}},D=function(e){var r=t.findIndex((function(t){return t.id===e.id}));t.splice(r,1,e),n(E(t))},Q=function(){A=setTimeout((function(){Z(null),_("")}),T)},U=P(a().mark((function e(r){var c,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,(0,h.rQ)(h.hn,{auth:!0,method:"POST",data:{visible:r,idArray:s}});case 3:(c=e.sent).success&&"changed"===c.message?(Z((0,o.jsx)(l.Z,{})),Q(),i=E(t),s.map((function(e){var n=i.findIndex((function(t){return t.id===e})),a=C({},t[n],{visible:r});return i.splice(n,1,a),null})),n(i),d([])):(Z((0,o.jsx)(f.Z,{})),Q()),b(!1);case 6:case"end":return e.stop()}}),e)}))),F=[{title:"Time",dataIndex:"timestamp",key:"timestamp",className:"timestamp-col",defaultSortOrder:"descend",render:function(e){var t=new Date(e);return(0,m.Z)(t,"PP pp")},sorter:function(e,t){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()},width:90},{title:"User",dataIndex:"user",key:"user",className:"name-col",filters:R,onFilter:function(e,t){return t.user.id===e},sorter:function(e,t){return e.user.displayName.localeCompare(t.user.displayName)},sortDirections:["ascend","descend"],ellipsis:!0,render:function(e){var t=e.displayName;return(0,o.jsx)(O.Z,{user:e,children:t})},width:110},{title:"Message",dataIndex:"body",key:"body",className:"message-col",width:320,render:function(e){return(0,o.jsx)("div",{className:"message-contents",dangerouslySetInnerHTML:{__html:e}})}},{title:"",dataIndex:"hiddenAt",key:"hiddenAt",className:"toggle-col",filters:[{text:"Visible messages",value:!0},{text:"Hidden messages",value:!1}],onFilter:function(e,t){return t.visible===e},render:function(e,t){return(0,o.jsx)(j,{isVisible:!e,message:t,setMessage:D})},width:30}],G=p()({"bulk-editor":!0,active:s.length});return(0,o.jsxs)("div",{className:"chat-messages",children:[(0,o.jsx)(k,{children:"Chat Messages"}),(0,o.jsx)("p",{children:"Manage the messages from viewers that show up on your stream."}),(0,o.jsxs)("div",{className:G,children:[(0,o.jsx)("span",{className:"label",children:"Check multiple messages to change their visibility to: "}),(0,o.jsx)(i.Z,{type:"primary",size:"small",shape:"round",className:"button",loading:"show"===S&&g,icon:"show"===S&&w,disabled:!s.length||S&&"show"!==S,onClick:function(){_("show"),U(!0)},children:"Show"}),(0,o.jsx)(i.Z,{type:"primary",size:"small",shape:"round",className:"button",loading:"hide"===S&&g,icon:"hide"===S&&w,disabled:!s.length||S&&"hide"!==S,onClick:function(){_("hide"),U(!1)},children:"Hide"})]}),(0,o.jsx)(u.Z,{size:"small",className:"table-container",pagination:{defaultPageSize:100,showSizeChanger:!0},scroll:{y:540},rowClassName:function(e){return e.hiddenAt?"hidden":""},dataSource:t,columns:F,rowKey:function(e){return e.id},rowSelection:z})]})}}},function(e){e.O(0,[662,555,516,391,533,371,774,888,179],(function(){return t=9007,e(e.s=t);var t}));var t=e.O();_N_E=t}]);